(()=>{var Qe=class extends Event{oldState;newState;constructor(i,{oldState:t="",newState:e="",...s}={}){super(i,s),this.oldState=String(t||""),this.newState=String(e||"")}},ka=new WeakMap;function Ma(i,t,e){ka.set(i,setTimeout(()=>{ka.has(i)&&i.dispatchEvent(new Qe("toggle",{cancelable:!1,oldState:t,newState:e}))},0))}var zi=globalThis.ShadowRoot||function(){},Gr=globalThis.HTMLDialogElement||function(){},je=new WeakMap,_t=new WeakMap,Ce=new WeakMap;function Ke(i){return Ce.get(i)||"hidden"}var Xe=new WeakMap;function jr(i){let t=i.popoverTargetElement;if(!(t instanceof HTMLElement))return;let e=Ke(t);i.popoverTargetAction==="show"&&e==="showing"||i.popoverTargetAction==="hide"&&e==="hidden"||(e==="showing"?ke(t,!0,!0):zt(t,!1)&&(Xe.set(t,i),Yi(t)))}function zt(i,t){return!(i.popover!=="auto"&&i.popover!=="manual"||!i.isConnected||t&&Ke(i)!=="showing"||!t&&Ke(i)!=="hidden"||i instanceof Gr&&i.hasAttribute("open")||document.fullscreenElement===i)}function Ca(i){return i?Array.from(_t.get(i.ownerDocument)||[]).indexOf(i)+1:0}function Kr(i){let t=Pa(i),e=Xr(i);return Ca(t)>Ca(e)?t:e}function Je(i){let t=_t.get(i);for(let e of t||[])if(!e.isConnected)t.delete(e);else return e;return null}function oe(i){return typeof i.getRootNode=="function"?i.getRootNode():i.parentNode?oe(i.parentNode):i}function Pa(i){for(;i;){if(i instanceof HTMLElement&&i.popover==="auto"&&Ce.get(i)==="showing")return i;if(i=i instanceof Element&&i.assignedSlot||i.parentElement||oe(i),i instanceof zi&&(i=i.host),i instanceof Document)return}}function Xr(i){for(;i;){let t=i.popoverTargetElement;if(t instanceof HTMLElement)return t;if(i=i.parentElement||oe(i),i instanceof zi&&(i=i.host),i instanceof Document)return}}function Jr(i){let t=new Map,e=0;for(let r of _t.get(i.ownerDocument)||[])t.set(r,e),e+=1;t.set(i,e),e+=1;let s=null;function a(r){let n=Pa(r);if(n===null)return null;let l=t.get(n);(s===null||t.get(s)<l)&&(s=n)}return a(i.parentElement||oe(i)),s}function Zr(i){return i.hidden||i instanceof zi||(i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement||i instanceof HTMLOptGroupElement||i instanceof HTMLOptionElement||i instanceof HTMLFieldSetElement)&&i.disabled||i instanceof HTMLInputElement&&i.type==="hidden"||i instanceof HTMLAnchorElement&&i.href===""?!1:typeof i.tabIndex=="number"&&i.tabIndex!==-1}function Qr(i){if(i.shadowRoot&&i.shadowRoot.delegatesFocus!==!0)return null;let t=i;t.shadowRoot&&(t=t.shadowRoot);let e=t.querySelector("[autofocus]");if(e)return e;{let r=t.querySelectorAll("slot");for(let n of r){let l=n.assignedElements({flatten:!0});for(let o of l){if(o.hasAttribute("autofocus"))return o;if(e=o.querySelector("[autofocus]"),e)return e}}}let s=i.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),a=s.currentNode;for(;a;){if(Zr(a))return a;a=s.nextNode()}}function tn(i){Qr(i)?.focus()}var Ze=new WeakMap;function Yi(i){if(!zt(i,!1))return;let t=i.ownerDocument;if(!i.dispatchEvent(new Qe("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!zt(i,!1))return;let e=!1;if(i.popover==="auto"){let a=i.getAttribute("popover"),r=Jr(i)||t;if(ti(r,!1,!0),a!==i.getAttribute("popover")||!zt(i,!1))return}Je(t)||(e=!0),Ze.delete(i);let s=t.activeElement;i.classList.add(":popover-open"),Ce.set(i,"showing"),je.has(t)||je.set(t,new Set),je.get(t).add(i),tn(i),i.popover==="auto"&&(_t.has(t)||_t.set(t,new Set),_t.get(t).add(i),La(Xe.get(i),!0)),e&&s&&i.popover==="auto"&&Ze.set(i,s),Ma(i,"closed","open")}function ke(i,t=!1,e=!1){if(!zt(i,!0))return;let s=i.ownerDocument;if(i.popover==="auto"&&(ti(i,t,e),!zt(i,!0))||(La(Xe.get(i),!1),Xe.delete(i),e&&(i.dispatchEvent(new Qe("beforetoggle",{oldState:"open",newState:"closed"})),!zt(i,!0))))return;je.get(s)?.delete(i),_t.get(s)?.delete(i),i.classList.remove(":popover-open"),Ce.set(i,"hidden"),e&&Ma(i,"open","closed");let a=Ze.get(i);a&&(Ze.delete(i),t&&a.focus())}function Ta(i,t=!1,e=!1){let s=Je(i);for(;s;)ke(s,t,e),s=Je(i)}function ti(i,t,e){let s=i.ownerDocument||i;if(i instanceof Document)return Ta(s,t,e);let a=null,r=!1;for(let n of _t.get(s)||[])if(n===i)r=!0;else if(r){a=n;break}if(!r)return Ta(s,t,e);for(;a&&Ke(a)==="showing"&&_t.get(s)?.size;)ke(a,t,e)}var Ui=new WeakMap;function Da(i){if(!i.isTrusted)return;let t=i.composedPath()[0];if(!t)return;let e=t.ownerDocument;if(!Je(e))return;let a=Kr(t);if(a&&i.type==="pointerdown")Ui.set(e,a);else if(i.type==="pointerup"){let r=Ui.get(e)===a;Ui.delete(e),r&&ti(a||e,!1,!0)}}var Hi=new WeakMap;function La(i,t=!1){if(!i)return;Hi.has(i)||Hi.set(i,i.getAttribute("aria-expanded"));let e=i.popoverTargetElement;if(e instanceof HTMLElement&&e.popover==="auto")i.setAttribute("aria-expanded",String(t));else{let s=Hi.get(i);s?i.setAttribute("aria-expanded",s):i.removeAttribute("aria-expanded")}}var Ia=globalThis.ShadowRoot||function(){};function en(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function Yt(i,t,e){let s=i[t];Object.defineProperty(i,t,{value(a){return s.call(this,e(a))}})}var sn=/(^|[^\\]):popover-open\b/g;function an(){return typeof globalThis.CSSLayerBlockRule=="function"}function rn(){let i=an();return`
${i?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${i?"}":""}
`}var ne=null;function $i(i){let t=rn();if(ne===null)try{ne=new CSSStyleSheet,ne.replaceSync(t)}catch{ne=!1}if(ne===!1){let e=document.createElement("style");e.textContent=t,i instanceof Document?i.head.prepend(e):i.prepend(e)}else i.adoptedStyleSheets=[ne,...i.adoptedStyleSheets]}function nn(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||Qe;function i(o){return o?.includes(":popover-open")&&(o=o.replace(sn,"$1.\\:popover-open")),o}Yt(Document.prototype,"querySelector",i),Yt(Document.prototype,"querySelectorAll",i),Yt(Element.prototype,"querySelector",i),Yt(Element.prototype,"querySelectorAll",i),Yt(Element.prototype,"matches",i),Yt(Element.prototype,"closest",i),Yt(DocumentFragment.prototype,"querySelectorAll",i),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let o=(this.getAttribute("popover")||"").toLowerCase();return o===""||o=="auto"?"auto":"manual"},set(o){o===null?this.removeAttribute("popover"):this.setAttribute("popover",o)}},showPopover:{enumerable:!0,configurable:!0,value(){Yi(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){ke(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(o){Ce.get(this)==="showing"&&o===void 0||o===!1?ke(this,!0,!0):(o===void 0||o===!0)&&Yi(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(o){let u=t.call(this,o);return $i(u),u}}});let e=HTMLElement.prototype.attachInternals;e&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let o=e.call(this);return o.shadowRoot&&$i(o.shadowRoot),o}}});let s=new WeakMap;function a(o){Object.defineProperties(o.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let c=oe(this),d=this.getAttribute("popovertarget");return(c instanceof Document||c instanceof Ia)&&d&&c.getElementById(d)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}a(HTMLButtonElement),a(HTMLInputElement);let r=o=>{let u=o.composedPath(),c=u[0];if(!(c instanceof Element)||c?.shadowRoot)return;let d=oe(c);if(!(d instanceof Ia||d instanceof Document))return;let m=u.find(g=>g.matches?.("[popovertargetaction],[popovertarget]"));if(m){jr(m),o.preventDefault();return}},n=o=>{let u=o.key,c=o.target;!o.defaultPrevented&&c&&(u==="Escape"||u==="Esc")&&ti(c.ownerDocument,!0,!0)};(o=>{o.addEventListener("click",r),o.addEventListener("keydown",n),o.addEventListener("pointerdown",Da),o.addEventListener("pointerup",Da)})(document),$i(document)}en()||nn();var ni=class extends Event{oldState;newState;constructor(i,{oldState:t="",newState:e="",...s}={}){super(i,s),this.oldState=String(t||""),this.newState=String(e||"")}},Oa=new WeakMap;function qa(i,t,e){Oa.set(i,setTimeout(()=>{Oa.has(i)&&i.dispatchEvent(new ni("toggle",{cancelable:!1,oldState:t,newState:e}))},0))}var Ji=globalThis.ShadowRoot||function(){},on=globalThis.HTMLDialogElement||function(){},ei=new WeakMap,kt=new WeakMap,De=new WeakMap;function ii(i){return De.get(i)||"hidden"}var si=new WeakMap;function ln(i){let t=i.popoverTargetElement;if(!(t instanceof HTMLElement))return;let e=ii(t);i.popoverTargetAction==="show"&&e==="showing"||i.popoverTargetAction==="hide"&&e==="hidden"||(e==="showing"?Te(t,!0,!0):jt(t,!1)&&(si.set(t,i),Xi(t)))}function jt(i,t){return!(i.popover!=="auto"&&i.popover!=="manual"||!i.isConnected||t&&ii(i)!=="showing"||!t&&ii(i)!=="hidden"||i instanceof on&&i.hasAttribute("open")||document.fullscreenElement===i)}function Na(i){return i?Array.from(kt.get(i.ownerDocument)||[]).indexOf(i)+1:0}function un(i){let t=Ba(i),e=hn(i);return Na(t)>Na(e)?t:e}function ai(i){let t=kt.get(i);for(let e of t||[])if(!e.isConnected)t.delete(e);else return e;return null}function ue(i){return typeof i.getRootNode=="function"?i.getRootNode():i.parentNode?ue(i.parentNode):i}function Ba(i){for(;i;){if(i instanceof HTMLElement&&i.popover==="auto"&&De.get(i)==="showing")return i;if(i=i instanceof Element&&i.assignedSlot||i.parentElement||ue(i),i instanceof Ji&&(i=i.host),i instanceof Document)return}}function hn(i){for(;i;){let t=i.popoverTargetElement;if(t instanceof HTMLElement)return t;if(i=i.parentElement||ue(i),i instanceof Ji&&(i=i.host),i instanceof Document)return}}function cn(i){let t=new Map,e=0;for(let r of kt.get(i.ownerDocument)||[])t.set(r,e),e+=1;t.set(i,e),e+=1;let s=null;function a(r){let n=Ba(r);if(n===null)return null;let l=t.get(n);(s===null||t.get(s)<l)&&(s=n)}return a(i.parentElement||ue(i)),s}function dn(i){return i.hidden||i instanceof Ji||(i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement||i instanceof HTMLOptGroupElement||i instanceof HTMLOptionElement||i instanceof HTMLFieldSetElement)&&i.disabled||i instanceof HTMLInputElement&&i.type==="hidden"||i instanceof HTMLAnchorElement&&i.href===""?!1:typeof i.tabIndex=="number"&&i.tabIndex!==-1}function fn(i){if(i.shadowRoot&&i.shadowRoot.delegatesFocus!==!0)return null;let t=i;t.shadowRoot&&(t=t.shadowRoot);let e=t.querySelector("[autofocus]");if(e)return e;{let r=t.querySelectorAll("slot");for(let n of r){let l=n.assignedElements({flatten:!0});for(let o of l){if(o.hasAttribute("autofocus"))return o;if(e=o.querySelector("[autofocus]"),e)return e}}}let s=i.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),a=s.currentNode;for(;a;){if(dn(a))return a;a=s.nextNode()}}function pn(i){fn(i)?.focus()}var ri=new WeakMap;function Xi(i){if(!jt(i,!1))return;let t=i.ownerDocument;if(!i.dispatchEvent(new ni("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!jt(i,!1))return;let e=!1;if(i.popover==="auto"){let a=i.getAttribute("popover"),r=cn(i)||t;if(oi(r,!1,!0),a!==i.getAttribute("popover")||!jt(i,!1))return}ai(t)||(e=!0),ri.delete(i);let s=t.activeElement;i.classList.add(":popover-open"),De.set(i,"showing"),ei.has(t)||ei.set(t,new Set),ei.get(t).add(i),pn(i),i.popover==="auto"&&(kt.has(t)||kt.set(t,new Set),kt.get(t).add(i),Wa(si.get(i),!0)),e&&s&&i.popover==="auto"&&ri.set(i,s),qa(i,"closed","open")}function Te(i,t=!1,e=!1){if(!jt(i,!0))return;let s=i.ownerDocument;if(i.popover==="auto"&&(oi(i,t,e),!jt(i,!0))||(Wa(si.get(i),!1),si.delete(i),e&&(i.dispatchEvent(new ni("beforetoggle",{oldState:"open",newState:"closed"})),!jt(i,!0))))return;ei.get(s)?.delete(i),kt.get(s)?.delete(i),i.classList.remove(":popover-open"),De.set(i,"hidden"),e&&qa(i,"open","closed");let a=ri.get(i);a&&(ri.delete(i),t&&a.focus())}function Fa(i,t=!1,e=!1){let s=ai(i);for(;s;)Te(s,t,e),s=ai(i)}function oi(i,t,e){let s=i.ownerDocument||i;if(i instanceof Document)return Fa(s,t,e);let a=null,r=!1;for(let n of kt.get(s)||[])if(n===i)r=!0;else if(r){a=n;break}if(!r)return Fa(s,t,e);for(;a&&ii(a)==="showing"&&kt.get(s)?.size;)Te(a,t,e)}var Gi=new WeakMap;function Va(i){if(!i.isTrusted)return;let t=i.composedPath()[0];if(!t)return;let e=t.ownerDocument;if(!ai(e))return;let a=un(t);if(a&&i.type==="pointerdown")Gi.set(e,a);else if(i.type==="pointerup"){let r=Gi.get(e)===a;Gi.delete(e),r&&oi(a||e,!1,!0)}}var ji=new WeakMap;function Wa(i,t=!1){if(!i)return;ji.has(i)||ji.set(i,i.getAttribute("aria-expanded"));let e=i.popoverTargetElement;if(e instanceof HTMLElement&&e.popover==="auto")i.setAttribute("aria-expanded",String(t));else{let s=ji.get(i);s?i.setAttribute("aria-expanded",s):i.removeAttribute("aria-expanded")}}var Ra=globalThis.ShadowRoot||function(){};function Ua(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function Ha(){return!!(document.body?.showPopover&&!/native code/i.test(document.body.showPopover.toString()))}function Gt(i,t,e){let s=i[t];Object.defineProperty(i,t,{value(a){return s.call(this,e(a))}})}var bn=/(^|[^\\]):popover-open\b/g;function mn(){return typeof globalThis.CSSLayerBlockRule=="function"}function gn(){let i=mn();return`
${i?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${i?"}":""}
`}var le=null;function Ki(i){let t=gn();if(le===null)try{le=new CSSStyleSheet,le.replaceSync(t)}catch{le=!1}if(le===!1){let e=document.createElement("style");e.textContent=t,i instanceof Document?i.head.prepend(e):i.prepend(e)}else i.adoptedStyleSheets=[le,...i.adoptedStyleSheets]}function $a(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||ni;function i(o){return o?.includes(":popover-open")&&(o=o.replace(bn,"$1.\\:popover-open")),o}Gt(Document.prototype,"querySelector",i),Gt(Document.prototype,"querySelectorAll",i),Gt(Element.prototype,"querySelector",i),Gt(Element.prototype,"querySelectorAll",i),Gt(Element.prototype,"matches",i),Gt(Element.prototype,"closest",i),Gt(DocumentFragment.prototype,"querySelectorAll",i),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let o=(this.getAttribute("popover")||"").toLowerCase();return o===""||o=="auto"?"auto":"manual"},set(o){o===null?this.removeAttribute("popover"):this.setAttribute("popover",o)}},showPopover:{enumerable:!0,configurable:!0,value(){Xi(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){Te(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(o){De.get(this)==="showing"&&o===void 0||o===!1?Te(this,!0,!0):(o===void 0||o===!0)&&Xi(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(o){let u=t.call(this,o);return Ki(u),u}}});let e=HTMLElement.prototype.attachInternals;e&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let o=e.call(this);return o.shadowRoot&&Ki(o.shadowRoot),o}}});let s=new WeakMap;function a(o){Object.defineProperties(o.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let c=ue(this),d=this.getAttribute("popovertarget");return(c instanceof Document||c instanceof Ra)&&d&&c.getElementById(d)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}a(HTMLButtonElement),a(HTMLInputElement);let r=o=>{let u=o.composedPath(),c=u[0];if(!(c instanceof Element)||c?.shadowRoot)return;let d=ue(c);if(!(d instanceof Ra||d instanceof Document))return;let m=u.find(g=>g.matches?.("[popovertargetaction],[popovertarget]"));if(m){ln(m),o.preventDefault();return}},n=o=>{let u=o.key,c=o.target;!o.defaultPrevented&&c&&(u==="Escape"||u==="Esc")&&oi(c.ownerDocument,!0,!0)};(o=>{o.addEventListener("click",r),o.addEventListener("keydown",n),o.addEventListener("pointerdown",Va),o.addEventListener("pointerup",Va)})(document),Ki(document)}function M(i){let t=i({css:(s,...a)=>`@layer base { ${s.raw[0]+a.join("")} }`});if(document.adoptedStyleSheets===void 0){let s=document.createElement("style");s.textContent=t,document.head.appendChild(s);return}let e=new CSSStyleSheet;e.replaceSync(t),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}function li(i,t){let e=i;for(;e;){if(t(e))return e;e=e.parentElement}}function H(i,t){let e=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t?{acceptNode:s=>{let a,r;return t(s,{skip:()=>a=!0,reject:()=>r=!0}),a?NodeFilter.FILTER_SKIP:r?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}:{});return new Zi(e)}var Zi=class{constructor(t){this.walker=t}from(t){return this.walker.currentNode=t,this}first(){return this.walker.firstChild()}last(){return this.walker.lastChild()}next(t){return this.walker.currentNode=t,this.walker.nextSibling()}nextOrFirst(t){let e=this.next(t);return e||(this.walker.currentNode=this.walker.root,this.first())}prev(t){return this.walker.currentNode=t,this.walker.previousSibling()}prevOrLast(t){let e=this.prev(t);return e||(this.walker.currentNode=this.walker.root,this.last())}closest(t,e){let s=this.from(t).walker;for(;s.currentNode;){if(e(s.currentNode))return s.currentNode;s.parentNode()}}contains(t){return this.find(e=>e===t)}find(t){return this.walk((e,s)=>{t(e)&&s(e)})}findOrFirst(t){return this.find(t)||(this.walker.currentNode=this.walker.root),this.first()}each(t){this.walk(e=>t(e))}some(t){return!!this.find(t)}every(t){let e=!0;return this.walk(s=>{t(s)||(e=!1)}),e}map(t){let e=[];return this.walk(s=>e.push(t(s))),e}filter(t){let e=[];return this.walk(s=>t(s)&&e.push(s)),e}walk(t){let e,s=this.walker,a;for(;s.nextNode()&&(e=s.currentNode,t(e,r=>a=r),a===void 0););return a}};function S(i,t){customElements.define(`ui-${i}`,t)}function v(i,t,e,s={}){return i.addEventListener(t,e,s),{off:()=>i.removeEventListener(t,e),pause:a=>{i.removeEventListener(t,e),a(),i.addEventListener(t,e)}}}function za(i){return["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","[contenteditable]"].some(e=>i.matches(e))&&i.tabIndex>=0}function Qi(i,t){let e;return function(){let s=this,a=arguments;e||(i.apply(s,a),e=!0,setTimeout(()=>e=!1,t))}}function ts(i,t){let e,s,a=t,r=!1,n={pause:()=>{r&&(clearTimeout(e),a-=Date.now()-s,r=!1)},resume:()=>{r||(s=Date.now(),e=setTimeout(i,a),r=!0)},cancel:()=>{clearTimeout(e),r=!1,a=t}};return n.resume(),n}var Ie="pointer";document.addEventListener("keydown",()=>Ie="keyboard",{capture:!0});document.addEventListener("pointerdown",i=>{Ie=i.pointerType==="mouse"?"mouse":"touch"},{capture:!0});document.addEventListener("pointermove",i=>{Ie=i.pointerType==="mouse"?"mouse":"touch"},{capture:!0});function Kt(){return Ie==="keyboard"}function vn(){return Ie==="touch"}function ui(i,t){let e="",s=kn(()=>{e=""},300);i.addEventListener("keydown",a=>{a.key.length===1&&/[a-zA-Z]/.test(a.key)&&(e+=a.key,t(e),a.stopPropagation()),s()})}function yn(i,t){return"lofi-"+(t?t+"-":"")+Math.random().toString(16).slice(2)}function R(i,t){let e=i.hasAttribute("id")?i.getAttribute("id"):yn(i,t);return h(i,"id",e),i._x_bindings||(i._x_bindings={}),i._x_bindings.id||(i._x_bindings.id=e),e}function F(){let i=!1;return t=>(...e)=>{i||(i=!0,t(...e),i=!1)}}function de(i,t,{gain:e,lose:s,focusable:a,useSafeArea:r}){let n=!1,l=f=>{Kt()&&(i.contains(f.target)||t.contains(f.target)?(n=!0,e()):(n=!1,s()))};a&&document.addEventListener("focusin",l);let o=()=>{document.removeEventListener("focusin",l)},u=()=>{},c=()=>{},d=()=>{n=!1,s(),u(),c()},m=()=>{n=!1,u(),c()},g=f=>{vn()||n||(n=!0,e(),setTimeout(()=>{let{safeArea:D,redraw:x,remove:b}=r?wn(i,t,f.clientX,f.clientY):_n();u=b;let k,E=Qi(C=>{let T=t.getBoundingClientRect(),P=i.getBoundingClientRect(),V;switch(D.contains(C.target)&&xn(P,T,C.clientX,C.clientY)?V="safeArea":t.contains(C.target)?V="panel":i.contains(C.target)?V="trigger":V="outside",k&&clearTimeout(k),V){case"outside":d();break;case"trigger":x(C.clientX,C.clientY);break;case"panel":u();break;case"safeArea":x(C.clientX,C.clientY),k=setTimeout(()=>{d()},300);break;default:break}},100);document.addEventListener("pointermove",E),c=()=>document.removeEventListener("pointermove",E)}))};i.addEventListener("pointerenter",g);let p=()=>{i.removeEventListener("pointerenter",g)};return{clear:m,remove:()=>{m(),p(),o()}}}function wn(i,t,e,s){let a=document.createElement("div"),r=t.getBoundingClientRect(),n=i.getBoundingClientRect();a.style.position="fixed",h(a,"data-safe-area","");let l=(o,u)=>{if(r.top===0&&r.bottom===0)return;let c;r.left<n.left&&(c="left"),r.right>n.right&&(c="right"),r.top<n.top&&r.bottom<u&&(c="up"),r.bottom>n.bottom&&r.top>u&&(c="down"),c===void 0&&(c="right");let d,m,g,p,A,f,D,x,b=10;switch(c){case"left":d=r.right,m=Math.max(r.right,o)+5,g=m-d,p=Math.min(n.top,r.top)-b,A=Math.max(n.bottom,r.bottom)+b,f=A-p,D=u-p,x=`polygon(0% 0%, 100% ${D}px, 0% 100%)`;break;case"right":d=Math.min(r.left,o)-5,m=r.left,g=m-d,p=Math.min(n.top,r.top)-b,A=Math.max(n.bottom,r.bottom)+b,f=A-p,D=u-p,x=`polygon(0% ${D}px, 100% 0%, 100% 100%)`;break;case"up":d=Math.min(o,r.left)-b,m=Math.max(o,r.right)+b,g=m-d,p=r.bottom,A=Math.max(r.bottom,u)+5,f=A-p,D=o-d,x=`polygon(0% 0%, 100% 0%, ${D}px 100%)`;break;case"down":d=Math.min(o,r.left)-b,m=Math.max(o,r.right)+b,g=m-d,p=Math.min(r.top,u)-5,A=r.top,f=A-p,D=o-d,x=`polygon(${D}px 0%, 100% 100%, 0% 100%)`;break}a.style.left=`${d}px`,a.style.top=`${p}px`,a.style.width=`${g}px`,a.style.height=`${f}px`,a.style.clipPath=x};return{safeArea:a,redraw:(o,u)=>{a.isConnected||i.appendChild(a),l(o,u)},remove:()=>{a.remove()}}}function xn(i,t,e,s){return!An(i,e,s)&&!Sn(t,e,s)}function An(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function Sn(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function h(i,t,e){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=Ga(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.setAttribute(t,e)})}function st(i,t){w(i,t),En(i,t)}function w(i,t){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=Ga(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.removeAttribute(t)})}function En(i,t){i?._durableAttributeObserver?.hasAttribute(t)&&i._durableAttributeObserver.releaseAttribute(t)}function Ga(i,t){let e=a=>{a.forEach(r=>{r.oldValue===null?i._durableAttributeObserver.pause(()=>w(i,r.attributeName)):i._durableAttributeObserver.pause(()=>h(i,r.attributeName,r.oldValue))})},s=new MutationObserver(a=>e(a));return s.observe(i,{attributeFilter:t,attributeOldValue:!0}),{attributes:t,hasAttribute(a){return this.attributes.includes(a)},addAttribute(a){this.attributes.includes(a)||this.attributes.push(a),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},releaseAttribute(a){this.hasAttribute(a)&&s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},pause(a){e(s.takeRecords()),s.disconnect(),a(),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})}}}function _n(){return{safeArea:{contains:()=>!1},redraw:()=>{},remove:()=>{}}}function kn(i,t){let e;return(...s)=>{clearTimeout(e),e=setTimeout(()=>{i(...s)},t)}}var he=0,ce=!1;M(({css:i})=>i`[data-flux-allow-scroll] { pointer-events: auto; }`);function J(i=null,t=!1,e=[]){if(t)return{lock:()=>{},unlock:()=>{}};let s=(r=!1)=>{Ya(document.documentElement);let n={overflow:"hidden",...r?{pointerEvents:"none"}:{}};window.CSS&&CSS.supports&&CSS.supports("scrollbar-gutter: stable")?document.documentElement.scrollHeight>document.documentElement.clientHeight&&window.getComputedStyle(document.documentElement).overflowY!=="hidden"&&(n.scrollbarGutter="stable"):n.paddingRight=`calc(${window.innerWidth-document.documentElement.clientWidth}px + ${window.getComputedStyle(document.documentElement).paddingRight})`,Cn(document.documentElement,n),r&&(h(i,"data-flux-allow-scroll",""),e.forEach(l=>{h(l,"data-flux-allow-scroll","")}),ce=!0)},a=(r=!1)=>{Ya(document.documentElement),r&&(st(i,"data-flux-allow-scroll"),e.forEach(n=>{w(n,"data-flux-allow-scroll")}),ce=!1)};return{lock(){he++,!(he>1&&i!==null&&ce)&&s(i!==null&&!ce)},unlock(){he=Math.max(0,he-1),!(he>0&&i!==null&&!ce)&&(a(i!==null&&ce),he>0&&s(!1))}}}function Cn(i,t){let e=JSON.parse(i.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([s,a])=>{e[s]===void 0&&(e[s]=i.style[s],i.style[s]=a)}),i.setAttribute("data-flux-scroll-unlock",JSON.stringify(e))}function Ya(i){let t=JSON.parse(i.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([e,s])=>{i.style[e]=s}),i.removeAttribute("data-flux-scroll-unlock")}function es(i,t,e){let s=i.style[t];return i.style[t]=e,()=>{i.style[t]=s}}function fe(i,t,e){let s=(n,l)=>o=>{o.key===n&&!t()&&(l(),o.preventDefault(),o.stopPropagation())};h(i,"role","button");let a=()=>{i.hasAttribute("disabled")?(h(i,"aria-disabled","true"),h(i,"tabindex","-1")):(w(i,"aria-disabled"),h(i,"tabindex","0"))};new MutationObserver(()=>a()).observe(i,{attributes:!0,attributeFilter:["disabled"]}),a(),v(i,"click",()=>e()),v(i,"keydown",s("Enter",()=>e())),v(i,"keydown",s(" ",()=>{})),v(i,"keyup",s(" ",()=>e()))}function ja(i,t,e=null){let s=()=>{let n=i.getAttribute(t),l={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};for(let[o,u]of Object.entries(l).reverse()){let c=i.getAttribute(`${o}:${t}`);if(c&&window.innerWidth>=u)return c}return n||e},a=s(),r=[];return new ResizeObserver(()=>{let n=s(),l=JSON.stringify(a);JSON.stringify(n)!==l&&(a=n,r.forEach(o=>o(n)))}).observe(window.document.documentElement),[a,n=>r.push(n)]}function hi(){return navigator?.language||document.documentElement.lang||"en-US"}function ci(i,t={slots:{},attrs:{}}){let{slots:e={},attrs:s={}}=t,a=i.content.cloneNode(!0).firstElementChild;return Object.entries(e).forEach(([r,n])=>{(r==="default"?a.querySelectorAll("slot:not([name])"):a.querySelectorAll(`slot[name="${r}"]`)).forEach(o=>o.replaceWith(typeof n=="string"?document.createTextNode(n):n))}),a.querySelectorAll("slot").forEach(r=>r.remove()),Object.entries(s).forEach(([r,n])=>{a.setAttribute(r,n)}),a.setAttribute("data-appended",""),a}function dt(){return document.documentElement.dir==="rtl"}function Ka(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!navigator.userAgent.includes("CriOS")&&!navigator.userAgent.includes("FxiOS")}function Xa(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}var Vt=class{constructor(){this.subscribers=[]}subscribe(t,e){this.subscribers.push({reason:t,callback:e})}notify(t,e){this.subscribers.forEach(({reason:s,callback:a})=>{t===s&&a(e)})}};var _=class extends HTMLElement{wasDisconnected=!1;constructor(){super(),this.boot?.()}connectedCallback(){if(this.wasDisconnected){this.wasDisconnected=!1;return}queueMicrotask(()=>{this.mount?.()})}disconnectedCallback(){this.wasDisconnected=!0,queueMicrotask(()=>{this.wasDisconnected&&this.unmount?.(),this.wasDisconnected=!1})}mixin(t,e={}){return new t(this,e)}appendMixin(t,e={}){return new t(this,e)}use(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=s)}),e}uses(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=!0)}),!!e}on(t,e){return v(this,t,e)}root(t,e={}){if(t===void 0)return this.__root;let s=document.createElement(t);for(let r in e)setAttribute(s,r,e[r]);let a=this.attachShadow({mode:"open"});return s.appendChild(document.createElement("slot")),a.appendChild(s),this.__root=s,this.__root}},W=class extends _{};var q=class{constructor(t,e={}){this.el=t,this.grouped=e.grouped===void 0,this.el.mixins=this.el.mixins?this.el.mixins:new Map,this.el.mixins.set(this.constructor.name,this),this.el[this.constructor.name]=!0,this.el.use||(this.el.use=_.prototype.use.bind(this.el)),this.opts=e,this.boot?.({options:s=>{let a=s;Object.entries(this.opts).forEach(([r,n])=>{n!==void 0&&(a[r]=n)}),this.opts=a}}),queueMicrotask(()=>{this.mount?.()})}options(){return this.opts}hasGroup(){return!!this.group()}group(){if(this.grouped!==!1)return li(this.el,t=>t[this.groupedByType.name])?.use(this.groupedByType)}on(t,e){return v(this.el,t,e)}},St=class extends q{constructor(t,e={}){super(t,e)}walker(){return H(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||!t.mixins.get(this.groupOfType.name).grouped)return e()})}};var N=class extends q{boot({options:t}){t({bubbles:!1}),this.initialState=this.el.value,this.getterFunc=()=>{},this.setterFunc=e=>this.initialState=e,Object.defineProperty(this.el,"value",{get:()=>this.getterFunc(),set:e=>{this.setterFunc(e)}})}initial(t){t(this.initialState)}getter(t){this.getterFunc=t}setter(t){this.setterFunc=t}dispatch(){this.el.dispatchEvent(new Event("input",{bubbles:this.options().bubbles,cancelable:!0})),this.el.dispatchEvent(new Event("change",{bubbles:this.options().bubbles,cancelable:!0}))}};var Me=null;document.addEventListener("mousedown",i=>Me=i);var pe=class extends q{boot({options:t}){t({clickOutside:!0,triggers:[]}),this.onChanges=[],this.state=!1,this.stopDialogFromFocusingTheFirstElement();let e=this.options().triggers;new MutationObserver(a=>{a.forEach(r=>{r.attributeName==="open"&&(this.el.hasAttribute("open")?this.state=!0:this.state=!1)}),this.onChanges.forEach(r=>r())}).observe(this.el,{attributeFilter:["open"]}),this.options().clickOutside&&this.el.addEventListener("click",a=>{if(a.target!==this.el){Me=null;return}Me&&Ja(this.el,Me)&&Ja(this.el,a)&&(this.cancel(),a.preventDefault(),a.stopPropagation()),Me=null}),this.el.hasAttribute("open")&&(this.state=!0,this.hide(),this.show())}onChange(t){this.onChanges.push(t)}show(){this.el.isConnected&&this.el.showModal()}hide(){this.el.close()}toggle(){this.state?this.hide():this.show()}cancel(){let t=new Event("cancel",{bubbles:!1,cancelable:!0});this.el.dispatchEvent(t),t.defaultPrevented||this.hide()}getState(){return this.state}setState(t){t?this.show():this.hide()}stopDialogFromFocusingTheFirstElement(){let t=document.createElement("div");t.setAttribute("data-flux-focus-placeholder",""),t.setAttribute("data-appended",""),t.setAttribute("tabindex","0"),this.el.prepend(t),this.onChange(()=>{h(t,"style",this.state?"display: none":"display: block"),this.state&&Ka()&&!this.el.hasAttribute("autofocus")&&this.el.querySelectorAll("[autofocus]").length===0&&setTimeout(()=>{this.el.setAttribute("tabindex","-1"),this.el.focus(),this.el.blur()})})}};function Ja(i,t){let e=i.getBoundingClientRect(),s=t.clientX,a=t.clientY;return!(s>=e.left&&s<=e.right&&a>=e.top&&a<=e.bottom)}var Ct=class extends q{boot(){this.onCloses=[]}onClose(t){this.onCloses.push(t)}close(){this.onCloses.forEach(t=>t())}};var is=class extends _{boot(){this.querySelectorAll("[data-appended]").forEach(l=>l.remove()),this._controllable=new N(this,{disabled:this.hasAttribute("disabled")});let t=this.button(),e=this.dialog();if(!e)return;e._dialogable=new pe(e,{clickOutside:!this.hasAttribute("disable-click-outside")}),e._closeable=new Ct(e),e._closeable.onClose(()=>e._dialogable.hide()),this._controllable.initial(l=>l&&e._dialogable.show()),this._controllable.getter(()=>e._dialogable.getState());let s=F();this._controllable.setter(s(l=>{e._dialogable.setState(l)})),e._dialogable.onChange(s(()=>{this._controllable.dispatch()}));let a=()=>{e._dialogable.getState()?(h(this,"data-open",""),t?.setAttribute("data-open",""),h(e,"data-open","")):(w(this,"data-open"),t?.removeAttribute("data-open"),w(e,"data-open"))};e._dialogable.onChange(()=>a()),a();let{lock:r,unlock:n}=J();e._dialogable.onChange(()=>{e._dialogable.getState()?r():n()}),t&&v(t,"click",l=>{e._dialogable.show()})}unmount(){if(this.dialog()?._dialogable?.getState()){let{unlock:t}=J();t()}}button(){let t=this.querySelector("button,ui-button");if(!this.dialog()?.contains(t))return t}dialog(){return this.querySelector("dialog")}showModal(){let t=this.dialog();t&&t.showModal()}};M(({css:i})=>i`dialog, ::backdrop { margin: auto; }`);S("modal",is);var Tt=class extends St{groupOfType=$;boot({options:t}){t({wrap:!1,filter:!1}),this.onChanges=[]}onChange(t){this.onChanges.push(t)}activated(t){this.onChanges.forEach(e=>e())}activateFirst(){this.filterAwareWalker().first()?.use($).activate()}activateBySearch(t){this.filterAwareWalker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()))?.use($).activate()}activateSelectedOrFirst(t){if(!t||(s=>s.matches("ui-option, ui-option-create")?getComputedStyle(s).display==="none":!1)(t)){this.filterAwareWalker().first()?.use($).activate();return}t?.use($).activate()}activateActiveOrFirst(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use($).activate();return}t?.use($).activate()}activateActiveOrLast(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use($).activate();return}t?.use($).activate()}activatePrev(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use($).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().prevOrLast(t):e=this.filterAwareWalker().prev(t),e?.use($).activate()}activateNext(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use($).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().nextOrFirst(t):e=this.filterAwareWalker().next(t),e?.use($).activate()}getActive(){return this.walker().find(t=>t.use($).isActive())}clearActive(){this.getActive()?.use($).deactivate()}filterAwareWalker(){let t=e=>e.matches("ui-option, ui-option-create")?getComputedStyle(e).display==="none":!1;return H(this.el,(e,{skip:s,reject:a})=>{if(e[this.constructor.name]&&e!==this.el)return a();if(!e[this.groupOfType.name])return s();if(e.hasAttribute("disabled")||t(e))return a()})}},$=class i extends q{groupedByType=Tt;mount(){this.el.addEventListener("mouseenter",()=>{this.activate()}),this.el.addEventListener("mouseleave",()=>{this.deactivate()})}activate(t=!1){this.group()&&this.group().walker().each(e=>e.use(i).deactivate(!1)),!(this.el.hasAttribute("disabled")&&!t)&&(h(this.el,"data-active",""),Kt()&&this.el.scrollIntoView({block:"nearest"}),this.group()&&this.group().activated(this.el))}deactivate(t=!0){w(this.el,"data-active"),t&&this.group()&&this.group().activated(this.el)}isActive(){return this.el.hasAttribute("data-active")}};var Xt=class extends St{groupOfType=Et;boot({options:t}){t({}),this.onChanges=[],this.lastSearch=""}onChange(t){this.onChanges.push(t)}filter(t){t===""?this.walker().each(e=>{e.use(Et).unfilter()}):this.walker().each(e=>{this.matches(e,t)?e.use(Et).unfilter():e.use(Et).filter()}),this.lastSearch!==t&&this.onChanges.forEach(e=>e()),this.lastSearch=t}matches(t,e){return this.normalize(t.textContent).includes(this.normalize(e))}normalize(t){return t.normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().trim()}hasResults(){return this.walker().some(t=>!t.use(Et).isFiltered())}},Et=class extends q{groupedByType=Xt;boot({options:t}){t({mirror:null,keep:!1}),this.onChanges=[]}filter(){this.options().keep||(h(this.el,"data-hidden",""),this.options().mirror&&h(this.options().mirror,"data-hidden",""))}unfilter(){this.options().keep||(w(this.el,"data-hidden"),this.options().mirror&&w(this.options().mirror,"data-hidden",""))}isFiltered(){return this.el.hasAttribute("data-hidden")}};var Dt=new Map,G=class extends q{boot({options:t}){t({triggers:[],scope:null});let e=this.options().scope||"global";h(this.el,"popover","manual"),this.triggers=this.options().triggers,this.onChanges=[],this.state=!1,v(this.el,"beforetoggle",s=>{let a=this.state;if(this.state=s.newState==="open",this.state){Tn(this.el,e);let r=new AbortController,n=document.activeElement,l=[...this.triggers,n];setTimeout(()=>{Dn(this.el,l,r),In(this.el,l,r),Mn(this.el,l,r)}),this.el.addEventListener("beforetoggle",o=>{o.newState==="closed"&&(r.abort(),n?.focus())},{signal:r.signal})}a!==this.state&&this.onChanges.forEach(r=>r(this.state,a))}),v(this.el,"toggle",s=>{if(s.newState==="open")Dt.has(e)||Dt.set(e,new Set),Dt.get(e).add(this.el);else if(s.newState==="closed"){if(!Dt.has(e))return;Dt.get(e).delete(this.el),Dt.get(e).size===0&&Dt.delete(e)}})}onChange(t){this.onChanges.push(t)}setState(t){t?this.show():this.hide()}getState(){return this.state}toggle(){this.el.isConnected&&this.el.togglePopover()}show(){this.el.isConnected&&this.el.showPopover()}hide(){this.el.isConnected&&this.el.hidePopover()}};function Tn(i,t){Dt.has(t)&&Dt.get(t).forEach(e=>{i.contains(e)||e.contains(i)||e.hidePopover()})}function Dn(i,t,e){document.addEventListener("click",s=>{i.contains(s.target)||t.includes(s.target)||i.hidePopover()},{signal:e.signal})}function In(i,t,e){document.addEventListener("focusin",s=>{i.contains(s.target)||t.includes(s.target)||(e.abort(),i.hidePopover())},{capture:!0,signal:e.signal})}function Mn(i,t,e){document.addEventListener("keydown",s=>{s.key==="Escape"&&i.hidePopover()},{signal:e.signal})}var I=class extends q{boot({options:t}){t({disableWithParent:!0}),this.onChanges=[],Object.defineProperty(this.el,"disabled",{get:()=>this.el.hasAttribute("disabled"),set:s=>{s?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}}),this.el.hasAttribute("disabled")?this.el.disabled=!0:this.options().disableWithParent&&this.el.parentElement?.closest("[disabled]")&&(this.el.disabled=!0),new MutationObserver(s=>{this.onChanges.forEach(a=>a(this.el.disabled))}).observe(this.el,{attributeFilter:["disabled"]})}onChange(t){this.onChanges.push(t)}onInitAndChange(t){t(this.el.disabled),this.onChanges.push(t)}enabled(t){return(...e)=>{if(!this.el.disabled)return t(...e)}}disabled(t){return(...e)=>{if(this.el.disabled)return t(...e)}}isDisabled(){return this.el.disabled}};var Rt=Math.min,at=Math.max,Le=Math.round,Oe=Math.floor,bt=i=>({x:i,y:i}),Pn={left:"right",right:"left",bottom:"top",top:"bottom"},Ln={start:"end",end:"start"};function ss(i,t,e){return at(i,Rt(t,e))}function be(i,t){return typeof i=="function"?i(t):i}function It(i){return i.split("-")[0]}function me(i){return i.split("-")[1]}function as(i){return i==="x"?"y":"x"}function rs(i){return i==="y"?"height":"width"}function qt(i){return["top","bottom"].includes(It(i))?"y":"x"}function ns(i){return as(qt(i))}function Za(i,t,e){e===void 0&&(e=!1);let s=me(i),a=ns(i),r=rs(a),n=a==="x"?s===(e?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(n=Pe(n)),[n,Pe(n)]}function Qa(i){let t=Pe(i);return[di(i),t,di(t)]}function di(i){return i.replace(/start|end/g,t=>Ln[t])}function On(i,t,e){let s=["left","right"],a=["right","left"],r=["top","bottom"],n=["bottom","top"];switch(i){case"top":case"bottom":return e?t?a:s:t?s:a;case"left":case"right":return t?r:n;default:return[]}}function tr(i,t,e,s){let a=me(i),r=On(It(i),e==="start",s);return a&&(r=r.map(n=>n+"-"+a),t&&(r=r.concat(r.map(di)))),r}function Pe(i){return i.replace(/left|right|bottom|top/g,t=>Pn[t])}function Nn(i){return{top:0,right:0,bottom:0,left:0,...i}}function er(i){return typeof i!="number"?Nn(i):{top:i,right:i,bottom:i,left:i}}function Jt(i){let{x:t,y:e,width:s,height:a}=i;return{width:s,height:a,top:e,left:t,right:t+s,bottom:e+a,x:t,y:e}}function ir(i,t,e){let{reference:s,floating:a}=i,r=qt(t),n=ns(t),l=rs(n),o=It(t),u=r==="y",c=s.x+s.width/2-a.width/2,d=s.y+s.height/2-a.height/2,m=s[l]/2-a[l]/2,g;switch(o){case"top":g={x:c,y:s.y-a.height};break;case"bottom":g={x:c,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:d};break;case"left":g={x:s.x-a.width,y:d};break;default:g={x:s.x,y:s.y}}switch(me(t)){case"start":g[n]-=m*(e&&u?-1:1);break;case"end":g[n]+=m*(e&&u?-1:1);break}return g}var sr=async(i,t,e)=>{let{placement:s="bottom",strategy:a="absolute",middleware:r=[],platform:n}=e,l=r.filter(Boolean),o=await(n.isRTL==null?void 0:n.isRTL(t)),u=await n.getElementRects({reference:i,floating:t,strategy:a}),{x:c,y:d}=ir(u,s,o),m=s,g={},p=0;for(let A=0;A<l.length;A++){let{name:f,fn:D}=l[A],{x,y:b,data:k,reset:E}=await D({x:c,y:d,initialPlacement:s,placement:m,strategy:a,middlewareData:g,rects:u,platform:n,elements:{reference:i,floating:t}});c=x??c,d=b??d,g={...g,[f]:{...g[f],...k}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(m=E.placement),E.rects&&(u=E.rects===!0?await n.getElementRects({reference:i,floating:t,strategy:a}):E.rects),{x:c,y:d}=ir(u,m,o)),A=-1)}return{x:c,y:d,placement:m,strategy:a,middlewareData:g}};async function fi(i,t){var e;t===void 0&&(t={});let{x:s,y:a,platform:r,rects:n,elements:l,strategy:o}=i,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:m=!1,padding:g=0}=be(t,i),p=er(g),f=l[m?d==="floating"?"reference":"floating":d],D=Jt(await r.getClippingRect({element:(e=await(r.isElement==null?void 0:r.isElement(f)))==null||e?f:f.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:u,rootBoundary:c,strategy:o})),x=d==="floating"?{x:s,y:a,width:n.floating.width,height:n.floating.height}:n.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),k=await(r.isElement==null?void 0:r.isElement(b))?await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1}:{x:1,y:1},E=Jt(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:o}):x);return{top:(D.top-E.top+p.top)/k.y,bottom:(E.bottom-D.bottom+p.bottom)/k.y,left:(D.left-E.left+p.left)/k.x,right:(E.right-D.right+p.right)/k.x}}var ar=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(t){var e,s;let{placement:a,middlewareData:r,rects:n,initialPlacement:l,platform:o,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:A=!0,...f}=be(i,t);if((e=r.arrow)!=null&&e.alignmentOffset)return{};let D=It(a),x=qt(l),b=It(l)===l,k=await(o.isRTL==null?void 0:o.isRTL(u.floating)),E=m||(b||!A?[Pe(l)]:Qa(l)),C=p!=="none";!m&&C&&E.push(...tr(l,A,p,k));let T=[l,...E],P=await fi(t,f),V=[],et=((s=r.flip)==null?void 0:s.overflows)||[];if(c&&V.push(P[D]),d){let K=Za(a,n,k);V.push(P[K[0]],P[K[1]])}if(et=[...et,{placement:a,overflows:V}],!V.every(K=>K<=0)){var ht,rt;let K=(((ht=r.flip)==null?void 0:ht.index)||0)+1,Ft=T[K];if(Ft)return{data:{index:K,overflows:et},reset:{placement:Ft}};let nt=(rt=et.filter(X=>X.overflows[0]<=0).sort((X,it)=>X.overflows[1]-it.overflows[1])[0])==null?void 0:rt.placement;if(!nt)switch(g){case"bestFit":{var ct;let X=(ct=et.filter(it=>{if(C){let ot=qt(it.placement);return ot===x||ot==="y"}return!0}).map(it=>[it.placement,it.overflows.filter(ot=>ot>0).reduce((ot,zr)=>ot+zr,0)]).sort((it,ot)=>it[1]-ot[1])[0])==null?void 0:ct[0];X&&(nt=X);break}case"initialPlacement":nt=l;break}if(a!==nt)return{reset:{placement:nt}}}return{}}}};async function Fn(i,t){let{placement:e,platform:s,elements:a}=i,r=await(s.isRTL==null?void 0:s.isRTL(a.floating)),n=It(e),l=me(e),o=qt(e)==="y",u=["left","top"].includes(n)?-1:1,c=r&&o?-1:1,d=be(t,i),{mainAxis:m,crossAxis:g,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof p=="number"&&(g=l==="end"?p*-1:p),o?{x:g*c,y:m*u}:{x:m*u,y:g*c}}var rr=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){var e,s;let{x:a,y:r,placement:n,middlewareData:l}=t,o=await Fn(t,i);return n===((e=l.offset)==null?void 0:e.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+o.x,y:r+o.y,data:{...o,placement:n}}}}},nr=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(t){let{x:e,y:s,placement:a}=t,{mainAxis:r=!0,crossAxis:n=!1,limiter:l={fn:f=>{let{x:D,y:x}=f;return{x:D,y:x}}},...o}=be(i,t),u={x:e,y:s},c=await fi(t,o),d=qt(It(a)),m=as(d),g=u[m],p=u[d];if(r){let f=m==="y"?"top":"left",D=m==="y"?"bottom":"right",x=g+c[f],b=g-c[D];g=ss(x,g,b)}if(n){let f=d==="y"?"top":"left",D=d==="y"?"bottom":"right",x=p+c[f],b=p-c[D];p=ss(x,p,b)}let A=l.fn({...t,[m]:g,[d]:p});return{...A,data:{x:A.x-e,y:A.y-s,enabled:{[m]:r,[d]:n}}}}}};var or=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(t){var e,s;let{placement:a,rects:r,platform:n,elements:l}=t,{apply:o=()=>{},...u}=be(i,t),c=await fi(t,u),d=It(a),m=me(a),g=qt(a)==="y",{width:p,height:A}=r.floating,f,D;d==="top"||d==="bottom"?(f=d,D=m===(await(n.isRTL==null?void 0:n.isRTL(l.floating))?"start":"end")?"left":"right"):(D=d,f=m==="end"?"top":"bottom");let x=A-c.top-c.bottom,b=p-c.left-c.right,k=Rt(A-c[f],x),E=Rt(p-c[D],b),C=!t.middlewareData.shift,T=k,P=E;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(P=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(T=x),C&&!m){let et=at(c.left,0),ht=at(c.right,0),rt=at(c.top,0),ct=at(c.bottom,0);g?P=p-2*(et!==0||ht!==0?et+ht:at(c.left,c.right)):T=A-2*(rt!==0||ct!==0?rt+ct:at(c.top,c.bottom))}await o({...t,availableWidth:P,availableHeight:T});let V=await n.getDimensions(l.floating);return p!==V.width||A!==V.height?{reset:{rects:!0}}:{}}}};function pi(){return typeof window<"u"}function Zt(i){return ur(i)?(i.nodeName||"").toLowerCase():"#document"}function lt(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function mt(i){var t;return(t=(ur(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function ur(i){return pi()?i instanceof Node||i instanceof lt(i).Node:!1}function ft(i){return pi()?i instanceof Element||i instanceof lt(i).Element:!1}function gt(i){return pi()?i instanceof HTMLElement||i instanceof lt(i).HTMLElement:!1}function lr(i){return!pi()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof lt(i).ShadowRoot}function ve(i){let{overflow:t,overflowX:e,overflowY:s,display:a}=pt(i);return/auto|scroll|overlay|hidden|clip/.test(t+s+e)&&!["inline","contents"].includes(a)}function hr(i){return["table","td","th"].includes(Zt(i))}function Ne(i){return[":popover-open",":modal"].some(t=>{try{return i.matches(t)}catch{return!1}})}function bi(i){let t=mi(),e=ft(i)?pt(i):i;return["transform","translate","scale","rotate","perspective"].some(s=>e[s]?e[s]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(e.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(e.contain||"").includes(s))}function cr(i){let t=Mt(i);for(;gt(t)&&!Qt(t);){if(bi(t))return t;if(Ne(t))return null;t=Mt(t)}return null}function mi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Qt(i){return["html","body","#document"].includes(Zt(i))}function pt(i){return lt(i).getComputedStyle(i)}function Fe(i){return ft(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Mt(i){if(Zt(i)==="html")return i;let t=i.assignedSlot||i.parentNode||lr(i)&&i.host||mt(i);return lr(t)?t.host:t}function dr(i){let t=Mt(i);return Qt(t)?i.ownerDocument?i.ownerDocument.body:i.body:gt(t)&&ve(t)?t:dr(t)}function ge(i,t,e){var s;t===void 0&&(t=[]),e===void 0&&(e=!0);let a=dr(i),r=a===((s=i.ownerDocument)==null?void 0:s.body),n=lt(a);if(r){let l=gi(n);return t.concat(n,n.visualViewport||[],ve(a)?a:[],l&&e?ge(l):[])}return t.concat(a,ge(a,[],e))}function gi(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function br(i){let t=pt(i),e=parseFloat(t.width)||0,s=parseFloat(t.height)||0,a=gt(i),r=a?i.offsetWidth:e,n=a?i.offsetHeight:s,l=Le(e)!==r||Le(s)!==n;return l&&(e=r,s=n),{width:e,height:s,$:l}}function ls(i){return ft(i)?i:i.contextElement}function ye(i){let t=ls(i);if(!gt(t))return bt(1);let e=t.getBoundingClientRect(),{width:s,height:a,$:r}=br(t),n=(r?Le(e.width):e.width)/s,l=(r?Le(e.height):e.height)/a;return(!n||!Number.isFinite(n))&&(n=1),(!l||!Number.isFinite(l))&&(l=1),{x:n,y:l}}var Vn=bt(0);function mr(i){let t=lt(i);return!mi()||!t.visualViewport?Vn:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Rn(i,t,e){return t===void 0&&(t=!1),!e||t&&e!==lt(i)?!1:t}function te(i,t,e,s){t===void 0&&(t=!1),e===void 0&&(e=!1);let a=i.getBoundingClientRect(),r=ls(i),n=bt(1);t&&(s?ft(s)&&(n=ye(s)):n=ye(i));let l=Rn(r,e,s)?mr(r):bt(0),o=(a.left+l.x)/n.x,u=(a.top+l.y)/n.y,c=a.width/n.x,d=a.height/n.y;if(r){let m=lt(r),g=s&&ft(s)?lt(s):s,p=m,A=gi(p);for(;A&&s&&g!==p;){let f=ye(A),D=A.getBoundingClientRect(),x=pt(A),b=D.left+(A.clientLeft+parseFloat(x.paddingLeft))*f.x,k=D.top+(A.clientTop+parseFloat(x.paddingTop))*f.y;o*=f.x,u*=f.y,c*=f.x,d*=f.y,o+=b,u+=k,p=lt(A),A=gi(p)}}return Jt({width:c,height:d,x:o,y:u})}function us(i,t){let e=Fe(i).scrollLeft;return t?t.left+e:te(mt(i)).left+e}function gr(i,t,e){e===void 0&&(e=!1);let s=i.getBoundingClientRect(),a=s.left+t.scrollLeft-(e?0:us(i,s)),r=s.top+t.scrollTop;return{x:a,y:r}}function qn(i){let{elements:t,rect:e,offsetParent:s,strategy:a}=i,r=a==="fixed",n=mt(s),l=t?Ne(t.floating):!1;if(s===n||l&&r)return e;let o={scrollLeft:0,scrollTop:0},u=bt(1),c=bt(0),d=gt(s);if((d||!d&&!r)&&((Zt(s)!=="body"||ve(n))&&(o=Fe(s)),gt(s))){let g=te(s);u=ye(s),c.x=g.x+s.clientLeft,c.y=g.y+s.clientTop}let m=n&&!d&&!r?gr(n,o,!0):bt(0);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-o.scrollLeft*u.x+c.x+m.x,y:e.y*u.y-o.scrollTop*u.y+c.y+m.y}}function Bn(i){return Array.from(i.getClientRects())}function Wn(i){let t=mt(i),e=Fe(i),s=i.ownerDocument.body,a=at(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=at(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),n=-e.scrollLeft+us(i),l=-e.scrollTop;return pt(s).direction==="rtl"&&(n+=at(t.clientWidth,s.clientWidth)-a),{width:a,height:r,x:n,y:l}}function Un(i,t){let e=lt(i),s=mt(i),a=e.visualViewport,r=s.clientWidth,n=s.clientHeight,l=0,o=0;if(a){r=a.width,n=a.height;let u=mi();(!u||u&&t==="fixed")&&(l=a.offsetLeft,o=a.offsetTop)}return{width:r,height:n,x:l,y:o}}function Hn(i,t){let e=te(i,!0,t==="fixed"),s=e.top+i.clientTop,a=e.left+i.clientLeft,r=gt(i)?ye(i):bt(1),n=i.clientWidth*r.x,l=i.clientHeight*r.y,o=a*r.x,u=s*r.y;return{width:n,height:l,x:o,y:u}}function fr(i,t,e){let s;if(t==="viewport")s=Un(i,e);else if(t==="document")s=Wn(mt(i));else if(ft(t))s=Hn(t,e);else{let a=mr(i);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Jt(s)}function vr(i,t){let e=Mt(i);return e===t||!ft(e)||Qt(e)?!1:pt(e).position==="fixed"||vr(e,t)}function $n(i,t){let e=t.get(i);if(e)return e;let s=ge(i,[],!1).filter(l=>ft(l)&&Zt(l)!=="body"),a=null,r=pt(i).position==="fixed",n=r?Mt(i):i;for(;ft(n)&&!Qt(n);){let l=pt(n),o=bi(n);!o&&l.position==="fixed"&&(a=null),(r?!o&&!a:!o&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||ve(n)&&!o&&vr(i,n))?s=s.filter(c=>c!==n):a=l,n=Mt(n)}return t.set(i,s),s}function Yn(i){let{element:t,boundary:e,rootBoundary:s,strategy:a}=i,n=[...e==="clippingAncestors"?Ne(t)?[]:$n(t,this._c):[].concat(e),s],l=n[0],o=n.reduce((u,c)=>{let d=fr(t,c,a);return u.top=at(d.top,u.top),u.right=Rt(d.right,u.right),u.bottom=Rt(d.bottom,u.bottom),u.left=at(d.left,u.left),u},fr(t,l,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function zn(i){let{width:t,height:e}=br(i);return{width:t,height:e}}function Gn(i,t,e){let s=gt(t),a=mt(t),r=e==="fixed",n=te(i,!0,r,t),l={scrollLeft:0,scrollTop:0},o=bt(0);if(s||!s&&!r)if((Zt(t)!=="body"||ve(a))&&(l=Fe(t)),s){let m=te(t,!0,r,t);o.x=m.x+t.clientLeft,o.y=m.y+t.clientTop}else a&&(o.x=us(a));let u=a&&!s&&!r?gr(a,l):bt(0),c=n.left+l.scrollLeft-o.x-u.x,d=n.top+l.scrollTop-o.y-u.y;return{x:c,y:d,width:n.width,height:n.height}}function os(i){return pt(i).position==="static"}function pr(i,t){if(!gt(i)||pt(i).position==="fixed")return null;if(t)return t(i);let e=i.offsetParent;return mt(i)===e&&(e=e.ownerDocument.body),e}function yr(i,t){let e=lt(i);if(Ne(i))return e;if(!gt(i)){let a=Mt(i);for(;a&&!Qt(a);){if(ft(a)&&!os(a))return a;a=Mt(a)}return e}let s=pr(i,t);for(;s&&hr(s)&&os(s);)s=pr(s,t);return s&&Qt(s)&&os(s)&&!bi(s)?e:s||cr(i)||e}var jn=async function(i){let t=this.getOffsetParent||yr,e=this.getDimensions,s=await e(i.floating);return{reference:Gn(i.reference,await t(i.floating),i.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Kn(i){return pt(i).direction==="rtl"}var Xn={convertOffsetParentRelativeRectToViewportRelativeRect:qn,getDocumentElement:mt,getClippingRect:Yn,getOffsetParent:yr,getElementRects:jn,getClientRects:Bn,getDimensions:zn,getScale:ye,isElement:ft,isRTL:Kn};function wr(i,t){return i.x===t.x&&i.y===t.y&&i.width===t.width&&i.height===t.height}function Jn(i,t){let e=null,s,a=mt(i);function r(){var l;clearTimeout(s),(l=e)==null||l.disconnect(),e=null}function n(l,o){l===void 0&&(l=!1),o===void 0&&(o=1),r();let u=i.getBoundingClientRect(),{left:c,top:d,width:m,height:g}=u;if(l||t(),!m||!g)return;let p=Oe(d),A=Oe(a.clientWidth-(c+m)),f=Oe(a.clientHeight-(d+g)),D=Oe(c),b={rootMargin:-p+"px "+-A+"px "+-f+"px "+-D+"px",threshold:at(0,Rt(1,o))||1},k=!0;function E(C){let T=C[0].intersectionRatio;if(T!==o){if(!k)return n();T?n(!1,T):s=setTimeout(()=>{n(!1,1e-7)},1e3)}T===1&&!wr(u,i.getBoundingClientRect())&&n(),k=!1}try{e=new IntersectionObserver(E,{...b,root:a.ownerDocument})}catch{e=new IntersectionObserver(E,b)}e.observe(i)}return n(!0),r}function xr(i,t,e,s){s===void 0&&(s={});let{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:n=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:o=!1}=s,u=ls(i),c=a||r?[...u?ge(u):[],...ge(t)]:[];c.forEach(D=>{a&&D.addEventListener("scroll",e,{passive:!0}),r&&D.addEventListener("resize",e)});let d=u&&l?Jn(u,e):null,m=-1,g=null;n&&(g=new ResizeObserver(D=>{let[x]=D;x&&x.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(t)})),e()}),u&&!o&&g.observe(u),g.observe(t));let p,A=o?te(i):null;o&&f();function f(){let D=te(i);A&&!wr(A,D)&&e(),A=D,p=requestAnimationFrame(f)}return e(),()=>{var D;c.forEach(x=>{a&&x.removeEventListener("scroll",e),r&&x.removeEventListener("resize",e)}),d?.(),(D=g)==null||D.disconnect(),g=null,o&&cancelAnimationFrame(p)}}var Ar=rr;var Sr=nr,Er=ar,_r=or;var kr=(i,t,e)=>{let s=new Map,a={platform:Xn,...e},r={...a.platform,_c:s};return sr(i,t,{...a,platform:r})};var Y=class extends q{boot({options:t}){if(t({reference:null,auto:!0,position:"bottom start",gap:"5",offset:"0",matchWidth:!1,crossAxis:!1,scrollY:!0}),this.options().reference===null||this.options().position===null)return;let[e,s]=to(this.el,{scrollY:this.options().scrollY}),a=Zn(this.el,this.options().reference,e,{position:this.options().position,gap:this.options().gap,offset:this.options().offset,matchWidth:this.options().matchWidth,crossAxis:this.options().crossAxis,scrollY:this.options().scrollY}),r=()=>{};this.reposition=(...n)=>{this.options().auto?r=xr(this.options().reference,this.el,a):a(null,...n)},this.cleanup=()=>{r(),s()}}};function Zn(i,t,e,{position:s,offset:a,gap:r,matchWidth:n,crossAxis:l,scrollY:o}){let u=window.getComputedStyle(i).maxHeight;return u=u==="none"?null:parseFloat(u),(c,d,m)=>{kr(t,i,{placement:Qn(s),middleware:[Ar({mainAxis:Number(r),alignmentAxis:Number(a)}),Er(),Sr({padding:5,crossAxis:l}),_r({padding:5,apply({rects:g,elements:p,availableHeight:A}){n&&Object.assign(p.floating.style,{width:`${g.reference.width}px`});let f=u;f===null&&(f=o?p.floating.scrollHeight:p.floating.offsetHeight),p.floating.style.maxHeight=A>f?"":`${A}px`}})]}).then(({x:g,y:p})=>{e(d||g,m||p)})}}function Qn(i){let t=i.split(" ");switch(t[0]){case"start":t[0]=dt()?"right":"left";break;case"end":t[0]=dt()?"left":"right";break}return t.join("-")}function to(i,{scrollY:t=!0}){let e=(n,l)=>{Object.assign(i.style,{position:"absolute",overflowY:t?"auto":"hidden",left:`${n}px`,top:`${l}px`,right:"auto",bottom:"auto"})},s,a,r=new MutationObserver(()=>e(s,a));return[(n,l)=>{s=n,a=l,r.disconnect(),e(s,a),r.observe(i,{attributeFilter:["style"]})},()=>{r.disconnect()}]}var vi=class extends _{boot(){if(this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector("template")){let t=document.createElement("template");t.setAttribute("name","placeholder"),t.innerHTML="<span>"+this.innerHTML+"</span>",this.innerHTML="",this.appendChild(t)}if(!this.querySelector('template[name="options"]')){let t=document.createElement("template");t.setAttribute("name","options"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}if(!this.querySelector('template[name="option"]')){let t=document.createElement("template");t.setAttribute("name","option"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),overflow:this.querySelector('template[name="overflow"]'),options:this.querySelector('template[name="options"]'),option:this.querySelector('template[name="option"]')},this.templates.options.elsByValue=new Map,this.max=this.templates.overflow?.getAttribute("max")?this.templates.overflow.getAttribute("max"):1/0,this.selecteds=new Map,this.picker=this.closest("ui-select,ui-pillbox"),this.multiple=this.picker.hasAttribute("multiple")}mount(){queueMicrotask(()=>{this.picker._selectable.onInitAndChange(()=>{this.render(!0)});let t=this.picker.list();t&&new MutationObserver(e=>{queueMicrotask(()=>this.render())}).observe(t,{childList:!0})})}render(t){if(this.multiple){let e=this.picker.value,s=Array.from(this.selecteds.keys()).filter(n=>!e.includes(n)),a=e.filter(n=>!this.selecteds.has(n));s.forEach(n=>this.selecteds.delete(n));let r=new Map;for(let n of a){let l=this.picker._selectable.findByValue(n);if(!l){if(t)return setTimeout(()=>this.render());throw`Could not find option for value "${n}"`}r.set(n,l)}r.forEach((n,l)=>this.selecteds.set(l,n)),this.templates.placeholder?.clearPlaceholder?.(),this.templates.overflow?.clearOverflow?.(),this.templates.options?.clearOptions?.(),this.selecteds.size>0?this.renderOptions({hasOverflowed:n=>{if(this.max==="auto"){let l=!1;if(this.renderOverflow(this.selecteds.size,this.selecteds.size-n),this.clientWidth<this.scrollWidth&&(l=!0),this.templates.overflow?.clearOverflow?.(),l)return!0}return n>parseInt(this.max)},renderOverflow:n=>{this.templates?.overflow?.getAttribute("mode")!=="append"&&this.templates.options?.clearOptions?.(),this.renderOverflow(this.selecteds.size,n)}}):this.renderPlaceholder()}else{let e=this.picker.value;if(Array.from(this.selecteds.keys()).includes(e))return;this.selecteds.clear();let s=this.picker._selectable.findByValue(e);if(s)this.selecteds.set(e,s);else if(!["",null,void 0].includes(e)){if(t)return setTimeout(()=>{this.render()});throw`Could not find option for value "${e}"`}this.templates.placeholder?.clearPlaceholder?.(),this.templates.option?.clearOption?.(),this.selecteds.size>0?this.renderOption():this.renderPlaceholder()}}renderOptions({hasOverflowed:t,renderOverflow:e}){let s=document.createElement("div");s.style.display="contents";let a=Ve(this.templates.options,{default:s});this.templates.options.after(a),this.templates.options.clearOptions=()=>{a.remove(),this.templates.options.clearOptions=()=>{}};let r=0,n=!1;for(let[o,u]of this.selecteds){let c=new DocumentFragment;c.append(...u.el.cloneNode(!0).childNodes);let d=Ve(this.templates.option,{text:u.getSelectedLabel()??u.getLabel(),default:u.getSelectedLabel()??c,value:o});if(d.setAttribute("data-value",o),d.setAttribute("data-appended",""),d.deselect=()=>u.deselect(),s.appendChild(d),r++,t(r)){n=!0,s.removeChild(d),r--;break}}let l=new DocumentFragment;l.append(...s.childNodes),s.replaceWith(l),n&&e(this.selecteds.size-r)}renderOption(){for(let[t,e]of this.selecteds){let s=new DocumentFragment;s.append(...e.el.cloneNode(!0).childNodes);let a=Ve(this.templates.option,{text:e.getSelectedLabel()??e.getLabel(),default:e.getSelectedLabel()??s,value:t});a.setAttribute("data-value",t),a.setAttribute("data-appended",t),a.deselect=()=>e.deselect(),this.templates.option.after(a),this.templates.option.clearOption=()=>{a.remove(),this.templates.option.clearOption=()=>{}}}}renderPlaceholder(){if(!this.templates.placeholder)return;let t=Ve(this.templates.placeholder);t.setAttribute("data-appended",""),this.templates.placeholder.after(t),this.templates.placeholder.clearPlaceholder=()=>{t.remove(),this.templates.placeholder.clearPlaceholder=()=>{}}}renderOverflow(t,e){if(!this.templates.overflow)return;let s=Ve(this.templates.overflow,{remainder:e,count:this.selecteds.size});s.setAttribute("data-appended",""),this.templates.overflow.after(s),this.templates.overflow.clearOverflow=()=>{s.remove(),this.templates.placeholder.clearOverflow=()=>{}}}},yi=class extends _{boot(){this.addEventListener("click",t=>{t.stopPropagation();let e=this.closest("[data-value]")?.getAttribute("data-value");if(e===void 0)return;let s=this.closest("ui-pillbox")._selectable,a=s.selectableByValue(e);a?a.deselect():s.deselectByValue(e)})}};function Ve(i,t={}){let e=i.content.cloneNode(!0);return Object.entries(t).forEach(([s,a])=>{(s==="default"?e.querySelectorAll("slot:not([name])"):e.querySelectorAll(`slot[name="${s}"]`)).forEach(n=>n.replaceWith(typeof a=="string"?document.createTextNode(a):a))}),e.firstElementChild}var Q=class extends St{groupOfType=O;boot({options:t}){t({multiple:!1}),this.state=this.options().multiple?new Set:null,this.onChanges=[]}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}changed(t,e=!1){if(t.ungrouped)return;let s=t.value,a=t.isSelected(),r=this.options().multiple;a?r?this.state.add(s):this.state=s:r?this.state.delete(s):this.state=null,e||this.onChanges.forEach(n=>n(t))}deselectByValue(t,e=!1){this.options().multiple?this.state.delete(t):this.state=null,e||this.onChanges.forEach(s=>s())}getState(){return this.options().multiple?Array.from(this.state):this.state}hasValue(t){return this.options().multiple?this.state.has(t):this.state===t}setState(t){(t===null||t==="")&&(t=this.options().multiple?[]:""),this.options().multiple?(Array.isArray(t)||(t=[t]),t=t.map(s=>s+"")):t=t+"",this.state=this.options().multiple?new Set(t):t;let e=this.options().multiple?t:[t];this.walker().each(s=>{let a=s.use(O);if(a.ungrouped)return;let r=e.includes(a.value);r&&!a.isSelected()?a.surgicallySelect():!r&&a.isSelected()&&a.surgicallyDeselect()}),this.onChanges.forEach(s=>s())}selected(){return this.walker().find(t=>t.use(O).isSelected()).use(O)}selecteds(){return this.walker().filter(t=>t.use(O).isSelected()).map(t=>t.use(O))}selectFirst(){this.walker().first()?.use(O).select()}selectAll(){this.walker().filter(t=>!t.use(O).isSelected()).map(t=>t.use(O).select())}deselectAll(){this.walker().filter(t=>t.use(O).isSelected()).map(t=>t.use(O).deselect())}allAreSelected(){let t=this.walker().filter(e=>!0);return t.length>0&&this.walker().filter(e=>e.use(O).isSelected()).length===t.length}noneAreSelected(){return this.state===null||this.state?.size===0}isEmpty(){return this.noneAreSelected()}isNotEmpty(){return!this.isEmpty()}selectableByValue(t){return this.walker().find(e=>e.use(O).value===t)?.use(O)}deselectOthers(t){this.walker().each(e=>{e!==t&&e.use(O).surgicallyDeselect()})}selectedTextValue(){return this.options().multiple?Array.from(this.state).map(t=>this.convertValueStringToElementText(t)).join(", "):this.convertValueStringToElementText(this.state)}convertValueStringToElementText(t){let e=this.findByValue(t);return e?e.selectedLabel||e.label||e.value:t}findByValue(t){return this.selecteds().find(e=>e.value===t)}walker(){return H(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||t.mixins.get(this.groupOfType.name).ungrouped)return e()})}},O=class extends q{boot({options:t}){this.groupedByType=Q,t({ungrouped:!1,togglable:!1,value:void 0,label:void 0,selectedLabel:void 0,selectedInitially:!1,dataAttr:"data-selected",ariaAttr:"aria-selected"}),this.ungrouped=this.options().ungrouped,this.value=this.options().value===void 0?this.el.value:this.options().value,this.value=this.value+"",this.label=this.options().label,this.selectedLabel=this.options().selectedLabel;let e=this.options().selectedInitially;this.onSelects=[],this.onUnselects=[],this.onChanges=[];let s=()=>{this.group()&&this.group().hasValue(this.value)&&(e=!0),this.multiple=this.hasGroup()?this.group().options().multiple:!1,this.toggleable=this.options().toggleable||this.multiple,e?this.select(!0):(this.state=e,this.surgicallyDeselect(!0))};s(),!this.hasGroup()&&!this.el.isConnected&&queueMicrotask(()=>{this.hasGroup()&&s()})}mount(){this.el.hasAttribute(this.options().ariaAttr)||h(this.el,this.options().ariaAttr,"false")}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}onSelect(t){this.onSelects.push(t)}onUnselect(t){this.onUnselects.push(t)}setState(t){t?this.select():this.deselect()}getState(){return this.state}press(){this.toggleable?this.toggle():this.select()}trigger(){this.toggleable?this.toggle():this.select()}toggle(){this.isSelected()?this.deselect():this.select()}isSelected(){return this.state}select(t=!1){let e=!this.isSelected();this.toggleable||this.group()?.deselectOthers(this.el),this.state=!0,h(this.el,this.options().ariaAttr,"true"),h(this.el,this.options().dataAttr,""),e&&(t||(this.onSelects.forEach(s=>s()),this.onChanges.forEach(s=>s())),this.group()?.changed(this,t))}surgicallySelect(){let t=!this.isSelected();this.state=!0,h(this.el,this.options().ariaAttr,"true"),h(this.el,this.options().dataAttr,""),t&&(this.onSelects.forEach(e=>e()),this.onChanges.forEach(e=>e()))}deselect(t=!0){let e=this.isSelected();this.state=!1,h(this.el,this.options().ariaAttr,"false"),w(this.el,this.options().dataAttr),e&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()),t&&this.group()?.changed(this))}surgicallyDeselect(t=!1){let e=this.isSelected();this.state=!1,h(this.el,this.options().ariaAttr,"false"),w(this.el,this.options().dataAttr),e&&!t&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()))}getValue(){return this.value}getLabel(){return this.label}getSelectedLabel(){return this.selectedLabel}};var U=class extends q{boot({options:t}){t({name:void 0,value:void 0,includeWhenEmpty:!0,shouldUpdateValue:!0}),this.name=this.options().name,this.value=this.options().value===void 0?this.el.value:this.options().value,this.state=!1,this.observer=new MutationObserver(()=>{this.renderHiddenInputs()}),this.observer.observe(this.el,{childList:!0})}mount(){this.renderHiddenInputs()}update(t){this.options().shouldUpdateValue?this.value=t:this.state=!!t,this.renderHiddenInputs()}valueIsEmpty(){return this.value===void 0||this.value===null||this.value===""}renderHiddenInputs(){if(this.observer.disconnect(),!this.name)return;let t=this.el.children,e=[];for(let a=0;a<t.length;a++){let r=t[a];r.hasAttribute("data-flux-hidden")&&e.push(r)}e.forEach(a=>a.remove());let s;this.options().shouldUpdateValue?s=!this.valueIsEmpty()||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[]:s=this.state||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[],s.forEach(a=>{this.el.append(a)}),this.observer.observe(this.el,{childList:!0})}generateInputs(t,e,s=[]){if(this.isObjectOrArray(e))for(let a in e)s=s.concat(this.generateInputs(`${t}[${a}]`,e[a]));else{let a=document.createElement("input");return a.setAttribute("type","hidden"),a.setAttribute("name",t),a.setAttribute("value",e===null?"":""+e),a.setAttribute("data-flux-hidden",""),a.setAttribute("data-appended",""),[a]}return s}isObjectOrArray(t){return typeof t=="object"&&t!==null}submitEnclosingForm(){let t=this.getAssociatedForm();t&&t.requestSubmit()}getAssociatedForm(){let t=this.el.getAttribute("form");return t?document.getElementById(t)||null:this.el.closest("form")}};var re=class extends W{boot(){let t=this.list();this._controllable=new N(this,{bubbles:!0}),this._selectable=new Q(t,{multiple:this.hasAttribute("multiple")}),this._submittable=new U(this,{name:this.getAttribute("name"),value:this._selectable.getState()}),this._controllable.initial(s=>s&&this._selectable.setState(s)),this._controllable.getter(()=>this._selectable.getState());let e=F();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch(),this.dispatchEvent(new CustomEvent("select",{bubbles:!1}))})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())})}mount(){this._disableable=new I(this),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())});let t=this.input(),e=this.button(),s=this.list(),a=this.hasAttribute("multiple"),r=this.hasAttribute("autocomplete"),n=this.hasAttribute("autocomplete")&&this.getAttribute("autocomplete").trim().split(" ").includes("strict"),l=this.querySelector("ui-options")||this,o=hs(l,"options",a);this._activatable=new Tt(l,{filter:"data-hidden"}),!t&&!e&&this._disableable.onInitAndChange(p=>{p?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new Xt(s),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&requestAnimationFrame(()=>{this._filterable.filter("")})}));let u=this.querySelector("[popover]:not(ui-tooltip > [popover])"),c=u?.querySelector('input:not([type="hidden"])'),d=this.querySelector('input:not([type="hidden"])');d=u?.contains(d)?null:d;let m=this.querySelector("button,ui-button");if(m=u?.contains(m)?null:m,!(u||d))vt(this,this._activatable),yt(this,this,this._activatable),Cr(this,this._activatable,this._selectable);else if(!u&&d){let p=d;this._disableable.onInitAndChange(A=>{A?p&&h(p,"disabled",""):p&&w(p,"disabled")}),Se(this,p,this._selectable,this._popoverable),Cr(p,this._activatable,this._selectable),Tr(r,n,this,p,this._selectable,this._popoverable,this._filterable),Ae(p),xe(p),this._filterable&&we(s,p,this._filterable),Ut(p,this._activatable,this._selectable),vt(p,this._activatable),yt(this,p,this._activatable),Bt(this,this._activatable)}else if(u&&d){let p=d;h(p,"role","combobox"),h(p,"aria-controls",o);let A=u;this._popoverable=new G(A),this._anchorable=new Y(A,{reference:p,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),Tr(r,n,this,p,this._selectable,this._popoverable,this._filterable),this._disableable.onInitAndChange(f=>{f?p&&h(p,"disabled",""):p&&w(p,"disabled")}),this.querySelectorAll("button,ui-button").forEach(f=>{A.contains(f)||(h(f,"tabindex","-1"),h(f,"aria-controls",o),h(f,"aria-haspopup","listbox"),Wt(f,this._popoverable),v(f,"click",()=>{this._popoverable.toggle(),p.focus()}))}),Se(this,p,this._selectable,this._popoverable),ee(this,p,A,this._popoverable,this._anchorable),ae(this,this._popoverable,[p]),Wt(p,this._popoverable),Ae(p),xe(p),this._filterable&&we(s,p,this._filterable),Ut(p,this._activatable,this._selectable),ds(p,this._popoverable),Lt(p,this._popoverable,this._activatable,this._selectable),cs(p,this._popoverable),Pt(this,this._popoverable),vt(p,this._activatable),yt(this,p,this._activatable),Bt(this,this._activatable),ie(this._popoverable,this._activatable,this._selectable),se(this,this._selectable,this._popoverable,a)}else if(u&&c){let p=m,A=c,f=u;h(p,"role","combobox"),h(A,"role","combobox"),h(p,"aria-controls",o),this._disableable.onInitAndChange(D=>{D?(p&&h(p,"disabled",""),A&&h(A,"disabled","")):(p&&w(p,"disabled"),A&&w(A,"disabled"))}),this._popoverable=new G(f),this._anchorable=new Y(f,{reference:p,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0,scrollY:!1}),Ae(A),xe(A),this._filterable&&we(s,A,this._filterable),Ut(A,this._activatable,this._selectable),wi(A,this._popoverable),ee(this,p,f,this._popoverable,this._anchorable),ae(this,this._popoverable,[A]),Wt(p,this._popoverable),Se(this,A,this._selectable,this._popoverable),Lt(p,this._popoverable,this._activatable,this._selectable),Re(p,this._popoverable,A),Pt(this,this._popoverable),vt(A,this._activatable),Ht(p,this._activatable,this._popoverable),yt(this,A,this._activatable),Bt(this,this._activatable),ie(this._popoverable,this._activatable,this._selectable),se(this,this._selectable,this._popoverable,a)}else if(u){let p=m,A=u;h(p,"role","combobox"),h(p,"aria-controls",o),this._disableable.onInitAndChange(f=>{f?(p&&h(p,"disabled",""),t&&h(t,"disabled","")):(p&&w(p,"disabled"),t&&w(t,"disabled"))}),this._popoverable=new G(A),this._anchorable=new Y(A,{reference:p,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),ee(this,p,A,this._popoverable,this._anchorable),ae(this,this._popoverable),Wt(p,this._popoverable),Lt(p,this._popoverable,this._activatable,this._selectable),Re(p,this._popoverable),Ut(p,this._activatable,this._selectable),Pt(this,this._popoverable),vt(p,this._activatable),Ht(p,this._activatable,this._popoverable),yt(this,p,this._activatable),Bt(this,this._activatable),ie(this._popoverable,this._activatable,this._selectable),se(this,this._selectable,this._popoverable,a)}new MutationObserver(()=>{requestAnimationFrame(()=>{if(!this._popoverable||this._popoverable.getState()){let p=this._selectable.selecteds().find(A=>!A.el._disableable.isDisabled())?.el;this._activatable.activateSelectedOrFirst(p)}else this._activatable.clearActive()})}).observe(s,{childList:!0})}unmount(){if(this._popoverable?.getState()){let{unlock:t}=J();t()}}trigger(){return this.button()||this.input()}button(){return Array.from(this.querySelectorAll("button,ui-button")).find(t=>t.nextElementSibling?.matches("[popover]"))||null}input(){return this.querySelector('input:not([type="hidden"])')}list(){return this.querySelector("ui-options")||this}clear(){this._selectable.deselectAll(),this.dispatchEvent(new CustomEvent("clear",{bubbles:!1}))}open(){this._popoverable.setState(!0)}close(){this._popoverable.setState(!1)}deselectLast(){!this.hasAttribute("multiple")&&this.value!==null&&(this.value=null,this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1}))),this.hasAttribute("multiple")&&this.value.length!==0&&(this.value=this.value.slice(0,-1),this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1})))}};S("selected-remove",yi);S("selected",vi);S("select",re);M(({css:i})=>i`ui-select { display: block; }`);M(({css:i})=>i`ui-selected-option { display: contents; }`);function vt(i,t){v(i,"keydown",e=>{["ArrowDown","ArrowUp"].includes(e.key)&&(e.key==="ArrowDown"?(t.activateNext(),e.preventDefault(),e.stopPropagation()):e.key==="ArrowUp"&&(t.activatePrev(),e.preventDefault(),e.stopPropagation()))})}function Ht(i,t,e){ui(i,s=>{t.activateBySearch(s),e.getState()||t.getActive()?.click()})}function yt(i,t,e){v(t,"keydown",s=>{if(s.key==="Enter"){let a=e.getActive();if(s.preventDefault(),s.stopPropagation(),!a||a._disableable?.isDisabled())return;a.click(),i.dispatchEvent(new CustomEvent("interaction",{bubbles:!1,cancelable:!1,detail:{optionEl:a}})),a.hasAttribute("action")&&i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1,detail:{optionEl:a}}))}})}function Bt(i,t,e=!1){v(i,e?"pointerdown":"click",s=>{if(s.target.closest("ui-option, ui-option-create")){let a=s.target.closest("ui-option, ui-option-create");if(a._disableable.isDisabled())return;a._selectable?.trigger(),i.dispatchEvent(new CustomEvent("interaction",{bubbles:!1,cancelable:!1,detail:{optionEl:a}})),a.hasAttribute("action")&&i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1,detail:{optionEl:a}})),s.preventDefault(),s.stopPropagation()}})}function Cr(i,t,e){v(i,"focus",()=>{let s=e.selecteds().find(a=>!a.el._disableable.isDisabled())?.el;t.activateSelectedOrFirst(s)}),v(i,"blur",()=>{t.clearActive()})}function hs(i,t){let e=R(i,"options");return h(i,"role","listbox"),h(i,"aria-multiselectable",t?"true":"false"),e}function Wt(i,t){h(i,"aria-haspopup","listbox");let e=()=>{h(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?h(i,"data-open",""):w(i,"data-open","")};t.onChange(()=>{e()}),e()}function ee(i,t,e,s,a){let r=()=>{Array.from([i,e]).forEach(n=>{s.getState()?h(n,"data-open",""):w(n,"data-open","")}),s.getState()?a.reposition():a.cleanup()};s.onChange(()=>r()),r(),s.onChange(()=>{s.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function ie(i,t,e){i.onChange(()=>{if(i.getState()){let s=e.selecteds().find(a=>!a.el._disableable.isDisabled())?.el;setTimeout(()=>{t.activateSelectedOrFirst(s)})}else t.clearActive()})}function Pt(i,t){v(i,"keydown",e=>{e.key==="Escape"&&t.getState()&&(t.setState(!1),e.preventDefault(),e.stopImmediatePropagation())})}function Lt(i,t){v(i,"keydown",e=>{["ArrowDown","ArrowUp"].includes(e.key)&&(e.key==="ArrowDown"||e.key==="ArrowUp")&&(t.getState()||(t.setState(!0),e.preventDefault(),e.stopImmediatePropagation()))})}function cs(i,t){v(i,"click",()=>{t.getState()||(t.setState(!0),i.focus())})}function Re(i,t,e=null){v(i,"click",()=>{t.setState(!t.getState()),i.focus(),t.getState()&&e&&e.focus()})}function wi(i,t){t.onChange(()=>{t.getState()&&setTimeout(()=>i.focus())})}function we(i,t,e){v(t,"input",a=>{e.filter(a.target.value)}),new MutationObserver(()=>{e.filter(t.value)}).observe(i,{childList:!0})}function xe(i){v(i,"focus",()=>i.select())}function Ae(i){v(i,"change",t=>t.stopPropagation()),v(i,"input",t=>t.stopPropagation())}function ds(i,t){v(i,"keydown",e=>{(/^[a-zA-Z0-9]$/.test(e.key)||e.key==="Backspace")&&(t.getState()||t.setState(!0))})}function Se(i,t,e,s){if(!i.hasAttribute("clear"))return;let r=d=>{t.value!==d&&(t.value=d,t.dispatchEvent(new Event("input",{bubbles:!1})))},n=i.getAttribute("clear"),l=n===""||n.split(" ").includes("action"),o=n===""||n.split(" ").includes("select"),u=n===""||n.split(" ").includes("close"),c=n===""||n.split(" ").includes("esc");n==="none"&&(l=o=u=c=!1),l?i.addEventListener("action",d=>{r("")}):o&&e.onChange(()=>{queueMicrotask(()=>r(""))}),u&&s.onChange(()=>{s.getState()||r("")}),c&&v(t,"keydown",d=>{d.key==="Escape"&&r("")})}function se(i,t,e,s){let a=!s,r=!s,n=!s;if(i.hasAttribute("close")){let l=i.getAttribute("close");if(a=l==="",r=l.split(" ").includes("action"),n=l.split(" ").includes("select"),l==="none")return}a||r?i.addEventListener("interaction",l=>{let o=l.detail.optionEl;if(!o.hasAttribute("action")){e.setState(!1);return}setTimeout(()=>{if(!o.hasAttribute("data-flux-loading")&&!o.hasAttribute("data-loading")){e.setState(!1);return}let u=new MutationObserver(()=>{requestAnimationFrame(()=>{i.querySelector("input[data-invalid]")||e.setState(!1)}),u.disconnect()});u.observe(o,{attributes:!0,attributeFilter:["data-loading","data-flux-loading"]})},10)}):n&&t.onChange(()=>{e.setState(!1)})}function Ut(i,t,e){t.onChange(()=>{let s=t.getActive();s?h(i,"aria-activedescendant",s.id):w(i,"aria-activedescendant")}),e.onChange(s=>{if(!s)return;let a=s.el;a&&h(i,"aria-activedescendant",a.id)})}function Tr(i,t,e,s,a,r,n){if(!i){h(s,"autocomplete","off"),h(s,"aria-autocomplete","none");return}let l=u=>{s.value!==u&&(s.value=u,s.dispatchEvent(new Event("input",{bubbles:!1})))};h(s,"autocomplete","off"),h(s,"aria-autocomplete","list"),s.value!==""&&a.setState(s.value);let o=()=>{a.isNotEmpty()?requestAnimationFrame(()=>{l(a.selectedTextValue()),t&&h(s,"data-selected",a.selectedTextValue())}):(l(""),w(s,"data-selected"))};queueMicrotask(()=>{a.onInitAndChange(()=>o())}),e.addEventListener("interaction",u=>{u.detail.optionEl._selectable?.isSelected()&&o()}),t&&r.onChange(()=>{r.getState()||requestAnimationFrame(()=>{l(s.getAttribute("data-selected"))})})}function ae(i,t,e=[]){let{lock:s,unlock:a}=J(t.el,!1,e);t.onChange(()=>{t.getState()?s():a()})}var fs=class extends re{mount(){this._disableable=new I(this),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())});let t=this.input(),e=this.list(),s=this.hasAttribute("multiple"),a=this.querySelector("ui-pillbox-trigger"),r=this.querySelector("ui-options")||this,n=hs(r,"options",s);this._activatable=new Tt(r,{filter:"data-hidden"}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new Xt(e),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&this._filterable.filter("")}));let l=this.querySelector("[popover]:not(ui-tooltip > [popover])"),o=l?.querySelector('input:not([type="hidden"])'),u=this.querySelector("ui-selected input");if(!l)throw new Error("Popover element not found");if(o){let d=a,m=o,g=l;h(d,"role","button"),h(m,"aria-autocomplete","list"),h(m,"aria-controls",n),h(m,"role","combobox"),this._disableable.onInitAndChange(p=>{p?(d&&h(d,"disabled",""),m&&h(m,"disabled","")):(d&&w(d,"disabled"),m&&w(m,"disabled"))}),this._popoverable=new G(g),this._anchorable=new Y(g,{reference:d,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0,scrollY:!1}),Ut(m,this._activatable,this._selectable),Ae(m),xe(m),this._filterable&&we(e,m,this._filterable),wi(m,this._popoverable),ee(this,d,g,this._popoverable,this._anchorable),ae(this,this._popoverable,[m]),Wt(d,this._popoverable),Se(this,m,this._selectable,this._popoverable),Lt(d,this._popoverable,this._activatable,this._selectable),Re(d,this._popoverable),Pt(this,this._popoverable),vt(m,this._activatable),Ht(d,this._activatable,this._popoverable),yt(this,m,this._activatable),Bt(this,this._activatable),ie(this._popoverable,this._activatable,this._selectable),se(this,this._selectable,this._popoverable,s),Dr(d)}else if(u){let d=a,m=u,g=l;h(d,"role","button"),h(m,"aria-autocomplete","list"),h(m,"aria-controls",n),h(m,"role","combobox"),this._disableable.onInitAndChange(p=>{p?(d&&h(d,"disabled",""),m&&h(m,"disabled","")):(d&&w(d,"disabled"),m&&w(m,"disabled"))}),this._popoverable=new G(g,{triggers:[m,d]}),this._anchorable=new Y(g,{reference:d,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),Ut(m,this._activatable,this._selectable),Ae(m),xe(m),this._filterable&&we(e,m,this._filterable),wi(m,this._popoverable),ee(this,d,g,this._popoverable,this._anchorable),ae(this,this._popoverable,[d]),Wt(d,this._popoverable),Se(this,m,this._selectable,this._popoverable),ds(m,this._popoverable),Lt(m,this._popoverable,this._activatable,this._selectable),cs(d,this._popoverable,m),Pt(this,this._popoverable),vt(m,this._activatable),Ht(d,this._activatable,this._popoverable),yt(this,m,this._activatable),Bt(this,this._activatable),ie(this._popoverable,this._activatable,this._selectable),se(this,this._selectable,this._popoverable,s),eo(this,this._selectable,m),io(this._selectable,m),so(this._selectable,m),ao(this._popoverable,d,m)}else{let d=a,m=l;h(d,"role","combobox"),h(d,"aria-controls",n),h(d,"aria-autocomplete","none"),this._disableable.onInitAndChange(g=>{g?(d&&h(d,"disabled",""),t&&h(t,"disabled","")):(d&&w(d,"disabled"),t&&w(t,"disabled"))}),this._popoverable=new G(m),this._anchorable=new Y(m,{reference:d,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),ee(this,d,m,this._popoverable,this._anchorable),ae(this,this._popoverable),Wt(d,this._popoverable),Lt(d,this._popoverable,this._activatable,this._selectable),Re(d,this._popoverable),Ut(d,this._activatable,this._selectable),Pt(this,this._popoverable),vt(d,this._activatable),Ht(d,this._activatable,this._popoverable),yt(this,d,this._activatable),Bt(this,this._activatable),ie(this._popoverable,this._activatable,this._selectable),se(this,this._selectable,this._popoverable,s),Dr(d)}new MutationObserver(()=>{requestAnimationFrame(()=>{if(!this._popoverable||this._popoverable.getState()){let d=this._selectable.selecteds().find(m=>!m.el._disableable.isDisabled())?.el;this._activatable.activateSelectedOrFirst(d)}else this._activatable.clearActive()})}).observe(e,{childList:!0})}list(){return this.querySelector("ui-options")||this}},ps=class extends _{boot(){this.querySelector("input")?h(this,"tabindex","-1"):h(this,"tabindex","0"),this._disableable=new I(this);let t=e=>{e.preventDefault(),e.stopImmediatePropagation()};this._disableable.onInitAndChange(e=>{e?this.addEventListener("click",t,!0):this.removeEventListener("click",t,!0)})}mount(){}};S("pillbox-trigger",ps);S("pillbox",fs);M(({css:i})=>i`ui-pillbox { display: block; }`);function Dr(i){v(i,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopImmediatePropagation(),i.click())})}function eo(i,t,e){t.onChange(()=>{document.activeElement!==e&&document.activeElement.closest("ui-pillbox")===i&&e.focus()})}function io(i,t){i.onInitAndChange(()=>{i.noneAreSelected()?h(t,"placeholder",t.getAttribute("data-placeholder")):h(t,"placeholder","")})}function so(i,t){v(t,"keydown",e=>{t.value==""&&e.key==="Backspace"&&i.findByValue(i.getState().at(-1))?.deselect()})}function ao(i,t,e){v(t,"click",s=>{i.getState()&&(e.focus(),s.preventDefault(),s.stopImmediatePropagation())})}var qe=class extends _{boot(){h(this,"tabindex","-1"),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hidePopover()}),h(this,"role","listbox")}mount(){let t=this.closest("ui-autocomplete, ui-combobox, ui-select, ui-pillbox"),e=t?.input();e&&ro(this,e,t._filterable)}},ms=class extends _{mount(){let t=this;this._disableable=new I(t,{disableWithParent:!1}),this._disableable.onInitAndChange(a=>{a?h(t,"aria-disabled","true"):w(t,"aria-disabled")});let e=R(t,"option");h(t,"role","option"),this._filterable=new Et(t,{mirror:this,keep:!!this.closest("ui-option-empty, ui-empty")||this.getAttribute("filter")==="manual"}),this._activatable=new $(t),this.hasAttribute("action")||(this._selectable=new O(t,{value:this.getValue(),label:this.getLabel(),selectedLabel:this.getSelectedLabel(),selectedInitially:this.hasAttribute("selected")})),new MutationObserver(a=>{a.forEach(r=>{r.attributeName==="selected"&&(this.hasAttribute("selected")?this._selectable.setState(!0):this._selectable.setState(!1))})}).observe(this,{attributeFilter:["selected"]})}get selected(){return this?._selectable?this._selectable.isSelected():!1}set selected(t){if(!this?._selectable)return!1;this._selectable.setState(t)}getSelectedLabel(){return this.getAttribute("selected-label")}getLabel(){return this.hasAttribute("label")?this.getAttribute("label"):this.textContent.trim()}getValue(){return this.hasAttribute("value")?this.getAttribute("value"):this.textContent.trim()}},gs=class extends _{mount(){this._activatable=new $(this),this._filterable=new Et(this,{keep:!0}),this._disableable=new I(this,{disableWithParent:!1}),this._disableable.onInitAndChange(t=>{t?h(this,"aria-disabled","true"):w(this,"aria-disabled")})}},xi=class extends _{},vs=class extends xi{};M(({css:i})=>i`ui-options:not([popover]), ui-option { display: block; cursor: default; }`);M(({css:i})=>i`ui-option-create { display: block; cursor: default; }`);M(({css:i})=>i`ui-option-empty { display: block; cursor: default; }`);M(({css:i})=>i`ui-empty { display: block; cursor: default; }`);S("option-create",gs);S("options",qe);S("option",ms);S("option-empty",xi);S("empty",vs);function bs(i){return CSS.supports("selector(&)")?i:i.replace("&",":scope")}function ro(i,t,e){let s=i.querySelector(bs("& > ui-option-empty, & > ui-empty")),a=i.querySelector(bs("& > ui-option-create")),r=a?.hasAttribute("min-length")?parseInt(a.getAttribute("min-length")):void 0;h(s,"data-hidden",""),a&&h(a,"data-hidden","");let n=g=>g.hasAttribute("data-hidden"),l=g=>g.textContent.toLowerCase().trim()!==t.value.toLowerCase().trim(),o=()=>Array.from(i.querySelectorAll(bs("& > ui-option"))),u=()=>{if(s.hasAttribute("when-loading")){let g=s.textContent;s.textContent=s.getAttribute("when-loading"),s.__hideLoading=()=>{s.textContent=g,s.__hideLoading=void 0}}},c,d,m=()=>{if(clearTimeout(c),clearTimeout(d),t.hasAttribute("data-flux-loading")||t.hasAttribute("data-loading"))return;let g=o(),p=g.every(A=>n(A));if(a){r&&t.value.trim().length<r?h(a,"data-hidden",""):g.every(f=>l(f))?w(a,"data-hidden"):h(a,"data-hidden",""),p&&a._activatable.activate(!0);let A=()=>{w(a,"disabled")};e?A():d=setTimeout(A,150)}p&&(!a||n(a))?w(s,"data-hidden"):h(s,"data-hidden",""),s.__hideLoading?.()};if(e)e.onChange(()=>m()),a&&v(t,"input",()=>{r&&t.value.trim().length<r&&h(a,"data-hidden","")});else{let g=new MutationObserver(()=>{requestAnimationFrame(()=>m())});g.observe(i,{childList:!0}),g.observe(t,{attributes:!0,attributeFilter:["data-loading","data-flux-loading"]}),a&&v(t,"input",p=>{clearTimeout(c),clearTimeout(d);let A=o().every(f=>n(f));A&&t.value.trim()===""&&!n(a)?(u(),w(s,"data-hidden"),h(a,"data-hidden","")):t.value.trim()===""&&!n(a)&&h(a,"data-hidden",""),r&&t.value.trim().length>=r&&w(a,"data-hidden"),h(a,"disabled",""),c=setTimeout(()=>{w(a,"disabled"),A&&a._activatable.activate()},200)})}m()}var y=class i{constructor(t,e,s=1){this._date=new Date(Date.UTC(t,e-1,s))}isBetween(t,e){return!t&&!e?!0:t?e?this._date>=t._date&&this._date<=e._date:this._date>=t._date:this._date<=e._date}isSameDay(t){return t?this._date.getUTCDate()===t._date.getUTCDate()&&this._date.getUTCMonth()===t._date.getUTCMonth()&&this._date.getUTCFullYear()===t._date.getUTCFullYear():!1}isBefore(t){return t?this._date<t._date:!1}isAfter(t){return t?this._date>t._date:!1}incrementDays(t){let e=this.getCopy();return e._date.setUTCDate(e._date.getUTCDate()+t),e}addMonths(t){let e=this.getCopy();return e._date.setUTCMonth(e._date.getUTCMonth()+t),e}addDays(t){let e=this.getCopy();return e._date.setUTCDate(e._date.getUTCDate()+t),e}getYear(){return this._date.getUTCFullYear()}getMonth(){return this._date.getUTCMonth()+1}getPaddedMonth(){return String(this.getMonth()).padStart(2,"0")}getDay(){return this._date.getUTCDate()}getPaddedDay(){return String(this.getDay()).padStart(2,"0")}getDate(){return this._date}getCopy(){return new i(this.getYear(),this.getMonth(),this.getDay())}getDayOfWeek(){return this._date.getUTCDay()}getDaysInMonth(){return new i(this.getYear(),this.getMonth()+1,0).getDay()}getFirstDayOfMonth(){return new i(this.getYear(),this.getMonth(),1).getDayOfWeek()}getWeekNumber(){let t=new Date(Date.UTC(this._date.getUTCFullYear(),0,1)),e=new Date(t);e.setUTCDate(1+(11-t.getUTCDay())%7);let s=new Date(this._date);return s.setUTCDate(this._date.getUTCDate()+(11-this._date.getUTCDay())%7),Math.floor((s.getTime()-e.getTime())/(7*24*60*60*1e3))+1}setDay(t){this._date.setUTCDate(t)}setMonth(t){this._date.setUTCMonth(t-1)}setYear(t){this._date.setUTCFullYear(t)}static fromIsoDateString(t){if(!t)return null;let[e,s,a]=t.split("T")[0]?.split("-")?.map(Number);return new i(e,s,a)}static fromLocalDate(t){return t?new i(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()):null}static fromDate(t){return t?new i(t.getFullYear(),t.getMonth()+1,t.getDate()):null}static fromParts(t,e,s){return new i(t,e,s)}static today(){return i.fromDate(new Date)}static firstDayOfMonth(t){return new i(t.getYear(),t.getMonth(),1)}toIsoDateString(){return[this.getYear(),this.getPaddedMonth(),this.getPaddedDay()].join("-")}toParts(){return[this.getYear(),this.getMonth(),this.getDay()]}toDate(){return new Date(this.getYear(),this.getMonth()-1,this.getDay())}toFormattedString(t,e){return this.toDate().toLocaleDateString(t,e)}};function Ir(i,t,e,s){let a=i.querySelector('template[name="heading"]'),r=i.querySelector('template[name="weekday"]'),n=i.querySelector('template[name="week"]');a&&no(a,t,e),r&&oo(r,t),n&&lo(n,t,e,s)}function no(i,t,e){j(i,s=>s({slots:{default:new Intl.DateTimeFormat(t.locale,{month:i.hasAttribute("display")?i.getAttribute("display"):"long",year:"numeric",timeZone:"UTC"}).format(new y(e.year,e.month).getDate())}}))}function oo(i,t){let e=a=>i.hasAttribute("display")?new Intl.DateTimeFormat(t.locale,{weekday:i.getAttribute("display")}).format(a):["en","es","de","fr","it","pt"].includes(t.locale.split("-")[0])?new Intl.DateTimeFormat(t.locale,{weekday:"short"}).format(a).slice(0,2):new Intl.DateTimeFormat(t.locale,{weekday:"narrow"}).format(a),s=Array.from({length:7},(a,r)=>{let n=(r+t.startDay)%7,l=new Date(2024,0,n+7);return e(l)});j(i,a=>s.map(r=>a({slots:{default:r}})))}function lo(i,t,e,s){let a=e.month,r=e.year,n=(new y(r,a).getFirstDayOfMonth()-t.startDay+7)%7,l=new y(r,a).getDaysInMonth(),[o,u]=new y(r,a).addMonths(-1).toParts(),c=new y(o,u).getDaysInMonth(),[d,m]=[[],[]];for(let k=0;k<n;k++){d.push(0);let E=c-n+k+1;m.push(new y(o,u,E).toIsoDateString())}for(let k=1;k<=l;k++)d.push(k),m.push(new y(r,a,k).toIsoDateString());let p=(7-(n+l)%7)%7,[A,f]=new y(r,a).addMonths(1).toParts();for(let k=1;k<=p;k++)d.push(0),m.push(new y(A,f,k).toIsoDateString());if(t.fixedWeeks){let k=Math.ceil(d.length/7),E=t.fixedWeeks,C=E-k;if(C>0)for(let T=0;T<C*7;T++)d.push(0),m.push(y.fromIsoDateString(m[m.length-1]).addDays(1).toIsoDateString());else C<0&&(d.length=E*7,m.length=E*7)}let D=k=>Array.from({length:Math.ceil(k.length/7)},(E,C)=>k.slice(C*7,(C+1)*7)),x=D(d),b=D(m);j(i,k=>x.map((E,C)=>{let T=k(),P=b[C],V=T.querySelector('template[name="number"]');if(V){let et=(4-t.startDay+7)%7,ht=y.fromIsoDateString(P[et]).getWeekNumber();j(V,rt=>rt({slots:{default:ht}}))}return j(T.querySelector('template[name="day"]'),et=>E.map((ht,rt)=>{if(ht===0){let ot=y.fromIsoDateString(P[rt]).getDay();return et({slots:{default:ot},attrs:{"data-date":P[rt],"data-outside":""}})}let ct=y.fromIsoDateString(P[rt]),K=et({slots:{default:ht},attrs:{"data-date":P[rt]}}),Ft=s.subtext(ct),nt=s.details(ct),X=s.variant(ct);if([!1,null,void 0].includes(X)||(K.dataset.dateVariant=X),![!1,null,void 0].includes(Ft)){let it=K.querySelector('template[name="subtext"]');it&&j(it,ot=>ot({slots:{default:Ft}}))}if(![!1,null,void 0].includes(nt)){let it=K.querySelector('template[name="details"]');it&&j(it,ot=>ot({slots:{default:nt}}))}return K})),T}))}function Mr(i,t,e,s,a,r){let l=((o,u)=>a.lowerBound(()=>y.today().getMonth()===o&&y.today().getYear()===u?y.today():new y(u,o)))(s.month,s.year);i.querySelectorAll("[data-date]").forEach(o=>{h(o,"role","gridcell");let u=o.querySelector("button,ui-button"),c=uo(o);c&&(u?h(u,"aria-label",c.toFormattedString(e.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})):h(o,"aria-label",c.toFormattedString(e.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})),r.isValid(c)?t?(h(o,"disabled",""),h(o,"aria-disabled","true"),u&&h(u,"disabled","")):(w(o,"disabled"),w(o,"data-unavailable"),w(o,"aria-disabled"),u&&w(u,"disabled")):(h(o,"disabled",""),h(o,"aria-disabled","true"),u&&h(u,"disabled",""),r.isUnavailable(c)&&h(o,"data-unavailable","")),y.today().isSameDay(c)?h(o,"data-today",""):w(o,"data-today",""),a.attributes(o,c),c.isSameDay(l)?u&&h(u,"tabindex","0"):u&&h(u,"tabindex","-1"))})}function j(i,t){if(!i)return;let e=()=>{let a=i.nextElementSibling;for(;a&&a.hasAttribute("data-appended");){let r=a;a=a.nextElementSibling,r.remove()}};e();let s=t(({slots:a={},attrs:r={}}={})=>{let n=i.content.cloneNode(!0).firstElementChild;return Object.entries(a).forEach(([l,o])=>{(l==="default"?n.querySelectorAll("slot:not([name])"):n.querySelectorAll(`slot[name="${l}"]`)).forEach(c=>c.replaceWith(typeof o=="string"?document.createTextNode(o):o))}),n.querySelectorAll("slot").forEach(l=>l.remove()),Object.entries(r).forEach(([l,o])=>{n.setAttribute(l,o)}),n});return s=Array.isArray(s)?s:[s],s.reverse().forEach(a=>{h(a,"data-appended",""),i.after(a)}),{cleanup:e}}function uo(i){return!i||!i.hasAttribute("data-date")?null:y.fromIsoDateString(i.getAttribute("data-date"))}var Ot=class{static SINGLE="single";static MULTIPLE="multiple"},tt=class{static SELECTION="selection";static ACTIVATION="activation";static VIEW_CHANGE="view-change"},Ai=class i{constructor(t,e,s){this.config=e,this.observable=s,this.selection=t}select(t){let e=this.selection;this.selection=this.selection.select(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(tt.SELECTION):this.observable.notify(tt.ACTIVATION)}setValue(t){let e=this.selection;this.selection=i.createSelectionFromValue(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(tt.SELECTION):this.observable.notify(tt.ACTIVATION)}getValue(){return this.selection.value()}isSelectable(t){return this.selection.selectable(t,this.config)}contains(...t){return this.selection.contains(...t)}hasSelection(){return this.selection.hasSelection()}lowerBound(...t){return this.selection.lowerBound(...t)}upperBound(...t){return this.selection.upperBound(...t)}display(...t){return this.selection.display(this.config,...t)}attributes(...t){return this.selection.attributes(...t)}static createSelectionFromValue(t,e){return e.mode===Ot.MULTIPLE?(t??=[],new ys(t)):t?new Ei(t):new Si}static createFromValueStringAttribute(t,e,s){let a=i.createSelectionFromValueStringAttribute(t,e);return new i(a,e,s)}static createSelectionFromValueStringAttribute(t,e){return e.mode===Ot.MULTIPLE&&(t=t?t.split(",").map(s=>s.trim()):[]),i.createSelectionFromValue(t,e)}},Be=class{contains(){}shouldNotify(t){return!0}hasSelection(){return!1}lowerBound(t){return _i(t)}upperBound(t){return this.lowerBound(t)}selectable(t,e){return!0}display(t){}value(){}attributes(t,e){this.contains(e)?(h(t,"data-selected",""),h(t,"aria-selected","true")):(w(t,"data-selected"),h(t,"aria-selected","false"))}},Si=class i extends Be{contains(){return!1}shouldNotify(t){return!(t instanceof i)}hasSelection(){return!1}lowerBound(t){return _i(t)}select(t){return new Ei(t)}display(t){return""}value(){return null}},Ei=class i extends Be{constructor(t){super(),this._value=t}contains(t){return this._value===t}shouldNotify(t){return!(t instanceof i&&this._value===t._value)}hasSelection(){return!0}lowerBound(){return this._value}select(t){return this._value===t?new Si:new i(t)}display(t){return ki(this._value,t.timeFormat,t.locale)}value(){return this._value}},ys=class i extends Be{constructor(t){super(),this._values=t.sort((e,s)=>wt(e)<wt(s)?-1:1)}contains(t){return this._values.some(e=>e===t)}shouldNotify(t){return!(t instanceof i&&this._values.every(e=>t._values.includes(e))&&t._values.every(e=>this._values.includes(e)))}hasSelection(){return this._values.length>0}lowerBound(t){return this._values.sort((s,a)=>wt(s)<wt(a)?-1:1)[0]||_i(t)}upperBound(t){let e=this._values.sort((s,a)=>wt(s)<wt(a)?-1:1);return e[e.length-1]||_i(t)}select(t){return this._values.some(s=>s===t)?new i(this._values.filter(s=>s!==t)):new i([...this._values,t])}display(t){return this._values.sort((e,s)=>wt(e)<wt(s)?-1:1).map(e=>ki(e,t.timeFormat,t.locale)).join(", ")}value(){return this._values}};function _i(i=null){return typeof i=="function"?i():i}var Ci=class extends _{boot(){this.picker=this.closest("ui-time-picker");let t=this.querySelectorAll("input");this._disableable=new I(this);let e=s=>{s.preventDefault(),s.stopImmediatePropagation()};if(this._disableable.onInitAndChange(s=>{s?this.addEventListener("click",e,!0):this.removeEventListener("click",e,!0)}),t.length!==0){if(t.length<2)throw new Error("Time picker inputs missing");this.hourInput=t[0],this.minuteInput=t[1],this.meridiemInput=t[2]||null,this.meridiemInput&&this.use24HourFormat()&&(this.meridiemInput.style.display="none",this.meridiemInput=null),this._disableable.onInitAndChange(s=>{s?(this.hourInput.setAttribute("disabled",""),this.minuteInput.setAttribute("disabled",""),this.meridiemInput?.setAttribute("disabled","")):(this.hourInput.removeAttribute("disabled"),this.minuteInput.removeAttribute("disabled"),this.meridiemInput?.removeAttribute("disabled"))}),this.clearInputs(),ws(this.hourInput),ws(this.minuteInput),this.meridiemInput&&ws(this.meridiemInput),this.hourInput.addEventListener("keydown",s=>{if(s.key==="ArrowRight")return this.minuteInput.focus()}),this.minuteInput.addEventListener("keydown",s=>{if(s.key==="ArrowLeft")return this.hourInput.focus();if(s.key==="ArrowRight")return this.meridiemInput?.focus()}),this.meridiemInput?.addEventListener("keydown",s=>{if(s.key==="ArrowLeft")return this.minuteInput.focus()}),xs(this.hourInput),xs(this.minuteInput),this.meridiemInput&&xs(this.meridiemInput),this.initHourInputListeners(),this.initMinuteInputListeners(),this.meridiemInput&&this.initMeridiemInputListeners(),this.meridiemInput&&this.setMeridiemWidthBasedOnLocale(),this.picker.observable.subscribe(tt.SELECTION,()=>{this.updateInputsFromSelectable(this.picker.selectable)}),this.updateInputsFromSelectable(this.picker.selectable)}}focus(){if(this.hourInput)return this.hourInput.focus();this.querySelector("button,ui-button")?.focus()}use24HourFormat(){return this.picker.config.timeFormat==="24-hour"?!0:this.picker.config.timeFormat==="12-hour"?!1:ho(this.picker.config.locale)}processTime(){let t=Lr(this.hourInput.value,this.minuteInput.value,this.meridiemInput?.value);t&&(this.updateSelectable(t),this.updateInputsFromSelectable(this.picker.selectable))}updateSelectable(t){this.picker.selectable.setValue(t)}updateInputsFromSelectable(t){let e=t.getValue();this.updateInputs(e)}updateInputs(t){if(!t)return this.clearInputs();let[e,s]=t.split(":"),a=null;this.meridiemInput&&(e=parseInt(e),a=Pr(e,this.picker.config.locale),e>12?e=e-12:e===0&&(e=12),e=e.toString()),this.hourInput.value=e.padStart(2,"0"),this.minuteInput.value=s.padStart(2,"0"),this.meridiemInput&&(this.meridiemInput.value=a)}clearInputs(){this.hourInput.value="--",this.minuteInput.value="--",this.meridiemInput&&(this.meridiemInput.value="--")}initHourInputListeners(){let t=!1;this.hourInput.addEventListener("keydown",e=>{if(!["ArrowUp","ArrowDown"].includes(e.key))return;e.preventDefault(),e.stopPropagation();let s=parseInt(this.hourInput.value),a=this.picker.selectable.getValue(),[r,n]=a?.split(":")||["00","00"];r=parseInt(r),e.key==="ArrowUp"?a===null||r===23?r=0:r++:e.key==="ArrowDown"&&(a===null||r===0?r=23:r--);let l=Lr(r.toString(),n);this.updateSelectable(l),this.updateInputsFromSelectable(this.picker.selectable),xt(this.hourInput)}),this.hourInput.addEventListener("keydown",e=>{if(!/[0-9]/.test(e.key))return;let s=parseInt(e.key);if(this.hourInput.value===""||this.hourInput.value==="--"||!t){t=!0,this.hourInput.value=`0${s}`,s>2?this.minuteInput.focus():xt(this.hourInput);return}let a=parseInt(this.hourInput.value);if(a===2&&s>=0&&s<=3){this.hourInput.value=`${a}${s}`,this.minuteInput.focus();return}if(a===1||a===0){this.hourInput.value=`${a}${s}`,this.minuteInput.focus();return}this.hourInput.value=`0${s}`,s>2?this.minuteInput.focus():xt(this.hourInput)}),this.hourInput.addEventListener("blur",e=>{t=!1,this.processTime()})}initMinuteInputListeners(){let t=!1;this.minuteInput.addEventListener("keydown",e=>{if(!["ArrowUp","ArrowDown"].includes(e.key))return;e.preventDefault(),e.stopPropagation();let s=parseInt(this.minuteInput.value);e.key==="ArrowUp"?isNaN(s)||s===59?s=0:s=s+1:e.key==="ArrowDown"&&(isNaN(s)||s===0?s=59:s=s-1),this.minuteInput.value=s.toString().padStart(2,"0"),this.processTime(),xt(this.minuteInput)}),this.minuteInput.addEventListener("keydown",e=>{if(!/[0-9]/.test(e.key))return;let s=parseInt(e.key);if(this.minuteInput.value===""||this.minuteInput.value==="--"||!t){t=!0,this.minuteInput.value=`0${s}`,this.processTime(),s>5?this.meridiemInput?.focus():xt(this.minuteInput);return}let a=parseInt(this.minuteInput.value);if(a<=5){this.minuteInput.value=`${a}${s}`,this.processTime(),this.meridiemInput?.focus();return}this.minuteInput.value=`0${s}`,this.processTime(),s>5?this.meridiemInput?.focus():xt(this.minuteInput)}),this.minuteInput.addEventListener("blur",e=>{t=!1,this.processTime()})}initMeridiemInputListeners(){this.meridiemInput?.addEventListener("keydown",t=>{if(!["ArrowUp","ArrowDown"].includes(t.key))return;t.preventDefault(),t.stopPropagation();let e=this.meridiemInput.value;t.key==="ArrowUp"?e===""||e==="AM"?e="PM":e="AM":t.key==="ArrowDown"&&(e===""||e==="PM"?e="AM":e="PM"),this.meridiemInput.value=e,this.processTime(),xt(this.meridiemInput)}),this.meridiemInput?.addEventListener("keydown",t=>{["a","p","A","P"].includes(t.key)&&(t.key==="a"||t.key==="A"?this.meridiemInput.value="AM":(t.key==="p"||t.key==="P")&&(this.meridiemInput.value="PM"),this.processTime(),xt(this.meridiemInput))})}setMeridiemWidthBasedOnLocale(){let t=Pr(12,this.picker.config.locale);t&&(this.meridiemInput.style.width=`calc(${t.length}ch + 2px)`)}};function ws(i){i.addEventListener("focus",t=>{xt(i)}),i.addEventListener("mousedown",t=>{xt(i)}),i.addEventListener("mouseup",t=>{t.preventDefault(),xt(i)})}function xs(i){i.addEventListener("keydown",t=>{t.ctrlKey||t.metaKey||t.altKey||["Tab"].includes(t.key)||t.preventDefault()})}function xt(i){i.setSelectionRange(0,i.value.length)}function Pr(i,t){let a=new Intl.DateTimeFormat(t,{hour:"numeric",hour12:!0}).formatToParts(new Date(2024,0,1,i,0)).find(r=>r.type==="dayPeriod")?.value;return a||(i>=12?"PM":"AM")}function Lr(i,t,e=null){if(i==="--"&&t==="--"&&(e===null||e==="--"))return null;e==="PM"&&i==="--"&&(i="12"),i==="--"&&(i="00"),t==="--"&&(t="00"),e==="--"&&(e=null),i=i.padStart(2,"0"),t=t.padStart(2,"0");let s=e?i+":"+t+" "+e:i+":"+t;return co(s)}function ho(i){return new Intl.DateTimeFormat(i,{hour:"numeric"}).format(new Date(2024,0,1,0,0)).startsWith("00")}function co(i){let t=i.trim().match(/^(\d{1,2}):(\d{2})(?:\s*(am|pm|AM|PM))?$/i);if(!t)throw new Error(`Invalid time string: ${i}`);let e=parseInt(t[1],10),s=parseInt(t[2],10),a=t[3]?.toUpperCase();if(s>59||e>23||a!=="AM"&&a!=="PM"&&a!==void 0)throw new Error(`Invalid time string: ${i}`);return e>=13||e===0?`${String(e).padStart(2,"0")}:${String(s).padStart(2,"0")}`:(a&&(e===12?e=a==="AM"?0:12:a==="PM"&&(e+=12)),`${String(e).padStart(2,"0")}:${String(s).padStart(2,"0")}`)}var As=class extends W{boot(){this.config={timeFormat:this.hasAttribute("time-format")?this.getAttribute("time-format"):"auto",interval:this.interval(),min:this.min(),max:this.max(),unavailable:this.unavailable(),openTo:this.openTo(),locale:this.hasAttribute("locale")?this.getAttribute("locale"):navigator.language,mode:this.hasAttribute("multiple")?Ot.MULTIPLE:Ot.SINGLE,dropdown:!(this.hasAttribute("dropdown")&&this.getAttribute("dropdown")==="false")},this.observable=new Vt,this._controllable=new N(this,{bubbles:!0}),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.getAttribute("value"),includeWhenEmpty:!1}),this.selectable=Ai.createFromValueStringAttribute(this.getAttribute("value"),this.config,this.observable),this._controllable.getter(()=>this.selectable.getValue());let t=F();if(this._controllable.setter(t(l=>{this.selectable.setValue(l)})),this.observable.subscribe(tt.SELECTION,t(()=>{this._controllable.dispatch(),this.dispatchEvent(new CustomEvent("input",{bubbles:!1}))})),this.observable.subscribe(tt.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this._disableable=new I(this),!this.config.dropdown)return;let e=this.querySelector("[popover]");if(!e)return;let s=this.trigger(),a=this.querySelector("ui-time-picker-options"),r=fo(a,this.config.mode===Ot.MULTIPLE);this._popoverable=new G(e,{triggers:[s]}),this._anchorable=new Y(e,{reference:s,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0,matchWidth:!0}),this._activatable=new Tt(a,{filter:"data-hidden"}),this._disableable.onInitAndChange(l=>{l?(h(s,"disabled",""),s.querySelectorAll("button,ui-button").forEach(o=>h(o,"disabled",""))):(w(s,"disabled"),s.querySelectorAll("button,ui-button").forEach(o=>w(o,"disabled")))}),s.addEventListener("click",l=>{this._popoverable.toggle(),s.focus()}),s.querySelectorAll("button,ui-button").forEach(l=>{po(l,this._popoverable,r),vo(l,this._activatable,this.observable)}),bo(this,e,this._popoverable,this._anchorable),mo(this,this._popoverable),Lt(s,this._popoverable),Pt(this,this._popoverable),vt(s,this._activatable),Ht(s,this._activatable,this._popoverable),yt(this,s,this._activatable),So(this._popoverable,this._activatable,this.selectable,this.config.openTo),yo(this,this.config.mode,this.observable,this.selectable,this._popoverable),new MutationObserver(l=>{l.forEach(o=>{["interval","unavailable","max","min","open-to"].includes(o.attributeName)&&(this.config.interval=this.interval(),this.config.unavailable=this.unavailable(),this.config.min=this.min(),this.config.max=this.max(),this.config.openTo=this.openTo(),this.observable.notify(tt.VIEW_CHANGE))})}).observe(this,{attributes:!0})}trigger(){return this.querySelector("ui-time-picker-trigger")}list(){return this.querySelector("ui-options")||this}clear(){this.selectable.setValue(null),this.dispatchEvent(new CustomEvent("clear",{bubbles:!1}))}interval(){return this.hasAttribute("interval")?parseInt(this.getAttribute("interval")):30}min(){if(this.hasAttribute("min")){let t=this.getAttribute("min");return t==="now"?new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):We(t)?t:console.warn(`Invalid min attribute: ${t}`)}}max(){if(this.hasAttribute("max")){let t=this.getAttribute("max");return t==="now"?new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):We(t)?t:console.warn(`Invalid max attribute: ${t}`)}}unavailable(){if(this.hasAttribute("unavailable")){let t=this.getAttribute("unavailable").split(",").map(e=>e.trim());return t.every(e=>e.includes("-")?xo(e):We(e))?t:console.warn(`Invalid unavailable attribute: ${t}`)}return[]}openTo(){if(this.hasAttribute("open-to")){let t=this.getAttribute("open-to");return t==="now"?new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):We(t)?t:console.warn(`Invalid open-to attribute: ${t}`)}}},Ss=class extends _{boot(){if(this.picker=this.closest("ui-time-picker"),!this.querySelector('template[name="time"]')){let t=document.createElement("template");t.setAttribute("name","time"),t.innerHTML="<div><slot></slot></div>"}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),time:this.querySelector('template[name="time"]')},this.picker.observable.subscribe(tt.SELECTION,()=>{this.render(this.picker)}),this.render(this.picker)}mount(){this.render(this.picker)}render(t){if(this.templates.placeholder?.clearPlaceholder?.(),this.templates.time?.clearTime?.(),t.selectable.hasSelection()){let{cleanup:e}=j(this.templates.time,s=>s({slots:{default:t.selectable.display(t.config.locale)}}));this.templates.time.clearTime=e}else{if(!this.templates.placeholder)return;let{cleanup:e}=j(this.templates.placeholder,s=>s({slots:{}}));this.templates.placeholder.clearPlaceholder=e}}},Es=class extends _{boot(){this.picker=this.closest("ui-time-picker"),this.render(),this.picker.observable.subscribe(tt.SELECTION,()=>{this.render()}),this.picker.observable.subscribe(tt.VIEW_CHANGE,()=>{this.render()});let{enable:t,disable:e}=wo(this,this.picker.selectable);this.picker._disableable.onInitAndChange(s=>{s?e():t()})}render(){let t=this.querySelector('template[name="option"]');t&&j(t,e=>_o(this.picker.config).map(({value:a,label:r})=>{let n=this.picker.config.unavailable.some(u=>Ao(a,u)),l={"data-time":a,role:"option"};n&&(l.disabled="");let o=e({attrs:l,slots:{default:r}});return this.picker.selectable.attributes(o,a),o._activatable=new $(o),R(o,"option"),o}))}};S("time-picker",As);S("time-picker-trigger",Ci);S("selected-time",Ss);S("time-picker-options",Es);M(({css:i})=>i`ui-time-picker { display: block; }`);function fo(i,t){let e=R(i,"options");return h(i,"role","listbox"),h(i,"aria-multiselectable",t?"true":"false"),e}function po(i,t,e){h(i,"role","combobox"),h(i,"aria-controls",e),h(i,"aria-haspopup","listbox"),go(i,t),v(i,"click",s=>{s.stopPropagation(),t.setState(!t.getState()),i.focus()})}function bo(i,t,e,s){let a=()=>{Array.from([i,t]).forEach(r=>{e.getState()?h(r,"data-open",""):w(r,"data-open","")}),e.getState()?s.reposition():s.cleanup()};e.onChange(()=>a()),a(),e.onChange(()=>{e.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function mo(i,t){let{lock:e,unlock:s}=J(t.el);t.onChange(()=>{t.getState()?e():s()})}function go(i,t){h(i,"aria-haspopup","listbox");let e=()=>{h(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?h(i,"data-open",""):w(i,"data-open","")};t.onChange(()=>{e()}),e()}function vo(i,t){t.onChange(()=>{let e=t.getActive();e?h(i,"aria-activedescendant",e.id):w(i,"aria-activedescendant")})}function yo(i,t,e,s,a){t!==Ot.MULTIPLE&&e.subscribe(tt.SELECTION,()=>{s.hasSelection()&&a.setState(!1)})}function wo(i,t){let e=!1,s=i.hasAttribute("readonly");return v(i,"click",a=>{if(e||s)return;let r=a.target.closest("[data-time]");if(!r)return;let n=r.getAttribute("data-time");setTimeout(()=>{We(n)&&t.select(n)})}),{enable:()=>{},disable:()=>{}}}function We(i){return new RegExp(`^${_s()}$`).test(i)}function xo(i){return new RegExp(`^${_s()}-${_s()}$`).test(i)}function _s(){return"([01]?[0-9]|2[0-3]):[0-5][0-9]"}function Ao(i,t){let[e,s]=i.split("-").map(n=>{let[l,o]=n.split(":").map(Number);return l*60+o}),[a,r]=t.split("-").map(n=>{let[l,o]=n.split(":").map(Number);return l*60+o});return isNaN(s)&&(s=e),isNaN(r)&&(r=a),!(s<a||e>r)}function ki(i,t,e){let[s,a]=i.split(":").map(Number),r={"12-hour":!0,"24-hour":!1,auto:void 0};return new Intl.DateTimeFormat(e,{hour:"numeric",minute:"numeric",hour12:r[t]}).format(new Date(2024,0,1,s,a))}function wt(i){if(!i)return null;let[t,e]=i.split(":");return isNaN(t)||isNaN(e)?null:parseInt(t)*60+parseInt(e)}function So(i,t,e,s=null){i.onChange(()=>{if(i.getState()){let a=e.getValue();Array.isArray(a)||(a=a===null?[]:[a]);let n=t.filterAwareWalker().find(o=>a.includes(o.getAttribute("data-time"))),l=null;!n&&s&&(l=Eo(t,s)),setTimeout(()=>{let o=n||l;t.activateSelectedOrFirst(o),o?.scrollIntoView({block:"nearest"})})}else t.clearActive()})}function Eo(i,t){let e=wt(t),s=null,a=null;return i.filterAwareWalker().walk((r,n)=>{let l=r.getAttribute("data-time"),o=wt(l);o>e||Math.abs(o-e)<Math.abs(a-e)&&(s=r,a=o)}),s}function _o({interval:i=30,timeFormat:t="auto",locale:e=navigator.language,min:s,max:a}={}){let r=[],n=0,l=24*60-1;if(s){let o=new Date(2024,0,1),[u,c]=s.split(":");o.setHours(u,c),n=o.getHours()*60+o.getMinutes()}if(a){let o=new Date(2024,0,1,23,59,59),[u,c]=a.split(":");o.setHours(u,c),l=o.getHours()*60+o.getMinutes()}for(let o=n;o<=l;o+=i){let u=Math.floor(o/60),c=o%60,d=`${String(u).padStart(2,"0")}:${String(c).padStart(2,"0")}`,m=ki(d,t,e);r.push({value:d,label:m})}return r}var Ti=class extends q{boot({options:t}){this.onChanges=[],this.state=!1}onChange(t){this.onChanges.push(t)}getState(){return this.state}setState(t){let e=this.state;this.state=!!t,this.state!==e&&this.onChanges.forEach(s=>s())}};var ks=class extends _{boot(){let t=this.button(),e=this.details();if(t){if(!e)return console.warn("ui-disclosure: no panel element found",this)}else return console.warn("ui-disclosure: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new N(this,{disabled:this._disabled}),e._disclosable=new Ti(e),this._controllable.initial(r=>r&&e._disclosable.setState(!0)),this._controllable.getter(()=>e._disclosable.getState()),this._controllable.setter(r=>e._disclosable.setState(r)),e._disclosable.onChange(()=>{this.dispatchEvent(new CustomEvent("lofi-disclosable-change",{bubbles:!0})),this._controllable.dispatch()});let s=()=>{e._disclosable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(w(this,"data-open"),w(t,"data-open"),w(e,"data-open"))};e._disclosable.onChange(()=>s()),s(),this._disabled||v(t,"click",r=>{e._disclosable.setState(!e._disclosable.getState())});let a=R(e,"disclosure");h(t,"aria-controls",a),h(t,"aria-expanded","false"),e._disclosable.onChange(()=>{e._disclosable.getState()?h(t,"aria-expanded","true"):h(t,"aria-expanded","false")}),this.hasAttribute("open")&&e._disclosable.setState(!0)}button(){return this.querySelector("button,ui-button")}details(){return this.lastElementChild}},Cs=class i extends _{boot(){this.exclusive=this.hasAttribute("exclusive"),this.exclusive&&v(this,"lofi-disclosable-change",t=>{t.stopPropagation(),t.target.localName==="ui-disclosure"&&t.target.value&&this.disclosureWalker().each(e=>{e!==t.target&&(e.value=!1)})})}disclosureWalker(){return H(this,(t,{skip:e,reject:s})=>{if(t instanceof i&&t!==this||t.localName!=="ui-disclosure")return s()})}};M(({css:i})=>i`ui-disclosure { display: block; }`);S("disclosure",ks);S("disclosure-group",Cs);var Ts=class extends _{boot(){}},Ds=class extends _{boot(){let t=this.hasAttribute("resize")?this.getAttribute("resize"):"both",e=this.hasAttribute("shrink"),s=this.closest("ui-resizable"),a,r,n=!1;if(!s)throw"Resizable container not found";this.addEventListener("pointerdown",l=>{n||(a=s.offsetWidth,r=s.offsetHeight,n=!0);let o=l.clientX,u=l.clientY,c=parseInt(getComputedStyle(s).width,10),d=parseInt(getComputedStyle(s).height,10),m=g=>{let p=c+(g.clientX-o),A=d+(g.clientY-u);(t==="width"||t==="both")&&(e?s.style.width=`${Math.min(p,a)}px`:s.style.width=`${p}px`),(t==="height"||t==="both")&&(e?s.style.height=`${Math.min(A,r)}px`:s.style.height=`${A}px`)};document.addEventListener("pointermove",m),document.addEventListener("pointerup",()=>{this.releasePointerCapture(l.pointerId),document.removeEventListener("pointermove",m)},{once:!0}),this.setPointerCapture(l.pointerId)})}};M(({css:i})=>i`ui-resizable { display: block; }`);S("resizable",Ts);S("grip",Ds);var Is=class i extends W{boot(){this._disableable=new I(this);let t=[];this._disableable.onInitAndChange(e=>{e?this.walker().each(s=>{s.hasAttribute("disabled")||(s.setAttribute("disabled",""),t.push(()=>s.removeAttribute("disabled")))}):(t.forEach(s=>s()),t=[])}),this._selectable=new Q(this,{multiple:!0}),this._controllable=new N(this,{disabled:this._disabled,bubbles:!0}),this.walker().each(e=>{e.addEventListener("input",s=>s.stopPropagation()),e.addEventListener("change",s=>s.stopPropagation())}),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.getAttribute("value"),includeWhenEmpty:!1}),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=F(),this._controllable.setter(this._detangled(e=>{this._selectable.setState(e)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),h(this,"role","group"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}initCheckAll(t){let e=F();t._selectable.onChange(e(()=>{t.indeterminate?(this.selectAll(),t.checked=!0,t.indeterminate=!1):t.checked?(this.selectAll(),t.checked=!0,t.indeterminate=!1):(this.deselectAll(),t.checked=!1,t.indeterminate=!1)}));let s=()=>{this._selectable.allAreSelected()?(t.indeterminate=!1,t._selectable.select()):this._selectable.noneAreSelected()?(t.indeterminate=!1,t._selectable.deselect()):t.indeterminate=!0};this._selectable.onChange(e(()=>{s()})),s()}selectAll(){this.walker().filter(t=>!t.use(O).isSelected()).map(t=>t.use(O).select())}deselectAll(){this.walker().filter(t=>t.use(O).isSelected()).map(t=>t.use(O).deselect())}walker(){return H(this,(t,{skip:e,reject:s})=>{if(t instanceof i)return s();if(t.localName!=="ui-checkbox")return e()})}},Ms=class extends W{boot(){let t=this;this.isIndeterminate=!1,this._disableable=new I(this),this.hasAttribute("all")?(this._selectable=new O(t,{ungrouped:!0,toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),queueMicrotask(()=>{this.closest("ui-checkbox-group")?.initCheckAll(this)})):(this._selectable=new O(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this._selectable.onChange(()=>{this.indeterminate&&(this.indeterminate=!1)}),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.isSelected())}),this.value=this._selectable.getValue(),queueMicrotask(()=>{this._submittable.update(this._selectable.isSelected())})),this._detangled=F(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))})),h(t,"role","checkbox"),this._disableable.onInitAndChange(e=>{e?w(t,"tabindex","0"):h(t,"tabindex","0")}),v(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),v(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),v(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&this.closest("form")?.requestSubmit()})),v(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),v(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),ko(t)}get checked(){return this._selectable.isSelected()}set checked(t){let e=this.closest("ui-checkbox-group")?._detangled||(s=>s);this._detangled(e(()=>{t?this._selectable.select():this._selectable.deselect()}))()}get indeterminate(){return this.isIndeterminate}set indeterminate(t){this.isIndeterminate=!!t,this.isIndeterminate?h(this,"data-indeterminate",""):w(this,"data-indeterminate")}};S("checkbox-group",Is);S("checkbox",Ms);M(({css:i})=>i`ui-checkbox-group { display: block; }`);M(({css:i})=>i`ui-checkbox { display: inline-block; user-select: none; }`);function ko(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i._selectable.press()})}var Ps=class extends _{boot(){let t=this.trigger(),e=this.overlay();if(t){if(!e)return console.warn("ui-dropdown: no [popover] overlay found",this)}else return console.warn("ui-dropdown: no trigger element found",this);if(this._disabled=this.hasAttribute("disabled"),this._controllable=new N(this),e._popoverable=new G(e),e._anchorable=new Y(e,{reference:t,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),e._popoverable.onChange(()=>{e._popoverable.getState()?e._anchorable.reposition():e._anchorable.cleanup()}),!this.hasAttribute("hover")){let{lock:r,unlock:n}=J(e._popoverable.el);e._popoverable.onChange(()=>{e._popoverable.getState()?r():n()})}this._controllable.initial(r=>e._popoverable.setState(r)),this._controllable.getter(()=>e._popoverable.getState());let s=F();if(this._controllable.setter(r=>e._popoverable.setState(r)),e._popoverable.onChange(s(()=>this._controllable.dispatch())),this.hasAttribute("hover")){let r=()=>{};de(t,e,{gain(){e._popoverable.setState(!0),r=v(document,"scroll",()=>{e._popoverable.getState()&&(e._popoverable.setState(!1),r())}).off},lose(){e._popoverable.setState(!1),r()},focusable:!1})}v(t,"click",()=>e._popoverable.toggle()),e._popoverable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(w(this,"data-open"),w(t,"data-open"),w(e,"data-open")),e._popoverable.onChange(()=>{e._popoverable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(w(this,"data-open"),w(t,"data-open"),w(e,"data-open"))});let a=R(e,"dropdown");h(t,"aria-haspopup","true"),h(t,"aria-controls",a),h(t,"aria-expanded",e._popoverable.getState()?"true":"false"),e._popoverable.onChange(()=>{h(t,"aria-expanded",e._popoverable.getState()?"true":"false")}),e._popoverable.onChange(()=>{setTimeout(()=>e._popoverable.getState()?e.onPopoverShow?.():e.onPopoverHide?.())})}unmount(){if(this.overlay()?._popoverable?.getState()&&!this.hasAttribute("hover")){let{unlock:t}=J();t()}}trigger(){return this.querySelector("button,ui-button,a")}overlay(){return this.lastElementChild?.matches("[popover]")&&this.lastElementChild}};S("dropdown",Ps);var Ls=class extends _{boot(){this.type="file"}mount(){this._disableable=new I(this),this._files=[],this.inputEl=this.querySelector('input[data-slot="receiver"]'),this.inputEl&&(this.forwardAcceptAttribute(),this.configureSRInput()),this.triggerEl=this.findTriggerElement(),this.rootEl=this.closest("ui-file-upload");let t=this.hasAttribute("multiple")||this.rootEl&&this.rootEl.hasAttribute("multiple");t&&h(this.inputEl,"multiple",""),Object.defineProperty(this,"multiple",{get(){return t}}),Object.defineProperty(this,"files",{get(){return this._files},set(e){e===null||e===""?this._files=[]:Array.isArray(e)?this._files=e:e instanceof FileList?this._files=Array.from(e):this._files=[e],this.dispatchEvent(new Event("change",{bubbles:!0}))}}),this.observer=new MutationObserver(()=>{this.ensureInputsExist()}),this.observer.observe(this,{childList:!0}),this.style.setProperty("--flux-file-upload-progress","0%"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'"),v(this,"livewire-upload-start",()=>{h(this,"data-loading",""),this.disabled=!0,this.style.setProperty("--flux-file-upload-progress","0"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'")}),v(this,"livewire-upload-finish",()=>{w(this,"data-loading"),this.disabled=!1,this.style.setProperty("--flux-file-upload-progress","100%"),this.style.setProperty("--flux-file-upload-progress-as-string","'100%'")}),v(this,"livewire-upload-cancel",()=>{w(this,"data-loading"),this.disabled=!1,this.style.setProperty("--flux-file-upload-progress","0%"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'")}),v(this,"livewire-upload-error",()=>{w(this,"data-loading"),this.disabled=!1,this.style.setProperty("--flux-file-upload-progress","0%"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'")}),v(this,"livewire-upload-progress",e=>{let s=e.detail.progress;this.style.setProperty("--flux-file-upload-progress",`${s}%`),this.style.setProperty("--flux-file-upload-progress-as-string",`'${s}%'`)}),this._disableable.onInitAndChange(e=>{this.inputEl.disabled=e,this.triggerEl&&(e?w(this.triggerEl,"tabindex"):h(this.triggerEl,"tabindex","0"))}),v(this.inputEl,"click",e=>{e.stopPropagation(),this.clear()}),this.initDragListeners(),this.initClickListeners()}addFiles(t){let e=Array.from(t);this.multiple?this._files=[...this._files,...e]:this._files=e.slice(0,1),this.dispatchEvent(new Event("change",{bubbles:!0}))}removeFile(t){this._files=this._files.filter((e,s)=>s!==t),this.dispatchEvent(new Event("change",{bubbles:!0}))}clear(){this.inputEl.value=null,this._files=[]}forwardAcceptAttribute(){this.hasAttribute("accept")&&this.inputEl.setAttribute("accept",this.getAttribute("accept"))}configureSRInput(){this.inputEl.tabIndex=-1,Object.assign(this.inputEl.style,{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"})}findTriggerElement(){return Array.from(this.children).find(e=>!e.hasAttribute("data-slot"))}ensureInputsExist(){(!this.inputEl||!this.querySelector('input[data-slot="receiver"]'))&&(this.inputEl=this.querySelector('input[data-slot="receiver"]'),this.inputEl&&(this.configureSRInput(),(this.hasAttribute("multiple")||this.rootEl&&this.rootEl.hasAttribute("multiple"))&&h(this.inputEl,"multiple",""),this.inputEl.disabled=this.disabled)),(!this.triggerEl||!this.contains(this.triggerEl))&&(this.triggerEl=this.findTriggerElement(),this.triggerEl&&!this.disabled?h(this.triggerEl,"tabindex","0"):this.triggerEl&&this.disabled&&w(this.triggerEl,"tabindex"))}initDragListeners(){this.triggerEl&&(v(this.triggerEl,"dragenter",this._disableable.enabled(t=>{t.preventDefault(),h(this,"data-dragging",""),this.clear()})),v(this.triggerEl,"dragover",this._disableable.enabled(t=>{t.preventDefault(),h(this,"data-dragging","")})),v(this.triggerEl,"drop",this._disableable.enabled(t=>{t.preventDefault(),w(this,"data-dragging"),t.dataTransfer.files&&t.dataTransfer.files.length>0&&this.addFiles(t.dataTransfer.files)})),v(this.triggerEl,"dragleave",t=>{w(this,"data-dragging")}))}initClickListeners(){this.triggerEl&&(v(this.triggerEl,"click",this._disableable.disabled(t=>{t.preventDefault(),t.stopPropagation()}),{capture:!0}),v(this.triggerEl,"click",this._disableable.enabled(t=>{t.preventDefault(),this.inputEl.click()})),v(this.inputEl,"change",t=>{t.stopPropagation(),this.inputEl.files&&this.inputEl.files.length>0&&!this.disabled&&this.addFiles(this.inputEl.files)}),v(this.triggerEl,"keydown",this._disableable.enabled(t=>{["Enter"," "].includes(t.key)&&t.preventDefault(),["Enter"].includes(t.key)&&this.inputEl.click()})),v(this.triggerEl,"keyup",this._disableable.enabled(t=>{t.key===" "&&(t.preventDefault(),this.inputEl.click())})),v(this.triggerEl,"focus",this._disableable.enabled(()=>{h(this,"data-focus","")})),v(this.triggerEl,"blur",()=>{w(this,"data-focus")}))}};S("file-upload",Ls);var L=class{static SELECTION=1;static ACTIVATION=2;static VIEW_CHANGE=3},Ee=class{constructor(){this.subscribers=[],this.subscriberTypes=new WeakMap}subscribe(t,e){let s=Array.isArray(t)?t:[t];this.subscribers.push(e),this.subscriberTypes.has(e)||this.subscriberTypes.set(e,[]),this.subscriberTypes.get(e).push(...s)}notify(t){let e=Array.isArray(t)?t:[t];this.subscribers.forEach(s=>{e.length&&!this.subscriberTypes.get(s)?.some(a=>e.includes(a))||s()})}};var Z=class{static SINGLE="single";static MULTIPLE="multiple";static RANGE="range"},Di=class i{constructor(t,e,s){this.config=e,this.observable=s,this.selection=t,this.active=null,this.displayResolver=a=>a}setDisplayResolver(t){this.displayResolver=t}select(t){let e=this.selection;this.selection=this.selection.select(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(L.SELECTION):this.observable.notify(L.ACTIVATION)}activate(t){let e=this.active;t?this.active=t:this.active=null,this.selection.activate(t),e!==this.active&&this.observable.notify(L.ACTIVATION)}setValue(t){let e=this.selection;this.selection=this.createSelectionFromValue(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(L.SELECTION):this.observable.notify(L.ACTIVATION)}getValue(){return this.selection.value()}isSelectable(t){return this.selection.selectable(t,this.config)}contains(...t){return this.selection.contains(...t)}hasSelection(){return this.selection.hasSelection()}lowerBound(...t){return this.selection.lowerBound(...t)}upperBound(...t){return this.selection.upperBound(...t)}display(...t){return this.displayResolver(this.selection.display(...t))}attributes(...t){return this.selection.attributes(...t)}createSelectionFromValue(t,e){if(e.mode===Z.MULTIPLE){let s=t?t.map(a=>y.fromIsoDateString(a)):[];return new Mi(s)}else if(e.mode===Z.RANGE){let{start:s,end:a,preset:r}=t||{};return r&&Li[r]&&r!=="custom"?new Pi(r,e):!s&&!a?new $e:a?new Ye(y.fromIsoDateString(s),y.fromIsoDateString(a)):new $t(y.fromIsoDateString(s))}else return t?new He(y.fromIsoDateString(t)):new Ue}static createFromValueStringAttribute(t,e,s){let a=i.createSelectionFromValueStringAttribute(t,e);return new i(a,e,s)}static createSelectionFromValueStringAttribute(t,e){if(e.mode===Z.MULTIPLE){let s=t?t.split(",").map(a=>a.trim()).map(a=>y.fromIsoDateString(a)):[];return new Mi(s)}else if(e.mode===Z.RANGE){if(!t)return new $e;let[s,a]=t.split("/").map(r=>r.trim());return!a&&s&&Li[s]&&s!=="custom"?new Pi(s,e):(s=y.fromIsoDateString(s),a?(a=y.fromIsoDateString(a),new Ye(s,a)):new $t(s))}else return t?new He(y.fromIsoDateString(t)):new Ue}},Ii=class{constructor(t,e){this.selectable=t,this.observable=e,this._selection=this.selectable.selection,this.selectable.observable.subscribe(L.SELECTION,()=>{this._blockSync()||this.sync()}),this._blockSync=()=>{}}blockSyncIf(t){this._blockSync=t}sync(){this._selection=this.selectable.selection,this.observable.notify(L.SELECTION)}setValue(t){return this.selectable.setValue(t)}getValue(){return this._selection.value()}isSelectable(t){return this._selection.selectable(t,this.config)}hasSelection(){return this._selection.hasSelection()}display(...t){return this.selectable.displayResolver(this._selection.display(...t))}},Nt=class{contains(){}shouldNotify(t){return!0}hasSelection(){return!1}lowerBound(t){return ze(t)}upperBound(t){return this.lowerBound(t)}selectable(t,e){return!0}display(){}value(){}activate(){}attributes(t,e){this.contains(e)?(h(t,"data-selected",""),h(t,"aria-selected","true")):(w(t,"data-selected"),h(t,"aria-selected","false"))}},Ue=class i extends Nt{shouldNotify(t){return!(t instanceof i)}hasSelection(){return!1}contains(){return!1}select(t){return new He(t)}lowerBound(t){return ze(t)}display(t){return""}value(){return null}},He=class i extends Nt{constructor(t){super(),this._date=t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._date.isSameDay(t._date))}select(t){return this._date.isSameDay(t)?new Ue:new i(t)}contains(t){return this._date.isSameDay(t)}lowerBound(){return this._date}display(t){return this._date.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})}value(){return this._date.toIsoDateString()}},Mi=class i extends Nt{constructor(t){super(),this._dates=t}hasSelection(){return this._dates.length>0}shouldNotify(t){return!(t instanceof i&&this._dates.every(e=>t._dates.includes(e))&&t._dates.every(e=>this._dates.includes(e)))}select(t){return this._dates.some(s=>s.isSameDay(t))?new i(this._dates.filter(s=>!s.isSameDay(t))):new i([...this._dates,t])}contains(t){return this._dates.some(e=>e.isSameDay(t))}lowerBound(t){return this._dates.sort((s,a)=>s.isBefore(a)?-1:1)[0]||ze(t)}upperBound(t){let e=this._dates.sort((s,a)=>s.isBefore(a)?-1:1);return e[e.length-1]||ze(t)}display(t){return this._dates.map(e=>e.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})).join(", ")}value(){return this._dates.map(t=>t.toIsoDateString())}},$e=class i extends Nt{constructor(){super()}hasSelection(){return!1}shouldNotify(t){return!(t instanceof i||t instanceof $t)}select(t){return new $t(t)}contains(){return!1}lowerBound(t){return ze(t)}display(t){return""}value(){return null}},$t=class i extends Nt{constructor(t){super(),this._start=t,this._endPreview=null}hasSelection(){return!1}shouldNotify(t){return!1}select(t,e){return t.isBefore(this._start)?new i(t):t.isSameDay(this._start)&&e.minRange>1?new $e:new Ye(this._start,t)}activate(t){this._endPreview=t}selectable(t,e){if(e.maxRange&&(t.isBefore(this._start)||this._start.addDays(e.maxRange-1).isBefore(t)))return!1;if(e.minRange){if(this._start.isSameDay(t))return!0;if(t.isBefore(this._start)||this._start.addDays(e.minRange-1).isAfter(t))return!1}let s=e.unavailable.filter(r=>r.isAfter(this._start)).sort((r,n)=>r.toDate()-n.toDate())[0],a=e.unavailable.filter(r=>r.isBefore(this._start)).sort((r,n)=>n.toDate()-r.toDate())[0];return t.isAfter(this._start)?!s||t.isBefore(s):t.isBefore(this._start)?!a||t.isAfter(a):!0}contains(t){return t.isSameDay(this._start)}lowerBound(){return this._start}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).format(this._start.getDate())+" -"}value(){return null}attributes(t,e){this._endPreview&&e.isBetween(this._start,this._endPreview)?(h(t,"data-in-range",""),h(t,"aria-selected","true")):(w(t,"data-in-range"),w(t,"aria-selected")),e.isSameDay(this._start)?h(t,"data-selected",""):w(t,"data-selected"),e.isSameDay(this._start)?h(t,"aria-selected","true"):w(t,"aria-selected"),e.isSameDay(this._start)?h(t,"data-start",""):w(t,"data-start"),e.isSameDay(this._endPreview)?h(t,"data-end-preview",""):w(t,"data-end-preview")}},Ye=class i extends Nt{constructor(t,e){super(),this._start=t,this._end=e}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._start.isSameDay(t._start)&&this._end.isSameDay(t._end))}select(t){return new $t(t)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._start}upperBound(){return this._end}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString()}}attributes(t,e){e.isSameDay(this._start)||e.isSameDay(this._end)?h(t,"data-selected",""):w(t,"data-selected"),e.isSameDay(this._start)?h(t,"data-start",""):w(t,"data-start"),e.isSameDay(this._end)?h(t,"data-end",""):w(t,"data-end"),this.contains(e)?(h(t,"data-in-range",""),h(t,"aria-selected","true")):(w(t,"data-in-range"),w(t,"aria-selected"))}},Pi=class i extends Nt{constructor(t,e){super(),this._preset=t,this._config=e}get _start(){let[t]=Li[this._preset](this._config);return this._config.min&&t.isBefore(this._config.min)?this._config.min:t}get _end(){let[,t]=Li[this._preset](this._config);return this._config.max&&t.isAfter(this._config.max)?this._config.max:t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._preset===t._preset)}select(t){return new $t(t,this._config)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._preset==="allTime"?y.today():this._start}upperBound(){return this._preset==="allTime"?y.today():y.today()}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString(),preset:this._preset}}attributes(t,e){e.isSameDay(this._start)||e.isSameDay(this._end)?h(t,"data-selected",""):w(t,"data-selected"),e.isSameDay(this._start)?h(t,"data-start",""):w(t,"data-start"),e.isSameDay(this._end)?h(t,"data-end",""):w(t,"data-end"),this.contains(e)?(h(t,"data-in-range",""),h(t,"aria-selected","true")):(w(t,"data-in-range"),w(t,"aria-selected"))}};function ze(i=null){return typeof i=="function"?i():i}var Li={today:()=>[y.today(),y.today()],yesterday:()=>{let i=y.today().incrementDays(-1);return[i,i]},thisWeek:i=>{let t=y.today().getCopy().incrementDays(i.startDay-y.today().getDayOfWeek()),e=t.incrementDays(6);return[t,e]},lastWeek:i=>{let t=y.today().incrementDays(i.startDay-(y.today().getDayOfWeek()+7)),e=t.incrementDays(6);return[t,e]},last7Days:()=>{let i=y.today();return[y.today().incrementDays(-6),i]},thisMonth:()=>{let i=y.fromParts(y.today().getYear(),y.today().getMonth(),1),t=y.fromParts(y.today().getYear(),y.today().getMonth(),y.today().getDaysInMonth());return[i,t]},lastMonth:()=>{let i=y.today().getMonth()-1,t=y.today().getYear();i<1&&(i+=12,t--);let e=y.fromParts(t,i,1),s=y.fromParts(t,i,e.getDaysInMonth());return[e,s]},thisQuarter:()=>{let t=Math.floor((y.today().getMonth()-1)/3)*3+1,e=t+2,s=y.fromParts(y.today().getYear(),t,1),a=y.fromParts(y.today().getYear(),e,1),r=y.fromParts(y.today().getYear(),e,a.getDaysInMonth());return[s,r]},lastQuarter:()=>{let t=Math.floor((y.today().getMonth()-4)/3)*3+1,e=t+2,s=y.today().getYear();t<1&&(t+=12,e+=12,s--);let a=y.fromParts(s,t,1),r=y.fromParts(s,e,1),n=y.fromParts(s,e,r.getDaysInMonth());return[a,n]},thisYear:()=>{let i=y.fromParts(y.today().getYear(),1,1),t=y.fromParts(y.today().getYear(),12,31);return[i,t]},lastYear:()=>{let i=y.today().getYear()-1,t=y.fromParts(i,1,1),e=y.fromParts(i,12,31);return[t,e]},last14Days:()=>{let i=y.today();return[y.today().incrementDays(-13),i]},last30Days:()=>{let i=y.today();return[y.today().incrementDays(-29),i]},last3Months:()=>{let i=y.today(),t=y.today().getDay()+1,e=y.today().getMonth()-3,s=y.today().getYear();return e<1&&(e+=12,s--),[y.fromParts(s,e,t),i]},last6Months:()=>{let i=y.today(),t=y.today().getDay()+1,e=y.today().getMonth()-6,s=y.today().getYear();return e<1&&(e+=12,s--),[y.fromParts(s,e,t),i]},yearToDate:()=>{let i=y.fromParts(y.today().getYear(),1,1),t=y.today();return[i,t]},allTime:i=>{if(!i.min)throw new Error("Min date is required for allTime preset");let t=i.min,e=y.today();return[t,e]}};var Oi=class{constructor(t,e,s,a){this.month=t,this.year=e,this.config=s,this.observable=a}generateOffsetState(t){return new Os(this,t)}canNavigatePrevious(){let[t,e]=new y(this.year,this.month).addMonths(-1).toParts();return!(this.config.min&&y.fromParts(t,e).isBefore(y.firstDayOfMonth(this.config.min)))}canNavigateNext(){let[t,e]=new y(this.year,this.month).addMonths(this.config.months).toParts();return!(this.config.max&&y.fromParts(t,e).isAfter(this.config.max))}nextMonth(){this.canNavigateNext()&&this.adjustMonth(1)}previousMonth(){this.adjustMonth(-1)}setMonth(t){t&&(this.isWithinMinAndMax(t,this.year)&&(this.month=t),this.observable.notify(L.VIEW_CHANGE))}setYear(t){t&&(this.isWithinMinAndMax(this.month,t)&&(this.year=t),this.observable.notify(L.VIEW_CHANGE))}setDate(t){t&&(this.isWithinMinAndMax(t.getMonth(),t.getYear())&&(this.month=t.getMonth(),this.year=t.getYear()),this.observable.notify(L.VIEW_CHANGE))}isWithinMinAndMax(t,e){return!(this.config.min&&y.fromParts(e,t).isBefore(y.firstDayOfMonth(this.config.min))||this.config.max&&y.fromParts(e,t).isAfter(this.config.max))}adjustMonth(t){let[e,s]=new y(this.year,this.month).addMonths(t).toParts();this.config.min&&y.fromParts(e,s).isBefore(y.firstDayOfMonth(this.config.min))||this.config.max&&y.fromParts(e,s).isAfter(this.config.max)||([this.month,this.year]=[s,e],this.observable.notify(L.VIEW_CHANGE))}},Os=class{constructor(t,e=0){this.offset=e,this.viewState=t}get month(){let[,t]=new y(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}get year(){let[t]=new y(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}};var Ni=class{constructor(t,e,s){this.min=s.min,this.max=s.max,this.unavailable=s.unavailable,this.selectable=t,this.metadata=e}isBetweenMinMax(t){return t.isBetween(this.min,this.max)}isUnavailable(t){return this.unavailable.some(e=>e.isSameDay(t))||this.metadata.unavailable(t)}isBlocked(t){return!this.selectable.isSelectable(t)}isValid(t){return this.isBetweenMinMax(t)&&!this.isUnavailable(t)&&!this.isBlocked(t)}};var Fi=class{constructor(t){this.metadata={},this.observable=t}resetFromJSON(t){this.reset(JSON.parse(t))}appendFromJSON(t){this.append(JSON.parse(t))}append(t){this.metadata={...this.metadata,...t},this.observable.notify(L.VIEW_CHANGE)}reset(t){this.metadata=t,this.observable.notify(L.VIEW_CHANGE)}get(t){return this.metadata[t.toIsoDateString()]}has(t){return this.metadata[t.toIsoDateString()]!==void 0}subtext(t){return this.metadata[t.toIsoDateString()]?.subtext}details(t){return this.metadata[t.toIsoDateString()]?.details}variant(t){return this.metadata[t.toIsoDateString()]?.variant}unavailable(t){return!!this.metadata[t.toIsoDateString()]?.unavailable}};var Ns=class extends _{boot(){let t=this.closest("ui-date-picker")||this;this.querySelectorAll("[data-appended]").forEach(o=>o.remove());let[e,s]=ja(t,"months",1);this.observable=new Ee;let a=t.hasAttribute("locale")?t.getAttribute("locale"):hi();this.config={mode:t.getAttribute("mode")==="range"?Z.RANGE:t.hasAttribute("multiple")?Z.MULTIPLE:Z.SINGLE,months:parseInt(e),min:this.getMinDate(t),max:this.getMaxDate(t),maxRange:t.hasAttribute("max-range")?parseInt(t.getAttribute("max-range")):null,minRange:t.hasAttribute("min-range")?parseInt(t.getAttribute("min-range")):null,startDay:t.hasAttribute("start-day")?parseInt(t.getAttribute("start-day")):(new Intl.Locale(a).getWeekInfo?.()?.firstDay??new Intl.Locale(a).weekInfo?.firstDay??7)%7,unavailable:this.getUnavailableDates(t),locale:a,fixedWeeks:t.hasAttribute("fixed-weeks")?6:null},s(o=>{this.config.months=parseInt(o),this.observable.notify(L.VIEW_CHANGE)}),this.selectable=Di.createFromValueStringAttribute(t.getAttribute("value"),this.config,this.observable),this.metadata=new Fi(this.observable),this.validator=new Ni(this.selectable,this.metadata,this.config);let r=t.hasAttribute("open-to")&&(t.hasAttribute("force-open-to")||this.selectable.lowerBound()===null)?this.getOpenTo(t):this.selectable.lowerBound(()=>y.today());if(this.viewState=new Oi(r.getMonth(),r.getYear(),this.config,this.observable),this._disableable=new I(this,{disableWithParent:!1}),!this.hasAttribute("static")){let{enable:o,disable:u}=Co(this,this.selectable,this.viewState,this.validator);this._disableable.onInitAndChange(c=>{c?u():o()})}this._controllable=new N(this,{bubbles:!0}),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let n=F();this._controllable.initial(o=>o&&this.selectable.setValue(o)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(n(o=>{this.selectable.setValue(o)})),this.observable.subscribe(L.SELECTION,n(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(L.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(L.SELECTION,()=>{this.anchorSelection()}),this.observable.subscribe(L.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))}),queueMicrotask(()=>{this.closest("ui-date-picker")?.bootWithCalendar(this)}),new MutationObserver(o=>{o.forEach(u=>{["unavailable","max","min"].includes(u.attributeName)&&(this.config.unavailable=this.getUnavailableDates(t),this.config.min=this.getMinDate(t),this.config.max=this.getMaxDate(t),this.validator.unavailable=this.config.unavailable,this.validator.min=this.config.min,this.validator.max=this.config.max,this.observable.notify(L.VIEW_CHANGE))})}).observe(t,{attributes:!0})}getOpenTo(t){if(!t.hasAttribute("open-to"))return;let e=t.getAttribute("open-to");return e=e==="today"?y.today():y.fromIsoDateString(e),this.validator.isBetweenMinMax(e)?e:this.config.min}navigateNext(){this.viewState.nextMonth()}navigatePrevious(){this.viewState.previousMonth()}anchorSelection(){let t=document.activeElement;this.contains(t)&&t.closest("[data-date]")!==null||this.viewState.setDate(this.selectable.lowerBound(y.today()))}appendMetadata(t){this.metadata.append(t)}resetMetadata(t={}){this.metadata.reset(t)}visibleDateRange(){return[y.fromParts(this.viewState.year,this.viewState.month,1).toIsoDateString(),y.fromParts(this.viewState.year,this.viewState.month+1,0).toIsoDateString()]}getUnavailableDates(t){return t.hasAttribute("unavailable")?t.getAttribute("unavailable").split(",").map(e=>y.fromIsoDateString(e.trim())):[]}getMinDate(t){return t.hasAttribute("min")?t.getAttribute("min")==="today"?y.today():y.fromIsoDateString(t.getAttribute("min")):null}getMaxDate(t){return t.hasAttribute("max")?t.getAttribute("max")==="today"?y.today():y.fromIsoDateString(t.getAttribute("max")):null}},Fs=class extends _{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,fe(this,()=>this._disableable.isDisabled(),()=>t.navigatePrevious());let e=()=>{t.viewState.canNavigatePrevious()&&!this._disableable.isDisabled()?w(this,"disabled"):h(this,"disabled","")};t.observable.subscribe(L.VIEW_CHANGE,e),this._disableable.onInitAndChange(()=>{e()})}},Vs=class extends _{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,fe(this,()=>this._disableable.isDisabled(),()=>t.navigateNext());let e=()=>{t.viewState.canNavigateNext()&&!this._disableable.isDisabled()?w(this,"disabled"):h(this,"disabled","")};t.observable.subscribe(L.VIEW_CHANGE,e),this._disableable.onInitAndChange(()=>{e()})}},Rs=class extends _{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.validator=t.validator;let e=this.querySelector("select"),s=this.hasAttribute("display")?this.getAttribute("display"):"long";if(e)this.renderSelectOptions(e,s),e.value=this.viewState.month,e.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setMonth(parseInt(e.value))})),t.observable.subscribe(L.VIEW_CHANGE,()=>{this.renderSelectOptions(e,s),e.value=this.viewState.month}),this._disableable.onInitAndChange(a=>{a?h(e,"disabled",""):w(e,"disabled")});else{let a=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{month:this.hasAttribute("display")?this.getAttribute("display"):"long",timeZone:"UTC"}).format(new y(this.offsetState.year,this.offsetState.month).getDate());a(),this.viewState.observable.subscribe(L.VIEW_CHANGE,()=>a())}}renderSelectOptions(t,e){let a=Array.from({length:12},(r,n)=>n+1).map(r=>{let n=new y(this.viewState.year,r),l=new y(this.viewState.year,r+1,0);return!this.validator.isBetweenMinMax(n)&&!this.validator.isBetweenMinMax(l)?null:{month:r,label:new Intl.DateTimeFormat(this.config.locale,{month:e,timeZone:"UTC"}).format(new y(2024,r).getDate())}}).filter(Boolean);j(t.querySelector("template"),r=>{if(a.length===0){let n=this.viewState.month,l=new Intl.DateTimeFormat(this.config.locale,{month:e,timeZone:"UTC"}).format(new y(2024,n).getDate()),o=r({slots:{default:l}});return o.setAttribute("value",n),o}return a.map(n=>{let l=r({slots:{default:n.label}});return l.setAttribute("value",n.month),l})})}},qs=class extends _{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.numberOfPastYears=100,this.numberOfFutureYears=10,this.validator=t.validator;let e=this.querySelector("select");if(e)this.config.min&&(this.numberOfPastYears=this.viewState.year-this.config.min.getYear()),this.config.max&&(this.numberOfFutureYears=this.config.max.getYear()-this.viewState.year),this.renderSelectOptions(e),e.value=this.viewState.year,e.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setYear(parseInt(e.value))})),t.observable.subscribe(L.VIEW_CHANGE,()=>{this.yearIsLessThanMinimum(this.viewState.year)&&(this.numberOfPastYears+=100,this.renderSelectOptions(e)),this.yearIsGreaterThanMaximum(this.viewState.year)&&(this.numberOfFutureYears+=10,this.renderSelectOptions(e)),e.value=this.viewState.year}),this._disableable.onInitAndChange(s=>{s?h(e,"disabled",""):w(e,"disabled")});else{let s=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{year:this.hasAttribute("display")?this.getAttribute("display"):"numeric",timeZone:"UTC"}).format(new y(this.offsetState.year,this.offsetState.month).getDate());s(),this.viewState.observable.subscribe(L.VIEW_CHANGE,()=>s())}}yearIsLessThanMinimum(t){return t<this.minimumYear()}yearIsGreaterThanMaximum(t){return t>this.maximumYear()}minimumYear(){return new Date().getFullYear()-this.numberOfPastYears}maximumYear(){return new Date().getFullYear()+this.numberOfFutureYears}renderSelectOptions(t){let e=new Date().getFullYear(),a=Array.from({length:this.numberOfPastYears+this.numberOfFutureYears+1},(r,n)=>e-this.numberOfPastYears+n).map(r=>{let n=new y(r,1),l=new y(r,12,31);return!this.validator.isBetweenMinMax(n)&&!this.validator.isBetweenMinMax(l)?null:r}).filter(Boolean);j(t.querySelector("template"),r=>{if(a.length===0){let n=this.viewState.year;return r({slots:{default:n}})}return a.map(n=>r({slots:{default:n}}))})}},Bs=class extends _{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.selectable=t.selectable,this.observable=t.observable,this.metadata=t.metadata,this.validator=t.validator,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.monthEls=[],this.renderMonths();let e=()=>this.monthEls.forEach(r=>Ir(r,this.config,r.offsetState,this.metadata)),s=()=>this.monthEls.forEach(r=>Mr(r,this._disableable.isDisabled(),this.config,r.offsetState,this.selectable,this.validator));e(),s();let a=this.config.months;this.viewState.observable.subscribe(L.VIEW_CHANGE,()=>{a!==this.config.months&&(a=this.config.months,this.renderMonths()),e(),s()}),this.observable.subscribe([L.SELECTION,L.ACTIVATION],()=>{s()}),this._disableable.onChange(()=>s())}renderMonths(){let t=this.querySelector('template:not([name]), template[name="month"]');j(t,e=>{let s=Array.from({length:this.config.months}).map((a,r)=>r);return this.monthEls=s.map(a=>{let r=this.viewState.generateOffsetState(a),n=e({attrs:{"data-month":""}});n.offsetState=r;let l=n.querySelector("thead")?.set;return h(n,"role","grid"),l&&h(l,"aria-hidden","true"),n}),this.monthEls})}},Ws=class extends _{boot(){let t=this.closest("ui-calendar, ui-date-picker");this._disableable=t._disableable,this.behavior=this.hasAttribute("behavior")?this.getAttribute("behavior"):"auto",t.hasAttribute("static")&&(this.behavior="none"),fe(this,()=>this._disableable.isDisabled(),()=>this.navigateAndSelectToday()),this._disableable.onInitAndChange(s=>{s?h(this,"disabled",""):w(this,"disabled")});let e=this.querySelector("template");e&&j(e,s=>s({slots:{default:y.today().getDay()}}))}navigateAndSelectToday(){let t=this.closest("ui-calendar, ui-date-picker"),e=()=>{let a=t.viewState,r=y.today();return a.year===r.getYear()&&a.month===r.getMonth()};(this.behavior==="select"||this.behavior==="auto"&&e())&&(t.config.mode===Z.RANGE?t.selectable.setValue({start:y.today().toIsoDateString(),end:y.today().toIsoDateString()}):t.config.mode===Z.MULTIPLE?t.selectable.setValue([y.today().toIsoDateString()]):t.selectable.setValue(y.today().toIsoDateString())),t.viewState.setMonth(y.today().getMonth()),t.viewState.setYear(y.today().getYear())}},Us=class extends _{boot(){let t=this.closest("ui-calendar");if(this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.config.mode!==Z.RANGE)throw"Presets can only be used with range calendars";let e=this.firstElementChild;if(e){let s=a=>{if(e._selectable instanceof Q){let r=e._selectable.findByValue(a);return r?r?.el?.textContent:null}else if(e instanceof HTMLSelectElement)return e.querySelector(`option[value="${a}"]`)?.textContent;return null};this.selectable.setDisplayResolver(a=>{let r=this.selectable.getValue()?.preset||"";if(r){let n=s(r);if(n)return n}return a}),e.value=this.selectable.getValue()?.preset||"custom",e.addEventListener("change",this._disableable.enabled(()=>{if(["","custom"].includes(e.value)){let{start:a,end:r}=this.selectable.getValue()||{};a&&r&&this.selectable.setValue({start:a,end:r})}else this.selectable.setValue({preset:e.value})})),this.observable.subscribe(L.SELECTION,()=>{let a=this.selectable.getValue();e.value=a?.preset||"custom"}),this._disableable.onInitAndChange(a=>{a?h(e,"disabled",""):w(e,"disabled")})}}},Hs=class extends _{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset);let[e,s]=this.querySelectorAll("input");this.config.mode===Z.RANGE?zs(e,s,t):Ys(e,t)}};M(({css:i})=>i`
    ui-calendar-preset,
    ui-calendar-previous,
    ui-calendar-next {
        display: block;
        user-select: none;
    }
`);S("calendar",Ns);S("calendar-today",Ws);S("calendar-presets",Us);S("calendar-previous",Fs);S("calendar-inputs",Hs);S("calendar-next",Vs);S("calendar-months",Bs);S("calendar-month",Rs);S("calendar-year",qs);function Co(i,t,e,s){let a=!1,r=i.hasAttribute("readonly");return v(i,"click",n=>{if(a||r)return;let l=n.target.closest("[data-date]");if(!l)return;let o=_e(l);s.isValid(o)&&t.select(o)}),v(i,"mouseover",n=>{if(a||r)return;let l=n.target.closest("[data-date]");if(!l)return;let o=_e(l);s.isValid(o)&&t.activate(o)}),v(i,"mouseout",()=>{a||r||t.activate(null)}),v(i,"focusin",n=>{if(a||r)return;let l=n.target.closest("[data-date]");if(!l)return;let o=_e(l);s.isValid(o)&&t.activate(o)}),v(i,"keydown",n=>{if(a)return;let l=n.target.closest("[data-date]");if(!l)return;let o=!0,u,c=_e(l),d=m=>{let g=c.getCopy(),p=Math.sign(m),A=366;for(g.setDay(g.getDay()+m);!s.isValid(g)&&A>0;)g.setDay(g.getDay()+p),A--;c=g};switch(n.key){case"ArrowRight":u="forward",d(1);break;case"ArrowLeft":u="backward",d(-1);break;case"ArrowUp":u="backward",d(-7);break;case"ArrowDown":u="forward",d(7);break;case"Home":e.previousMonth();break;case"End":e.nextMonth();break;case"PageUp":n.shiftKey,e.previousMonth();break;case"PageDown":n.shiftKey,e.nextMonth();break;default:o=!1}if(o){n.preventDefault(),n.stopPropagation();let m=Array.from(i.querySelectorAll("[data-date]")).find(g=>_e(g).isSameDay(c));!m&&u&&(u==="forward"?e.nextMonth():e.previousMonth(),m=Array.from(i.querySelectorAll("[data-date]")).find(g=>_e(g).isSameDay(c))),m?.querySelector("button,ui-button")?.focus()}}),{enable(){a=!1},disable(){a=!0}}}function _e(i){return!i||!i.hasAttribute("data-date")?null:y.fromIsoDateString(i.getAttribute("data-date"))}function Ys(i,t){$s(i);let e=F(),s=e(()=>{let a=t.selectable.getValue();i.value=a||""});t.observable.subscribe(L.SELECTION,s),s(),i.addEventListener("change",e(()=>{let a=i.valueAsDate;a?(t.selectable.setValue(y.fromLocalDate(a).toIsoDateString()),t.viewState.setDate(y.fromLocalDate(a))):t.selectable.setValue("")}))}function zs(i,t,e){$s(i),$s(t);let s=F(),a=s(()=>{let{start:n,end:l}=e.selectable.getValue()||{};i.value=n||"",t.value=l||""}),r=s(()=>{let n=i.valueAsDate,l=t.valueAsDate;n&&l?e.selectable.setValue({start:y.fromLocalDate(n).toIsoDateString(),end:y.fromLocalDate(l).toIsoDateString()}):n?e.selectable.setValue({start:y.fromLocalDate(n).toIsoDateString(),end:null}):e.selectable.setValue({start:null,end:null})});e.observable.subscribe(L.SELECTION,a),a(),i.addEventListener("change",r),t.addEventListener("change",r)}function $s(i){v(i,"change",t=>t.stopPropagation()),v(i,"input",t=>t.stopPropagation())}var js=class extends W{bootWithCalendar(t){let e=t.config.mode===Z.RANGE;this.calendar=t,this._disableable=new I(this),this._disableable.onInitAndChange(u=>{this.calendar.disabled=u}),this.observable=new Ee,this.selectable=new Ii(this.calendar.selectable,this.observable),this.viewState=this.calendar.viewState,this.querySelector("ui-selected-date")?.bootWithCalendar(),this.querySelector("ui-date-picker-select")?.bootWithCalendar();let s=this.querySelector("dialog");if(!s)return;let a=this.querySelector("input");a=s?.contains(a)?null:a;let r=Array.from(this.querySelectorAll("input")).find(u=>u!==a);r=s?.contains(r)?null:r,a&&a.addEventListener("click",u=>u.preventDefault()),r&&r.addEventListener("click",u=>u.preventDefault());let n=this.querySelector("button,ui-button");n=s?.contains(n)?null:n;let l=R(this.calendar,"calendar");if(this.triggerEl=a||n,!this.triggerEl)return;if(h(this.triggerEl,"role","combobox"),h(this.triggerEl,"aria-controls",l),this._disableable.onInitAndChange(u=>{u?h(this.triggerEl,"disabled",""):w(this.triggerEl,"disabled")}),this._dialogable=new pe(s,{clickOutside:!this.hasAttribute("disable-click-outside"),triggers:[n,a,r].filter(Boolean)}),this._closeable=new Ct(this),this._closeable.onClose(()=>this._dialogable.hide()),this._anchorable=new Y(s,{reference:this.triggerEl,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),Xa()&&(a&&this.showIOSOverlay(a),r&&this.showIOSOverlay(r)),this.querySelectorAll("button,ui-button").forEach(u=>{u!==this.triggerEl&&(s.contains(u)||(h(u,"aria-controls",l),h(u,"aria-haspopup","combobox"),Or(u,this._dialogable),v(u,"click",()=>this._dialogable.toggle())))}),To(this,this.triggerEl,s,this._dialogable,this._anchorable),Or(this.triggerEl,this._dialogable),Mo(this,this._dialogable),Do(this.triggerEl,this._dialogable),Po(this,this.calendar.config.mode,this.observable,this.selectable,this._dialogable),e&&s&&a&&r)Gs(a),Gs(r),zs(a,r,this);else if(s&&a){let u=a;Gs(u),Ys(u,this)}else s&&Io(n,this._dialogable);this._controllable=new N(this,{bubbles:!0}),this.calendar.addEventListener("change",u=>u.stopPropagation()),this.calendar.addEventListener("input",u=>u.stopPropagation()),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let o=F();this._controllable.initial(u=>u&&this.selectable.setValue(u)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(o(u=>this.selectable.setValue(u))),this.observable.subscribe(L.SELECTION,o(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(L.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(L.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))})}unmount(){if(this._dialogable?.getState()){let{unlock:t}=J();t()}}showIOSOverlay(t){let e=document.createElement("button");e.setAttribute("data-flux-ios-overlay",""),e.setAttribute("data-appended",""),e.classList.add("absolute","inset-0"),t.after(e)}input(){return this.querySelector("input")}clear(){this.selectable.setValue(null),this.dispatchEvent(new CustomEvent("clear",{bubbles:!1}))}open(){this._dialogable.setState(!0)}close(){this._dialogable.setState(!1)}trigger(){return this.triggerEl}},Ks=class extends _{bootWithCalendar(){if(this.picker=this.closest("ui-date-picker"),this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector('template[name="date"]')){let t=document.createElement("template");t.setAttribute("name","date"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),date:this.querySelector('template[name="date"]')},this.picker.observable.subscribe(L.SELECTION,()=>{this.render(this.picker)}),this.render(this.picker)}render(t){if(this.templates.placeholder?.clearPlaceholder?.(),this.templates.date?.clearDate?.(),t.selectable.hasSelection()){let{cleanup:e}=j(this.templates.date,s=>s({slots:{default:t.selectable.display(this.picker.calendar.config.locale)}}));this.templates.date.clearDate=e}else{if(!this.templates.placeholder)return;let{cleanup:e}=j(this.templates.placeholder,s=>s({slots:{}}));this.templates.placeholder.clearPlaceholder=e}}},Xs=class extends _{bootWithCalendar(){this.picker=this.closest("ui-date-picker"),this.picker.selectable.blockSyncIf(()=>this.getBoundingClientRect().width>0),fe(this,()=>this.picker._disableable.isDisabled(),()=>{this.picker.selectable.sync(),this.picker._dialogable.setState(!1)})}};S("date-picker",js);S("date-picker-select",Xs);S("selected-date",Ks);M(({css:i})=>i`ui-date-picker { display: block; }`);M(({css:i})=>i`
/* For Chrome, Safari, Edge */
ui-date-picker input[type="date"]::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
}
`);function Or(i,t){h(i,"aria-haspopup","listbox");let e=()=>{h(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?h(i,"data-open",""):w(i,"data-open","")};t.onChange(()=>{e()}),e()}function To(i,t,e,s,a){let r=()=>{Array.from([i,e]).forEach(n=>{s.getState()?h(n,"data-open",""):w(n,"data-open","")}),s.getState()&&a.reposition()};s.onChange(()=>r()),r(),s.onChange(()=>{s.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function Do(i,t){v(i,"keydown",e=>{["ArrowDown","ArrowUp","Escape"].includes(e.key)&&(e.key==="ArrowDown"||e.key==="ArrowUp"?t.getState()||(t.setState(!0),e.preventDefault(),e.stopImmediatePropagation()):e.key==="Escape"&&t.getState()&&t.setState(!1))})}function Io(i,t){v(i,"click",()=>{t.setState(!t.getState())})}function Gs(i){v(i,"focus",()=>i.select())}function Mo(i,t){let{lock:e,unlock:s}=J(t.el);t.onChange(()=>{t.getState()?e():s()})}function Po(i,t,e,s,a){let r=t!==Z.MULTIPLE;if(i.hasAttribute("close")){let n=i.getAttribute("close");r=n.split(" ").includes("auto"),n==="manual"&&(r=!1)}r&&e.subscribe(L.SELECTION,()=>{s.hasSelection()&&a.setState(!1)})}var Js=class extends W{boot(){h(this,"role","group"),this.config={submit:this.getAttribute("submit")||"cmd-enter",rows:Number(this.getAttribute("rows"))||2,maxRows:Number(this.getAttribute("max-rows"))||10};let t=this.querySelector("textarea"),e=this.querySelector("ui-editor");t?(this._inputEl=t,this._initTextarea()):(this._inputEl=e,this._initEditor()),this.state={onChanges:[],getValue:()=>this._inputEl.value,setValue:a=>{this._inputEl.value=a,this.state.onChanges.forEach(r=>r(this.state.getValue()))},onChange:a=>{this.state.onChanges.push(a)}},this._controllable=new N(this),this._disableable=new I(this),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.state.getValue()}),this.state.onChange(a=>{this._submittable.update(a)}),this._controllable.initial(a=>a&&this.state.setValue(a)),this._controllable.getter(()=>this.state.getValue()),this._controllable.setter(a=>this.state.setValue(a));let s=()=>{};this._disableable.onInitAndChange(a=>{a?(s=this._disableActions(),h(this._inputEl,"disabled","")):(s(),s=()=>{},w(this._inputEl,"disabled"))}),v(this._inputEl,"input",a=>{this._controllable.dispatch(),a.stopPropagation()})}_resizeTextarea(){h(this._inputEl,"style","height: auto");let t=window.getComputedStyle(this._inputEl),e=this._inputEl.scrollHeight,s=parseFloat(t.lineHeight);isNaN(s)&&(s=parseFloat(t.fontSize)*1.2);let a=parseFloat(t.borderTopWidth),r=parseFloat(t.borderBottomWidth),n=parseFloat(t.paddingTop),l=parseFloat(t.paddingBottom),o=this.config.rows*s,u=this.config.maxRows*s;t.boxSizing==="border-box"?(e+=a+r,o+=n+l+a+r,u+=n+l+a+r):e-=n+l,e<o&&(e=o);let c="hidden";e>u&&(e=u,c="auto"),h(this._inputEl,"style",`height: ${e}px; overflow-y: ${c}`)}focusInput(){this._inputEl.focus()}_resizeEditor(){let t=this._inputEl.querySelector('[data-slot="content"]');if(!t)return;let e=window.getComputedStyle(t),s=parseFloat(e.lineHeight);isNaN(s)&&(s=parseFloat(e.fontSize)*1.2);let a=parseFloat(e.borderTopWidth),r=parseFloat(e.borderBottomWidth),n=parseFloat(e.paddingTop),l=parseFloat(e.paddingBottom),o=this.config.rows*s,u=this.config.maxRows*s;e.boxSizing==="border-box"&&(o+=n+l+a+r,u+=n+l+a+r),h(t,"style",`min-height: ${o}px; max-height: ${u}px; height: auto; overflow-y: auto;`)}_initTextarea(){this._inputEl.hasAttribute("rows")||h(this._inputEl,"rows",this.config.rows),this.hasAttribute("placeholder")&&h(this._inputEl,"placeholder",this.getAttribute("placeholder")),this._inputEl.addEventListener("input",()=>this._resizeTextarea()),this._resizeTextarea(),v(this._inputEl,"keydown",t=>this._handleSubmitKeydown(t))}_initEditor(){this.hasAttribute("placeholder")&&h(this._inputEl,"placeholder",this.getAttribute("placeholder")),this.addEventListener("flux:editor:ready",()=>{this._resizeEditor()}),v(this._inputEl,"keydown",t=>this._handleSubmitKeydown(t),{capture:!0})}_handleSubmitKeydown(t){["cmd-enter","super-enter","ctrl-enter"].includes(this.config.submit)&&(t.metaKey||t.ctrlKey)&&t.key==="Enter"?(t.preventDefault(),t.stopPropagation(),this._submittable.submitEnclosingForm()):this.config.submit==="enter"&&t.key==="Enter"&&!t.shiftKey?(t.preventDefault(),t.stopPropagation(),this._submittable.submitEnclosingForm()):this.config.submit==="shift-enter"&&t.key==="Enter"&&t.shiftKey&&(t.preventDefault(),t.stopPropagation(),this._submittable.submitEnclosingForm())}_disableActions(){let t=[];return this.querySelectorAll("button").forEach(s=>{s.hasAttribute("disabled")||(h(s,"disabled",""),t.push(()=>{st(s,"disabled")}))}),()=>{t.forEach(s=>s()),t=[]}}};M(({css:i})=>i`ui-composer { display: block; }`);S("composer",Js);var Zs=class extends _{boot(){let t=this.trigger(),e=this.overlay();this._disabled=this.hasAttribute("disabled"),this._popoverable=new G(e),this._anchorable=new Y(e,{reference:t,auto:!1,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0});let{lock:s,unlock:a}=J(this._popoverable.el);this._popoverable.onChange(()=>{this._popoverable.getState()?s():a()}),v(t,"contextmenu",r=>{r.preventDefault(),this._anchorable.reposition(r.pageX,r.pageY),this._popoverable.setState(!0),this.hasAttribute("detail")&&h(e,"data-detail",this.getAttribute("detail"))}),this.hasAttribute("detail")&&h(e,"data-detail","")}unmount(){if(this.overlay()?._popoverable?.getState()){let{unlock:t}=J();t()}}trigger(){return this.firstElementChild}overlay(){if(this.hasAttribute("target")){let t=this.getAttribute("target");return document.getElementById(t)}else return this.lastElementChild.matches("[popover]")&&this.lastElementChild}};S("context",Zs);var At=class extends St{groupOfType=z;boot({options:t}){t({wrap:!1,ensureTabbable:!0})}mount(){this.options().ensureTabbable&&this.ensureTabbable()}focusFirst(){let t;t=t||this.walker().find(e=>e.hasAttribute("autofocus")),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="0"),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="-1"),t=t||this.walker().find(e=>za(e)),t?.focus()}focusPrev(){this.moveFocus(t=>this.options().wrap?this.walker().prevOrLast(t):this.walker().prev(t))}focusNext(){this.moveFocus(t=>this.options().wrap?this.walker().nextOrFirst(t):this.walker().next(t))}focusBySearch(t){let e=this.walker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()));e?.use(z).tabbable(),e?.use(z).focus()}moveFocus(t){let e=this.walker().find(a=>a.use(z).isTabbable());t(e)?.use(z).focus()}ensureTabbable(){this.walker().findOrFirst(t=>{t.use(z).isTabbable()})?.use(z).tabbable()}wipeTabbables(){this.walker().each(t=>{t.use(z).untabbable()})}untabbleOthers(t){this.walker().each(e=>{e!==t&&e.use(z).untabbable()})}walker(){return H(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name])return e();if(t.hasAttribute("disabled"))return s()})}},z=class extends q{groupedByType=At;boot({options:t}){t({hover:!1,disableable:null,tabbable:!1,tabbableAttr:null})}mount(){let t=this.options().disableable;if(!t)throw"Focusable requires a Disableable instance...";this.el.hasAttribute("tabindex")||(this.options().tabbable?this.tabbable():this.untabbable()),this.pauseFocusListener=this.on("focus",t.enabled(()=>{this.focus(!1)})).pause,this.on("focus",t.enabled(()=>{Kt()&&h(this.el,"data-focus","")})),this.on("blur",t.enabled(()=>{w(this.el,"data-focus")})),this.options().hover&&this.on("pointerenter",t.enabled(()=>{this.group()?.untabbleOthers(this.el),this.tabbable()})),this.options().hover&&this.on("pointerleave",t.enabled(e=>{this.untabbable()}))}focus(t=!0){this.group()?.untabbleOthers(this.el),this.tabbable(),t&&this.pauseFocusListener(()=>{this.el.focus({focusVisible:!1})})}tabbable(){h(this.el,"tabindex","0"),this.options().tabbableAttr&&h(this.el,this.options().tabbableAttr,"")}untabbable(){h(this.el,"tabindex","-1"),this.options().tabbableAttr&&w(this.el,this.options().tabbableAttr)}isTabbable(){return this.el.getAttribute("tabindex")==="0"}};var Ge=class i extends _{boot(){if(this._focusable=new At(this,{wrap:!1,ensureTabbable:!1}),v(this,"keydown",t=>{["ArrowDown"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),ui(this,t=>this._focusable.focusBySearch(t)),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hasAttribute("keep-open")||setTimeout(()=>this.hidePopover(),50)}),this.parentElement.localName==="ui-dropdown"){let t=this.parentElement;v(t.trigger(),"keydown",e=>{e.key==="ArrowDown"&&(this.fromArrowDown=!0,this.showPopover(),e.preventDefault(),e.stopPropagation())})}h(this,"role","menu"),h(this,"tabindex","-1")}mount(){this.initializeMenuItems(),new MutationObserver(e=>{this.initializeMenuItems()}).observe(this,{childList:!0,subtree:!0})}onPopoverShow(){requestAnimationFrame(()=>{this.fromArrowDown?(this._focusable.focusFirst(),this.fromArrowDown=!1):this.focus()})}onPopoverHide(){this._focusable.wipeTabbables()}initializeMenuItems(){this.walker().each(t=>{t._disableable||Lo(t)})}walker(){return H(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t instanceof re)return s();if(!["a","button"].includes(t.localName))return e()})}},Qs=class extends _{boot(){}},ta=class extends _{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new I(this);let t=this;if(this._disabled&&(h(t,"disabled",""),h(t,"aria-disabled","true")),R(t,"menu-checkbox"),h(t,"role","menuitemcheckbox"),this._disabled)return;t._focusable=new z(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new O(t,{toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),this._controllable=new N(this),this._controllable.initial(s=>s&&t._selectable.setState(s)),this._controllable.getter(()=>t._selectable.getState());let e=F();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch()})),v(t,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),aa(t)}},ea=class extends _{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new I(this);let t=this;this._disabled&&(h(t,"disabled",""),h(t,"aria-disabled","true")),R(t,"menu-radio"),h(t,"role","menuitemradio"),!this._disabled&&(t._focusable=new z(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new O(t,{toggleable:!1,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),v(t,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),aa(t))}},ia=class extends _{boot(){this._selectable=new Q(this),this._controllable=new N(this),h(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=F();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()})),v(this,"lofi-close-popovers",e=>{this.hasAttribute("keep-open")&&(e.preventDefault(),e.stopPropagation())})}},sa=class extends _{boot(){this._selectable=new Q(this,{multiple:!0}),this._controllable=new N(this),h(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=F();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}};M(({css:i})=>i`ui-menu[popover]:popover-open { display: block; }`);M(({css:i})=>i`ui-menu[popover].\:popover-open { display: block; }`);M(({css:i})=>i`ui-menu-checkbox, ui-menu-radio { cursor: default; display: contents; }`);S("menu",Ge);S("submenu",Qs);S("menu-checkbox",ta);S("menu-radio",ea);S("menu-radio-group",ia);S("menu-checkbox-group",sa);function aa(i){v(i,"keydown",t=>{t.key==="Enter"&&(i.click(),t.preventDefault(),t.stopPropagation())}),v(i,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())}),v(i,"keyup",t=>{t.key===" "&&(i.click(),t.preventDefault(),t.stopPropagation())})}function Lo(i){i._disableable=new I(i),i._disabled=i.hasAttribute("disabled");let t=i.querySelector("a"),e=i,s=i.parentElement.matches("ui-submenu")&&i.parentElement.querySelector("ui-menu[popover]"),a=t||e;if(i._disabled&&(h(a,"disabled",""),h(a,"aria-disabled","true")),R(a,"menu-item"),h(a,"role","menuitem"),!i._disabled)if(a._focusable=new z(a,{disableable:i._disableable,hover:!0,tabbableAttr:"data-active"}),!s)i.hasAttribute("disabled")||v(i,"click",()=>{i.hasAttribute("keep-open")||i.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),aa(e);else{s._popoverable=new G(s,{triggers:[e]}),s._anchorable=new Y(s,{reference:e,position:s.hasAttribute("position")?s.getAttribute("position"):dt()?"left start":"right start",gap:s.hasAttribute("gap")?s.getAttribute("gap"):"-5",crossAxis:!0}),e.addEventListener("click",n=>{s._popoverable.setState(!0)});let{clear:r}=de(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!1,useSafeArea:!0});s._popoverable.onChange(()=>{s._popoverable.getState()||(r(),s._focusable.wipeTabbables()),s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),v(e,"keydown",n=>{n.key==="Enter"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),v(e,"keydown",n=>{n.key==="ArrowRight"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),v(s,"keydown",n=>{n.key==="ArrowLeft"&&(s._popoverable.setState(!1),e.focus(),n.stopPropagation())})}}var ra=class i extends _{mount(){this._focusable=new At(this,{wrap:!0}),this._disableable=new I(this);let t=[];this._disableable.onInitAndChange(e=>{e?(h(this,"aria-disabled","true"),this.walker().each(s=>{s.hasAttribute("disabled")||(h(s,"disabled","true"),h(s,"aria-disabled","true"),t.push(()=>{st(s,"disabled"),st(s,"aria-disabled")}))})):(st(this,"aria-disabled"),t.forEach(s=>s()),t=[])}),v(this,"keydown",e=>{["ArrowRight"].includes(e.key)?(e.target===this?this._focusable.focusFirst():this._focusable.focusNext(),e.preventDefault(),e.stopPropagation()):["ArrowLeft"].includes(e.key)&&(e.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),e.preventDefault(),e.stopPropagation())}),h(this,"role","toolbar"),this.initializeToolbarItems()}initializeToolbarItems(){this.walker().each(t=>{t._disableable||Oo(t)})}walker(){return H(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t.hasAttribute("popover")||t instanceof Ge||t instanceof qe)return s();if(!["a","button"].includes(t.localName))return e()})}};S("toolbar",ra);function Oo(i){i._disableable=new I(i),i._disabled=i.hasAttribute("disabled");let s=i.querySelector("a")||i;i._disabled&&(h(s,"disabled",""),h(s,"aria-disabled","true")),!i._disabled&&(s._focusable=new z(s,{disableable:i._disableable}))}var na=class extends _{boot(){let t=this.hasAttribute("label")?"label":"description",e=this.button(),s=this.overlay();if(e){if(!s)return}else return console.warn("ui-tooltip: no trigger element found",this);s._popoverable=new G(s,{scope:"tooltip"}),s._anchorable=new Y(s,{reference:e,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),s._popoverable.onChange(()=>{s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),this._disableable=new I(this);let a;this._disableable.onInitAndChange(u=>{a&&(a(),a=null),u||(a=de(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!0,useSafeArea:!1}).remove)}),new MutationObserver(()=>{this.getAttribute("draggable")==="true"&&s._popoverable.setState(!1)}).observe(this,{attributeFilter:["draggable"]});let n=R(s,"tooltip"),l=this.hasAttribute("interactive"),o=this.hasAttribute("label")||e.textContent.trim()==="";l?(h(e,"aria-controls",n),h(e,"aria-expanded","false"),s._popoverable.onChange(()=>{s._popoverable.getState()?h(e,"aria-expanded","true"):h(e,"aria-expanded","false")})):(o?h(e,"aria-labelledby",n):h(e,"aria-describedby",n),h(s,"aria-hidden","true")),h(s,"role","tooltip")}button(){return this.firstElementChild}overlay(){return this.lastElementChild!==this.button()&&this.lastElementChild.tagName!=="TEMPLATE"&&this.lastElementChild}};S("tooltip",na);var B={STATE_CHANGED:"stateChanged",DESKTOP_COLLAPSED:"desktopCollapsed",DESKTOP_EXPANDED:"desktopExpanded",MOBILE_COLLAPSED:"mobileCollapsed",MOBILE_EXPANDED:"mobileExpanded",VIEWPORT_ENTER_MOBILE:"viewportEnterMobile",VIEWPORT_ENTER_DESKTOP:"viewportEnterDesktop"},oa=class extends _{boot(){if(this.config={breakpoint:this.hasAttribute("breakpoint")?this.getAttribute("breakpoint"):1024,collapsible:!1,persist:this.hasAttribute("persist")?!["false","none"].includes(this.getAttribute("persist")):!0,sticky:!!this.hasAttribute("sticky")},this.observable=new Vt,this.state={active:!1,viewportDesktop:!0,viewportMobile:!1,collapsedMobile:!0,collapsedDesktop:!1},this.config.sticky&&this.setStickyPositionStyles(),this.hasAttribute("collapsible")){let t=this.getAttribute("collapsible");t==="true"?this.config.collapsible=!0:t==="false"?this.config.collapsible=!1:t==="mobile"&&(this.config.collapsible="mobile")}this.config.persist&&this.config.collapsible&&(this.state.collapsedDesktop=JSON.parse(localStorage.getItem("flux-sidebar-collapsed-desktop"))),this.removeAttribute("data-flux-sidebar-cloak"),this.observable.subscribe(B.VIEWPORT_ENTER_DESKTOP,()=>{let t=es(this,"transition","none");setTimeout(t),this.state.viewportDesktop=!0,this.state.viewportMobile=!1,this.observable.notify(B.STATE_CHANGED)}),this.observable.subscribe(B.VIEWPORT_ENTER_MOBILE,()=>{let t=es(this,"transition","none");setTimeout(t),this.state.viewportDesktop=!1,this.state.viewportMobile=!0,this.observable.notify(B.STATE_CHANGED)}),this.observable.subscribe(B.DESKTOP_COLLAPSED,()=>{this.state.collapsedDesktop=!0,this.observable.notify(B.STATE_CHANGED)}),this.observable.subscribe(B.DESKTOP_EXPANDED,()=>{this.state.collapsedDesktop=!1,this.observable.notify(B.STATE_CHANGED)}),this.observable.subscribe(B.MOBILE_COLLAPSED,()=>{this.state.collapsedMobile=!0,this.observable.notify(B.STATE_CHANGED)}),this.observable.subscribe(B.MOBILE_EXPANDED,()=>{this.state.collapsedMobile=!1,this.observable.notify(B.STATE_CHANGED)}),this.observable.subscribe(B.STATE_CHANGED,()=>{this.config.persist&&localStorage.setItem("flux-sidebar-collapsed-desktop",JSON.stringify(this.state.collapsedDesktop)),this.updateDataAttributes(this)}),new la(this.observable,this.config),document.addEventListener("flux-sidebar-toggle",()=>{this.state.viewportDesktop?this.state.collapsedDesktop?this.observable.notify(B.DESKTOP_EXPANDED):this.observable.notify(B.DESKTOP_COLLAPSED):this.state.collapsedMobile?this.observable.notify(B.MOBILE_EXPANDED):this.observable.notify(B.MOBILE_COLLAPSED)}),this.addEventListener("click",t=>{t.target===this&&this.state.collapsedDesktop&&this.observable.notify(B.DESKTOP_EXPANDED)}),this.addEventListener("mouseenter",t=>{this.state.active=!0,this.observable.notify(B.STATE_CHANGED)}),this.addEventListener("mouseleave",t=>{this.state.active=!1,this.observable.notify(B.STATE_CHANGED)}),this.addEventListener("focusin",t=>{this.state.active=!0,this.observable.notify(B.STATE_CHANGED)}),this.addEventListener("focusout",t=>{this.state.active=!1,this.observable.notify(B.STATE_CHANGED)})}setStickyPositionStyles(){let t=this.offsetTop,e=window.pageYOffset;e>0&&(window.scrollTo(window.scrollX,0),t=this.offsetTop,window.scrollTo(window.scrollX,e)),this.style.position="sticky",this.style.top=t+"px",this.style.maxHeight=`calc(100dvh - ${t}px)`}updateDataAttributes(t){let e=this.config.collapsible===!0;e&&(this.state.active?h(t,"data-flux-sidebar-active",""):st(t,"data-flux-sidebar-active")),this.state.viewportDesktop?(st(t,"data-flux-sidebar-on-mobile"),h(t,"data-flux-sidebar-on-desktop",""),st(t,"data-flux-sidebar-collapsed-mobile"),this.state.collapsedDesktop?e&&h(t,"data-flux-sidebar-collapsed-desktop",""):st(t,"data-flux-sidebar-collapsed-desktop")):(st(t,"data-flux-sidebar-on-desktop"),h(t,"data-flux-sidebar-on-mobile",""),st(t,"data-flux-sidebar-collapsed-desktop"),this.state.collapsedMobile?h(t,"data-flux-sidebar-collapsed-mobile",""):st(t,"data-flux-sidebar-collapsed-mobile"))}},la=class{constructor(t,{breakpoint:e}){this.observable=t,this.breakpoint=e,this.watchForViewportChanges()}watchForViewportChanges(){let t=typeof this.breakpoint=="number"?`${this.breakpoint}px`:this.breakpoint,e=matchMedia(`(min-width: ${t})`);e.matches?this.observable.notify(B.VIEWPORT_ENTER_DESKTOP):this.observable.notify(B.VIEWPORT_ENTER_MOBILE),e.addEventListener("change",()=>{e.matches?this.observable.notify(B.VIEWPORT_ENTER_DESKTOP):this.observable.notify(B.VIEWPORT_ENTER_MOBILE)})}},ua=class extends _{mount(){let t=this.querySelector("button,ui-button");v(t||this,"click",()=>{this.dispatchEvent(new CustomEvent("flux-sidebar-toggle",{bubbles:!0}))}),queueMicrotask(()=>{let e=document.querySelector("ui-sidebar");e.updateDataAttributes(this),e.observable.subscribe(B.STATE_CHANGED,()=>{e.updateDataAttributes(this)})})}};S("sidebar",oa);S("sidebar-toggle",ua);var ha=class extends _{boot(){this.thumbs=this.querySelectorAll("[data-flux-slider-thumb]"),this.indicator=this.querySelector("[data-flux-slider-indicator]"),this.inputEls=this.querySelectorAll('input[type="range"]'),this.config={range:this.range(),min:this.min(),max:this.max(),step:this.step(),bigStep:this.bigStep(),minStepsBetween:this.minStepsBetween(),rangeStartString:this.rangeStartString(),rangeEndString:this.rangeEndString()},this.state={onChanges:[],getValue:()=>this.config.range?[parseFloat(this.inputEls[0].value),parseFloat(this.inputEls[1].value)]:parseFloat(this.inputEls[0].value),getValueAsArray:()=>this.config.range?this.state.getValue():[this.state.getValue()],setValue:t=>{this.config.range?(this.inputEls[0].value=t[0],this.inputEls[1].value=t[1]):this.inputEls[0].value=t,this.state.onChanges.forEach(e=>e(this.state.getValue()))},setValueInRange:(t,e)=>{let s=[...this.state.getValue()];s[t]=e,this.state.setValue(s)},setValueFromString:t=>{this.config.range?this.state.setValue(t.split(",")):this.state.setValue(t)},increment:(t,e)=>{let s=this.state.getValueAsArray();this.config.range?(s[t]=this.constrainRangeValue(t,s[t]+e),this.state.setValueInRange(t,s[t])):this.state.setValue(Vi(s[t]+e,this.config.min,this.config.max))},onChange:t=>{this.state.onChanges.push(t)}},this._controllable=new N(this),this._disableable=new I(this),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.state.getValue()}),this.state.onChange(t=>{this.repositionThumbsAndIndicator(),this.updateTicks(),this._submittable.update(t),this.config.range&&(this.inputEls[0].ariaValueText=`${t[0]} ${this.config.rangeStartString}`,this.inputEls[1].ariaValueText=`${t[1]} ${this.config.rangeEndString}`)}),this._controllable.initial(t=>t&&this.state.setValue(t)),this._controllable.getter(()=>this.state.getValue()),this._controllable.setter(t=>this.state.setValue(t)),this._disableable.onInitAndChange(t=>{t?this.inputEls.forEach(e=>e.setAttribute("disabled","")):this.inputEls.forEach(e=>e.removeAttribute("disabled"))}),this.setNativeInputAttributes(),this.setInitialValue(),this.setupExtraInputIfExists(),this.repositionTicks(),this.registerNativeInputListeners(),this.registerPointerListeners(),this.registerMutationObserver(),new ResizeObserver(()=>{this.repositionThumbsAndIndicator(),this.repositionTicks()}).observe(this)}mount(){this.setupFieldIfExists()}setNativeInputAttributes(){for(let t=0;t<this.inputEls.length;t++)this.inputEls[t].setAttribute("min",this.config.min),this.inputEls[t].setAttribute("max",this.config.max),this.inputEls[t].setAttribute("step",this.config.step)}setInitialValue(){this.hasAttribute("value")?this.state.setValueFromString(this.getAttribute("value")):this.state.setValue(this.state.getValue())}setupExtraInputIfExists(){let t=this.closest("ui-field")?.querySelector("[data-flux-input] > input");t&&(this.extraInput=t,this._disableable.onInitAndChange(e=>{e?h(t,"disabled",""):w(t,"disabled")}))}setupFieldIfExists(){let t=this.closest("ui-field");t&&queueMicrotask(()=>{t.label&&v(t.label,"click",()=>this.inputEls[0].focus()),t.label&&this.extraInput&&h(this.extraInput,"aria-labelledby",t.label.id),t.description&&this.extraInput&&h(this.extraInput,"aria-describedby",t.description.id);for(let e=0;e<this.inputEls.length;e++)t.label&&h(this.inputEls[e],"aria-labelledby",t.label.id),t.description&&h(this.inputEls[e],"aria-describedby",t.description.id)})}registerNativeInputListeners(){for(let t=0;t<this.inputEls.length;t++)v(this.inputEls[t],"input",e=>{e.stopPropagation()}),v(this.inputEls[t],"change",e=>{let s=parseFloat(e.target.value);this.config.range?(s=this.constrainRangeValue(t,s),this.state.setValueInRange(t,s)):this.state.setValue(s),this._controllable.dispatch(),e.stopPropagation()}),v(this.inputEls[t],"keydown",e=>{if(e.shiftKey){switch(e.key){case"ArrowUp":this.state.increment(t,this.config.bigStep);break;case"ArrowDown":this.state.increment(t,this.config.bigStep*-1);break;case"ArrowRight":this.state.increment(t,this.config.bigStep*(dt()?-1:1));break;case"ArrowLeft":this.state.increment(t,this.config.bigStep*(dt()?1:-1));break;default:return}this._controllable.dispatch(),e.preventDefault()}}),v(this.inputEls[t],"focus",()=>this.raiseThumb(t)),v(this.inputEls[t],"blur",()=>this.lowerThumb(t))}registerPointerListeners(){v(this,"pointerdown",t=>{if(this._disableable.isDisabled()||t.button!==0)return;let e=this.getThumbIndexFromX(t.clientX),s=this.thumbs[e].getBoundingClientRect(),a=s.left+s.width/2,r=0;Math.abs(t.clientX-a)<s.width/2&&(r=t.clientX-a);let n=this.state.getValueAsArray(),l=this.state.getValueAsArray(),o=u=>{let c=this.getValueFromX(u.clientX-r);this.config.range&&(c=this.constrainRangeValue(e,c));let d=[...l];d[e]=c,l.toString()!==d.toString()&&(l=d,this.config.range?this.state.setValueInRange(e,c):this.state.setValue(c),this.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})))};o(t),this.setPointerCapture(t.pointerId),requestAnimationFrame(()=>{this.inputEls[e].focus()}),document.addEventListener("pointermove",o),document.addEventListener("pointerup",u=>{document.removeEventListener("pointermove",o),this.releasePointerCapture(u.pointerId),requestAnimationFrame(()=>{this.lowerThumb(e)}),n.toString()!==l.toString()&&this.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))},{once:!0})})}registerMutationObserver(){new MutationObserver(()=>{this.config.min=this.min(),this.config.max=this.max(),this.config.step=this.step(),this.config.bigStep=this.bigStep(),this.config.minStepsBetween=this.minStepsBetween(),this.setNativeInputAttributes(),this.repositionThumbsAndIndicator(),this.repositionTicks()}).observe(this,{attributes:!0,attributeFilter:["min","max","step","big-step","min-steps-between"]})}repositionThumbsAndIndicator(){if(this.config.range){let t=this.state.getValue(),e=this.getPercentageFromValue(t[0]),s=this.getPercentageFromValue(t[1]);this.thumbs[0].style.insetInlineStart=e+"%",this.thumbs[1].style.insetInlineStart=s+"%",this.indicator.style.insetInlineStart=e+"%",this.indicator.style.insetInlineEnd=100-s+"%"}else{let t=this.state.getValue(),e=this.getPercentageFromValue(t);this.thumbs[0].style.insetInlineStart=e+"%",this.indicator.style.insetInlineStart=0,this.indicator.style.insetInlineEnd=100-e+"%"}}repositionTicks(){this.querySelectorAll("[data-flux-slider-tick]").forEach(t=>{let e=parseFloat(t.getAttribute("data-value"));if(isNaN(e))return;let s=this.getPercentageFromValue(e);h(t,"style",`inset-inline-start: ${s}%`)})}updateTicks(){let t=this.state.getValueAsArray(),e=this.config.range?t:[this.state.min,t[0]];this.querySelectorAll("[data-flux-slider-tick]").forEach(s=>{let a=parseFloat(s.getAttribute("data-value"));if(!isNaN(a)){for(let r=0;r<t.length;r++)t[r]==a?h(s,"data-current",""):w(s,"data-current");a>=e[0]||a<=e[1]?h(s,"data-active",""):w(s,"data-active")}})}raiseThumb(t){this.thumbs[t].style.zIndex=10}lowerThumb(t){this.thumbs[t].style.zIndex=null}getThumbIndexFromX(t){let e,s;for(let a=0;a<this.thumbs.length;a++){let r=this.thumbs[a].getBoundingClientRect(),n=(r.left+r.right)/2,l=Math.abs(n-t);s&&Math.abs(s-l)<r.width/2&&this.getBoundingClientRect().right-r.right<r.width/4||(s===void 0||l<=s)&&(s=l,e=a)}return e}getPercentageFromValue(t){let e=t-this.config.min,s=this.config.max-this.config.min;if(s==0)return 0;let a=Vi(e/s,0,100),r=this.getBoundingClientRect(),l=this.thumbs[0].getBoundingClientRect().width/2;return((r.width-l*2)*a+l)/r.width*100}getValueFromX(t){let e=this.config.min,s=this.config.max,a=this.config.step,r=this.getBoundingClientRect(),l=this.thumbs[0].getBoundingClientRect().width/2,o=r.width-l*2,u=r.left+l,c=t-u,d=Vi(c/o,0,1);d=dt()?1-d:d;let m=(s-e)*d+e;return m=No(m,a,e),m=Vi(m,e,s),m}constrainRangeValue(t,e){let s=[...this.state.getValue()];return s[t]=e,(s[1]-s[0])/this.config.step<this.config.minStepsBetween?[s[1]-this.config.minStepsBetween*this.config.step,s[0]+this.config.minStepsBetween*this.config.step][t]:e}range(){return this.hasAttribute("range")}min(){return this.hasAttribute("min")?parseFloat(this.getAttribute("min")):0}max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):100}step(){if(!this.hasAttribute("step"))return 1;let t=parseFloat(this.getAttribute("step"));return t<=0||isNaN(t)?1:t}bigStep(){if(!this.hasAttribute("big-step"))return this.step();let t=parseFloat(this.getAttribute("big-step"));return t<=0||isNaN(t)?this.step():t}minStepsBetween(){return this.hasAttribute("min-steps-between")?parseFloat(this.getAttribute("min-steps-between")):0}rangeStartString(){return this.getAttribute("data-flux-aria-range-start")||"start range"}rangeEndString(){return this.getAttribute("data-flux-aria-range-end")||"end range"}};function Vi(i,t,e){return Math.min(Math.max(i,t),e)}function No(i,t,e){let s;if(Math.abs(t)>=1)s=t.toString().split(".")[1]?.length||0;else{let r=t.toExponential().split("e-"),n=r[0].split(".")[1];s=(n?n.length:0)+parseInt(r[1],10)}let a=Math.round((i-e)/t)*t+e;return Number(a.toFixed(s))}S("slider",ha);var ca=class extends W{boot(){let t=this;this._disableable=new I(this),this._selectable=new O(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):null,label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this.value=this._selectable.getValue(),this._detangled=F(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))})),h(t,"role","switch"),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),this._disableable.onInitAndChange(e=>{e?w(t,"tabindex","0"):h(t,"tabindex","0")}),v(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),v(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),v(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),v(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),v(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),Fo(t)}get checked(){return this._selectable.isSelected()}set checked(t){this._detangled(()=>{t?this._selectable.select():this._selectable.deselect()})()}};function Fo(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i.click()})}M(({css:i})=>i`ui-switch { display: inline-block; user-select: none; }`);S("switch",ca);var da=class i extends _{mount(){this.control=this.fieldWalker().find(t=>this.isControl(t)),this.control}associateLabelWithControl(t){t&&this.label&&(this.control=t,!this.control.hasAttribute("aria-labelledby")&&(h(this.elOrButton(this.control),"aria-labelledby",this.label.id),this.control&&!(this.control instanceof W)&&this.hasAttribute("disabled")&&this.control.setAttribute("disabled","")))}associateDescriptionWithControl(t){t&&this.description&&(this.control=t,!this.control.hasAttribute("aria-describedby")&&h(this.elOrButton(this.control),"aria-describedby",this.description.id))}associateLabel(t){this.label=t,v(t,"click",e=>{["a","button","ui-button"].includes(e.target.localName)||this.focusOrTogggle(this.control)}),this.control&&this.associateLabelWithControl(this.control)}associateDescription(t){this.description=t,this.control&&this.associateDescriptionWithControl(this.control)}fieldWalker(){return H(this,(t,{skip:e,reject:s})=>{if(t instanceof i&&t!==this||t.parentElement.localName==="ui-editor"&&t!==this)return s()})}isControl(t){return!!(t instanceof W||t.matches("input, textarea, select"))}focusOrTogggle(t){if(!t||t.disabled||t.hasAttribute("disabled"))return;t.localName==="input"&&["checkbox","radio"].includes(t.type)||["ui-switch","ui-radio","ui-checkbox"].includes(t.localName)?(t.click(),t.focus()):t.localName==="input"&&["file"].includes(t.type)?t.click():["ui-select","ui-date-picker","ui-time-picker","ui-otp"].includes(t.localName)?t.trigger()?.focus():["ui-editor"].includes(t.localName)?t.focus():["ui-composer"].includes(t.localName)?t.focusInput():t.focus()}elOrButton(t){return t instanceof _&&t.firstElementChild instanceof HTMLButtonElement?t.firstElementChild:t}},fa=class extends _{mount(){R(this,"label"),h(this,"aria-hidden","true"),this.closest("ui-field")?.associateLabel(this)}},pa=class extends _{mount(){R(this,"description"),h(this,"aria-hidden","true"),this.closest("ui-field")?.associateDescription(this)}};M(({css:i})=>i`
    ui-label { display: inline-block; cursor: default; }
    ui-description { display: block; }
`);S("field",da);S("label",fa);S("description",pa);var ba=class extends _{mount(){let t=R(this,"legend"),e=this.closest("fieldset");e&&h(e,"aria-labelledby",t)}};M(({css:i})=>i`ui-legend { display: block; }`);S("legend",ba);function qr(i){let t={time:Uo,linear:Ro,categorical:Vo},e=Date.now(),s=Date.now(),a={},r=(l,o,u)=>{let c=`${l}-${o}`;for(let d in a)d.startsWith(`${l}-`)&&!d.endsWith(String(o))&&delete a[d];return a[c]||(a[c]=u()),a[c]},n={locale:i.locale,data:[],width:i.width,height:i.height,inset:i.inset,axes:{x:{axis:"x",key:i.axes.x.key,format:i.axes.x.format,inset:{start:0,end:0},position:i.axes.x.position||"bottom",tickStart:i.axes.x.tickStart,tickEnd:i.axes.x.tickEnd,tickCount:i.axes.x.tickCount,tickStep:i.axes.x.tickStep,tickValues:i.axes.x.tickValues,tickSuffix:i.axes.x.tickSuffix,tickPrefix:i.axes.x.tickPrefix,get rawValues(){return r("x.rawValues",e,()=>n.data.map(l=>l[this.key]))},get type(){return r("x.type",e,()=>i.axes.x.scale||(this.rawValues.every(l=>Bo(l))?"time":"categorical"))},get interval(){return r("x.interval",e,()=>i.axes.x.interval||"auto")},get values(){return r("x.values",e,()=>this.rawValues.map(l=>this.type==="time"?qi(l):this.type==="linear"?Number(l):l))},get ticks(){return r("x.ticks",e,()=>{let l=Nr(n.data,this,Ri(this.type,this.values)),o=Fr(l,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval,n.locale);return l.map((u,c)=>({value:u,label:o[c]}))})},get domain(){return r("x.domain",e,()=>Ri(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return r("x.range",s,()=>[n.inset.left+this.inset.start,n.width-n.inset.right-this.inset.end])},get scale(){return r("x.scale",s+e,()=>t[this.type](this.domain,this.range,this.values))}},y:{axis:"y",keys:i.axes.y.keys,format:i.axes.y.format,inset:{start:0,end:0},position:i.axes.y.position||"left",tickStart:i.axes.y.tickStart,tickEnd:i.axes.y.tickEnd,tickCount:i.axes.y.tickCount,tickStep:i.axes.y.tickStep,tickValues:i.axes.y.tickValues,tickSuffix:i.axes.y.tickSuffix,tickPrefix:i.axes.y.tickPrefix,get values(){return r("y.values",e,()=>n.data.flatMap(l=>this.keys.reduce((o,u)=>(l[u]===void 0||o.push(l[u]),o),[])))},get type(){return r("y.type",e,()=>i.axes.y.scale||"linear")},get interval(){return r("y.interval",e,()=>i.axes.y.interval||"auto")},get ticks(){return r("y.ticks",e,()=>{let l=Nr(n.data,this,Ri(this.type,this.values)),o=Fr(l,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval,n.locale);return l.map((u,c)=>({value:u,label:o[c]}))})},get domain(){return r("y.domain",e,()=>Ri(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return r("y.range",s,()=>[n.height-n.inset.bottom-this.inset.end,n.inset.top+this.inset.start])},get scale(){return r("y.scale",s+e,()=>t[this.type](this.domain,this.range,this.values))}}},get series(){return r("series",e+s,()=>this.axes.y.keys.reduce((l,o)=>{if(!n.data[0].hasOwnProperty(o))return console.warn(`ui-chart: series field "${o}" does not exist`),l;let u=n.data.map(d=>({x:n.axes.x.scale(d[n.axes.x.key]),y:n.axes.y.scale(d[o]),datum:d})),c={field:o,values:n.data.map(d=>d[o]),linePath(d="smooth"){let m=this.points.map(g=>[g.x,g.y]);return{smooth:Vr,none:Rr}[d](m)},areaPath(d="smooth"){return`${{smooth:Vr,none:Rr}[d](this.points.map(p=>[p.x,p.y]))} L${n.axes.x.scale(n.axes.x.domain[1])},${n.axes.y.scale(n.axes.y.domain[0])} L${n.axes.x.scale(n.axes.x.domain[0])},${n.axes.y.scale(n.axes.y.domain[0])} Z`},points:u};return l[o]=c,l},{}))},closestXPoint(l){return this.closestXPoints(l)[0]},closestXPoints(l){return r("closestXPoints",e+s+l,()=>{let o=[],u=1/0;return Object.values(this.series).forEach(c=>{let d=null;c.points.forEach(m=>{let g=Math.abs(m.x-l);g<u&&(u=g,d=m)}),d&&o.push(d)}),o})},updateDimensions(l,o){this.width=l.width,this.height=l.height,this.inset=o,s=Date.now()},updateData(l){let o=JSON.parse(JSON.stringify(l));o[0]!==void 0&&typeof o[0]!="object"&&(o=o.map((u,c)=>({value:u}))),o.every(u=>u.index)||o.forEach((u,c)=>{u.index=c}),this.data=o,e=Date.now()}};return n.updateData(i.data),n}function Ri(i,t){let e=[...new Set(t)];return i==="time"?Wo(e):i==="linear"?(e.sort((s,a)=>Number(s)-Number(a)),e.length===1?e[0]===0?[Number(e[0]),1]:e[0]>0?[0,Number(e[0])]:[Number(e[0]),0]:[Number(e[0]),Number(e[e.length-1])]):[e[0],e[e.length-1]]}function Nr(i,t,e){let s=[];if(t.type==="linear"){if(t.tickValues)return t.tickValues;let[a,r]=e,n=t.tickCount?Number(t.tickCount):5,l=t.tickStart===0||t.tickStart==="0"?0:t.tickStart||"auto",o=t.tickEnd===0||t.tickEnd==="0"?0:t.tickEnd||"auto";l==="auto"&&a>0&&r>0&&(a=0),o!=="auto"&&o!=="max"&&!isNaN(Number(o))&&(r=Number(o));let u=Number(t.interval),c;if(t.interval==="auto"||Number.isNaN(u)){let p=(r-a)/(n-1),A=Math.pow(10,Math.floor(Math.log10(p))),f=p/A;f<1.5?c=1:f<3?c=2:f<7?c=5:c=10,c*=A}else c=u;let d;l==="auto"?d=Math.floor(a/c)*c:l==="min"?d=a:d=Number(l);let m=d;for(;m<=r+c*.1;)m>=a-c*.1&&s.push(m),m+=c;if(o==="max")Math.abs(s[s.length-1]-e[1])>c*.1&&s.push(e[1]);else if(o!=="auto"&&!isNaN(Number(o))){let g=Number(o),p=s.length;s=Array.from({length:p},(A,f)=>d+(g-d)*(f/(p-1)))}if(s.length>n*2){let g=Math.ceil(s.length/n);s=s.filter((p,A)=>A%g===0)}}else if(t.type==="time"){let[a,r]=Br(e[0],e[1],t.tickCount,t.interval);return r}else if(t.type==="categorical"&&(i.forEach(a=>{let r=a[t.key];s.push(r)}),t.tickCount&&s.length>t.tickCount)){let a=Math.ceil(s.length/t.tickCount);s=s.filter((r,n)=>n%a===0)}return s}function Fr(i,t,e,s,a,r,n){let l=[];return t==="time"?(e||([e]=Br(i[0],i[i.length-1],null,r)),e={...e,timeZone:"UTC"},l=i.map(o=>new Date(o).toLocaleString(n,e))):t==="linear"?e?l=i.map(o=>o.toLocaleString(n,e)):l=i.map(o=>o.toLocaleString(n)):l=i.map(o=>o+""),a&&(l=l.map(o=>a+o)),s&&(l=l.map(o=>o+s)),l}function Vo(i,t,e){let s=[...new Set(e)],a=(t[1]-t[0])/(s.length-1),r=new Map(s.map((n,l)=>[n,t[0]+l*a]));return function(n){if(n!=null)return r.get(n)}}function Ro(i,t){let e=i[1]-i[0],s=t[1]-t[0];return function(a){return t[0]+(a-i[0])*(s/e)}}function Vr(i){if(i.length<2)return"";let t=o=>o<0?-1:1,e=(o,u,c,d,m,g)=>{let p=c-o,A=m-c,f=(d-u)/(p||A<0&&-0),D=(g-d)/(A||p<0&&-0),x=(f*A+D*p)/(p+A);return(t(f)+t(D))*Math.min(Math.abs(f),Math.abs(D),.5*Math.abs(x))||0},s=(o,u,c,d,m)=>{let g=c-o;return g?(3*(d-u)/g-m)/2:m},a=`M${i[0][0]},${i[0][1]}`;if(i.length===2)return a+`L${i[1][0]},${i[1][1]}`;for(let o=0;o<i.length-2;o++){let u=i[o],c=i[o+1];if(u[0]===c[0]&&u[1]===c[1])continue;let d=i[o+2],m=e(u[0],u[1],c[0],c[1],d[0],d[1]),g=(c[0]-u[0])/3,p=u[0]+g,A=u[1]+g*(o===0?s(u[0],u[1],c[0],c[1],m):i[o-1]?e(i[o-1][0],i[o-1][1],u[0],u[1],c[0],c[1]):m),f=c[0]-g,D=c[1]-g*m;a+=`C${p},${A} ${f},${D} ${c[0]},${c[1]}`}let r=i.length,n=i[r-1],l=i[r-2];if(!(n[0]===l[0]&&n[1]===l[1])){let o=e(i[r-3][0],i[r-3][1],l[0],l[1],n[0],n[1]),u=(n[0]-l[0])/3,c=l[0]+u,d=l[1]+u*o,m=n[0]-u,g=n[1]-u*s(l[0],l[1],n[0],n[1],o);a+=`C${c},${d} ${m},${g} ${n[0]},${n[1]}`}return a}function qo(i,t=.05){if(!i||i.length<2)return"";let e=`M ${i[0][0]} ${i[0][1]}`;for(let s=1;s<i.length;s++){let a=i[s],r=i[s-1],n=i[s-2]||r,l=i[s+1]||a,o=r[0]+(l[0]-n[0])*t,u=r[1]+(l[1]-n[1])*t,c=a[0]-(l[0]-n[0])*t,d=a[1]-(l[1]-n[1])*t;e+=` C ${o} ${u}, ${c} ${d}, ${a[0]} ${a[1]}`}return e}function Rr(i){return qo(i,0)}function Bo(i){return i instanceof Date||typeof i=="string"&&i.includes("-")&&!isNaN(Date.parse(i))}function Wo(i){return i.sort((t,e)=>typeof t=="string"?t.localeCompare(e):t-e),[qi(i[0]),qi(i[i.length-1])]}function Uo(i,t){let e=new Date(i[0]).getTime(),a=new Date(i[1]).getTime()-e,r=t[1]-t[0];return function(n){if(!n)return;let l=qi(n);if(isNaN(l.getTime()))return;let o=(l.getTime()-e)/a;return t[0]+o*r}}function Br(i,t,e,s){let a=i,r=t,o=(r-a)/1e3/60,u=o/60,c=u/24,d=c/30,m=c/365,g,p,A;switch(s){case"second":g={hour:"numeric",minute:"numeric",second:"numeric"},p=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate(),x.getUTCHours(),x.getUTCMinutes(),x.getUTCSeconds()+1)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()));break;case"minute":g={hour:"numeric",minute:"numeric"},p=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate(),x.getUTCHours(),x.getUTCMinutes()+1)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes()));break;case"hour":g={hour:"numeric",minute:"numeric"},p=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate(),x.getUTCHours()+1)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours()));break;case"day":g={day:"numeric"},p=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()+1)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));break;case"week":g={day:"numeric",month:"short"},p=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()+7)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));break;case"month":g={month:"short",day:"numeric"},p=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth()+1,1)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),1));break;case"year":g={year:"numeric"},p=x=>new Date(Date.UTC(x.getUTCFullYear()+1,0,1)),A=new Date(Date.UTC(a.getUTCFullYear(),0,1));break;default:}if(!p)if(u<1){g={hour:"numeric",minute:"numeric"};let x=e?Math.max(1,Math.floor(o/(e-1))):1;p=b=>new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes()+x)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours()))}else if(c<1){g={hour:"numeric"};let x=e?Math.max(1,Math.floor(u/(e-1))):1;p=b=>new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours()+x)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0))}else if(c<=7){g={weekday:"short",hour:"numeric"};let x=e?Math.max(1,Math.floor(u/(e-1))):6;p=b=>new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours()+x)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0))}else if(c<=30){g={month:"short",day:"numeric"};let x=e?Math.max(1,Math.floor(c/(e-1))):1;p=b=>new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()+x)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))}else if(d<=6){g={month:"short",day:"numeric"};let x=e?Math.max(1,Math.floor(c/(e-1))):7;p=b=>new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()+x)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))}else if(m<2){g={month:"short"};let x=e?Math.max(1,Math.floor(d/(e-1))):1;p=b=>new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth()+x,1)),A=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth()))}else{g={year:"numeric"};let x=e?Math.max(1,Math.floor(m/(e-1))):1;p=b=>new Date(Date.UTC(b.getUTCFullYear()+x,0,1)),A=new Date(Date.UTC(a.getUTCFullYear(),0,1))}let f=[a],D=a;for(;D<=r;)D=p(D),D<=r&&f.push(new Date(D.getTime()));return[g,f]}function qi(i){if(i instanceof Date)return i;let{year:t,month:e,day:s,hour:a,minute:r,second:n,millisecond:l}=Ho(i);return new Date(Date.UTC(t,e-1,s,a,r,n,l))}function Ho(i){let t=i.match(/^(\d{4})(?:-(\d{2}))?(?:-(\d{2}))?(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z)?)?$/);if(!t)throw new Error("Invalid date format");return{year:t[1]?parseInt(t[1],10):null,month:t[2]?parseInt(t[2],10):null,day:t[3]?parseInt(t[3],10):null,hour:t[4]?parseInt(t[4],10):null,minute:t[5]?parseInt(t[5],10):null,second:t[6]?parseInt(t[6],10):null,millisecond:t[7]?parseInt(t[7].padEnd(3,"0"),10):null,utc:!!t[8]}}var ma=class extends HTMLElement{constructor(){super(),this.querySelectorAll("[data-appended]").forEach(s=>s.remove());let t=this.querySelector('template[name="svg"]'),e=ci(t);t.after(e),this.init(t,e)}init(t,e){this._data=this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[];let s=this.hasAttribute("locale")?this.getAttribute("locale"):hi();this._observable=new Vt,this._selectable={getState:()=>this._data,setState:x=>{this._data=x,this._observable.notify("data",this._data)}},this._controllable=new N(this),this._controllable.initial(x=>x&&this._selectable.setState(x)),this._controllable.getter(()=>this._selectable.getState()),this._controllable.setter(x=>{this._selectable.setState(x)});let a={svg:t,lines:{},areas:{},points:{},cursor:t.content.querySelector('template[name="cursor"]'),zeroLine:t.content.querySelector('template[name="zero-line"]'),axes:{x:{template:t.content.querySelector('template[name="axis"][axis="x"]'),axisLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-label"]')},y:{template:t.content.querySelector('template[name="axis"][axis="y"]'),axisLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-label"]')}},tooltip:this.querySelector('template[name="tooltip"]'),summary:this.querySelector('template[name="summary"]')};t.content.querySelectorAll('template[name="line"]').forEach(x=>{a.lines[x.getAttribute("field")]=x}),t.content.querySelectorAll('template[name="area"]').forEach(x=>{a.areas[x.getAttribute("field")]=x}),t.content.querySelectorAll('template[name="point"]').forEach(x=>{a.points[x.getAttribute("field")]=x});let r=()=>{},n=()=>{},l=()=>{},o=()=>{},u=null,c=null,d=null,m=null;c=document.createElementNS("http://www.w3.org/2000/svg","rect"),c.setAttribute("data-overlay",""),c.setAttribute("fill","none"),c.setAttribute("pointer-events","all"),c.addEventListener("mousemove",Qi(function(x){r(x),n(x),l(x),o(x)},1)),c.addEventListener("mouseleave",()=>{r(null),n(null),l(null),o(null)}),e.appendChild(c),a.cursor&&(u=ut(a.cursor),u.setAttribute("data-cursor",""),e.appendChild(u)),a.tooltip&&(d=ci(a.tooltip),a.tooltip.after(d)),a.summary&&(m=ci(a.summary),a.summary.after(m));let g={left:8,right:8,top:8,bottom:8};if(a.svg?.hasAttribute("gutter")){let x=a.svg?.getAttribute("gutter").split(" ").map(b=>b.replace("px","")).map(Number);x.length===1?(g.top=x[0],g.right=x[0],g.bottom=x[0],g.left=x[0]):x.length===2?(g.top=x[0],g.right=x[1],g.bottom=x[0],g.left=x[1]):x.length===3?(g.top=x[0],g.right=x[1],g.bottom=x[2],g.left=x[1]):x.length===4&&(g.top=x[0],g.right=x[1],g.bottom=x[2],g.left=x[3])}let[p,A]=$o(e),f=qr({locale:s,data:this._data,width:e.parentElement.getBoundingClientRect().width,height:e.parentElement.getBoundingClientRect().height,inset:{left:0,right:0,top:0,bottom:0},axes:{x:{key:p,format:a.axes.x.template?.hasAttribute("format")?JSON.parse(a.axes.x.template?.getAttribute("format")):null,scale:a.axes.x.template?.getAttribute("scale"),interval:a.axes.x.template?.getAttribute("interval"),position:a.axes.x.template?.getAttribute("position"),tickCount:a.axes.x.template?.getAttribute("tick-count")||a.axes.x.tickLabel?.getAttribute("target-tick-count"),tickStart:a.axes.x.template?.getAttribute("tick-start"),tickEnd:a.axes.x.template?.getAttribute("tick-end"),tickStep:a.axes.x.template?.getAttribute("tick-step")?Number(a.axes.x.template?.getAttribute("tick-step")):null,tickSuffix:a.axes.x.template?.getAttribute("tick-suffix"),tickPrefix:a.axes.x.template?.getAttribute("tick-prefix"),tickValues:a.axes.x.template?.hasAttribute("tick-values")?JSON.parse(a.axes.x.template?.getAttribute("tick-values")):null},y:{keys:A,format:a.axes.y.template?.hasAttribute("format")?JSON.parse(a.axes.y.template?.getAttribute("format")):null,scale:a.axes.y.template?.getAttribute("scale"),interval:a.axes.y.template?.getAttribute("interval"),position:a.axes.y.template?.getAttribute("position"),tickCount:a.axes.y.template?.getAttribute("tick-count")||a.axes.y.tickLabel?.getAttribute("target-tick-count"),tickStart:a.axes.y.template?.getAttribute("tick-start"),tickEnd:a.axes.y.template?.getAttribute("tick-end"),tickStep:a.axes.y.template?.getAttribute("tick-step")?Number(a.axes.y.template?.getAttribute("tick-step")):null,tickSuffix:a.axes.y.template?.getAttribute("tick-suffix"),tickPrefix:a.axes.y.template?.getAttribute("tick-prefix"),tickValues:a.axes.y.template?.hasAttribute("tick-values")?JSON.parse(a.axes.y.template?.getAttribute("tick-values")):null}}}),D=(x=!0)=>{if(h(e,"viewBox",`0 0 ${f.width} ${f.height}`),f.data.length!==0){if(f.data.length===1){console.warn("ui-chart: chart only has one data point so it cannot be rendered.");return}if(f.data[0][f.axes.x.key]===void 0){console.warn(`ui-chart: axis field "${f.axes.x.key}" does not exist`);return}if(Object.entries(f.series).forEach(([b,k])=>{let E=e.querySelector(`[data-line][data-series="${b}"]`),C=a.lines[b];if(C){let T=C.getAttribute("curve")||"smooth";if(E)E.setAttribute("d",k.linePath(T));else{let P=ut(C);P.setAttribute("data-line",""),P.setAttribute("data-series",b),P.setAttribute("d",k.linePath(T)),e.appendChild(P)}}}),Object.entries(f.series).forEach(([b,k])=>{let E=e.querySelector(`[data-area][data-series="${b}"]`),C=a.areas[b];if(C){let T=C.getAttribute("curve")||"smooth";if(E)E.setAttribute("d",k.areaPath(T));else{let P=ut(C);P.setAttribute("data-area",""),P.setAttribute("data-series",b),P.setAttribute("d",k.areaPath(T)),e.appendChild(P)}}}),Object.entries(f.series).forEach(([b,k])=>{let E=e.querySelector(`[data-point-group][data-series="${b}"]`),C=a.points[b];C&&(e.querySelector(`[data-point-group][data-series="${b}"]`)?.remove(),E=document.createElementNS("http://www.w3.org/2000/svg","g"),E.setAttribute("data-point-group",""),E.setAttribute("data-series",b),k.points.forEach(T=>{let P=ut(C);P.setAttribute("data-point",""),P.setAttribute("data-series",b),P.setAttribute("cx",T.x),P.setAttribute("cy",T.y),E.appendChild(P)}),e.appendChild(E))}),o=b=>{e.querySelectorAll("[data-point-group]").forEach(k=>{if(k.querySelectorAll("[data-point]").forEach(E=>E.removeAttribute("data-active")),b){let E=b.clientX-e.getBoundingClientRect().left,C=b.clientY-e.getBoundingClientRect().top;E>=f.inset.left&&E<=f.width-f.inset.right&&C>=f.inset.top&&C<=f.height-f.inset.bottom&&f.closestXPoints(E).forEach(P=>{k.querySelectorAll(`[data-point][cx="${P.x}"]`).forEach(V=>V.setAttribute("data-active",""))})}else k.querySelectorAll("[data-point]").forEach(E=>E.removeAttribute("data-active"))})},a.axes.x.template){if(a.axes.x.axisLine){e.querySelector('[data-axis-line][data-axis="x"]')?.remove();let b=ut(a.axes.x.axisLine);b.setAttribute("data-axis-line",""),b.setAttribute("data-axis","x"),b.setAttribute("x1",f.axes.x.scale(f.axes.x.domain[0])),b.setAttribute("x2",f.axes.x.scale(f.axes.x.domain[1])),b.setAttribute("y1",f.axes.y.scale(f.axes.y.domain[f.axes.x.position==="bottom"?0:1])),b.setAttribute("y2",f.axes.y.scale(f.axes.y.domain[f.axes.x.position==="bottom"?0:1])),e.appendChild(b)}if(a.axes.x.gridLine){e.querySelector('[data-grid-line-group][data-axis="x"]')?.remove();let b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("data-grid-line-group",""),b.setAttribute("data-axis","x"),f.axes.x.ticks.forEach(({value:k})=>{let E=ut(a.axes.x.gridLine);E.setAttribute("data-grid-line",""),E.setAttribute("data-axis","x"),E.setAttribute("x1",f.axes.x.scale(k)),E.setAttribute("x2",f.axes.x.scale(k)),E.setAttribute("y1",f.inset.top),E.setAttribute("y2",f.height-f.inset.bottom),b.appendChild(E)}),e.appendChild(b)}if(a.axes.x.tickMark){e.querySelector('[data-tick-mark-group][data-axis="x"]')?.remove();let b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("data-tick-mark-group",""),b.setAttribute("data-axis","x"),f.axes.x.ticks.forEach(({value:k,label:E})=>{let C={x:f.axes.x.scale(k),y:f.axes.y.scale(f.axes.y.domain[f.axes.x.position==="bottom"?0:1])},T=ut(a.axes.x.tickMark);T.setAttribute("data-tick-mark",""),T.setAttribute("data-axis","x"),T.setAttribute("transform",`translate(${C.x}, ${C.y})`),b.appendChild(T)}),e.appendChild(b)}if(a.axes.x.tickLabel){e.querySelector('[data-tick-label-group][data-axis="x"]')?.remove();let b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("data-tick-label-group",""),b.setAttribute("data-axis","x"),f.axes.x.ticks.forEach(({value:k,label:E})=>{let C={x:f.axes.x.scale(k),y:f.axes.y.scale(f.axes.y.domain[f.axes.x.position==="bottom"?0:1])},T=ut(a.axes.x.tickLabel);T.querySelectorAll("slot").forEach(P=>P.replaceWith(document.createTextNode(E))),T.setAttribute("data-tick-label",""),T.setAttribute("data-axis","x"),T.setAttribute("transform",`translate(${C.x}, ${C.y})`),b.appendChild(T)}),e.appendChild(b),Wr(b,f.axes.x)}}if(a.axes.y.template){if(a.axes.y.axisLine){e.querySelector('[data-axis-line][data-axis="y"]')?.remove();let b=ut(a.axes.y.axisLine);b.setAttribute("data-axis-line",""),b.setAttribute("data-axis","y"),b.setAttribute("x1",f.axes.x.scale(f.axes.x.domain[f.axes.y.position==="left"?0:1])),b.setAttribute("x2",f.axes.x.scale(f.axes.x.domain[f.axes.y.position==="left"?0:1])),b.setAttribute("y1",f.axes.y.scale(f.axes.y.domain[0])),b.setAttribute("y2",f.axes.y.scale(f.axes.y.domain[1])),e.appendChild(b)}if(a.axes.y.gridLine){e.querySelector('[data-grid-line-group][data-axis="y"]')?.remove();let b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("data-grid-line-group",""),b.setAttribute("data-axis","y"),f.axes.y.ticks.forEach(({value:k,label:E})=>{let C={x:f.axes.x.scale(f.axes.x.domain[0]),y:f.axes.y.scale(k)},T=ut(a.axes.y.gridLine);T.setAttribute("data-grid-line",""),T.setAttribute("data-axis","y"),T.setAttribute("x1",f.inset.left),T.setAttribute("x2",f.width-f.inset.right),T.setAttribute("y1",C.y),T.setAttribute("y2",C.y),b.appendChild(T)}),e.appendChild(b)}if(a.axes.y.tickMark){e.querySelector('[data-tick-mark-group][data-axis="y"]')?.remove();let b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("data-tick-mark-group",""),b.setAttribute("data-axis","y"),f.axes.y.ticks.forEach(({value:k,label:E})=>{let C={x:f.axes.x.scale(f.axes.x.domain[f.axes.y.position==="left"?0:1]),y:f.axes.y.scale(k)},T=ut(a.axes.y.tickMark);T.setAttribute("data-tick-mark",""),T.setAttribute("data-axis","y"),T.setAttribute("transform",`translate(${C.x}, ${C.y})`),b.appendChild(T)}),e.appendChild(b)}if(a.axes.y.tickLabel){e.querySelector('[data-tick-label-group][data-axis="y"]')?.remove();let b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("data-tick-label-group",""),b.setAttribute("data-axis","y"),f.axes.y.ticks.forEach(({value:k,label:E})=>{let C={x:f.axes.x.scale(f.axes.x.domain[f.axes.y.position==="left"?0:1]),y:f.axes.y.scale(k)},T=ut(a.axes.y.tickLabel);T.querySelectorAll("slot").forEach(P=>P.replaceWith(document.createTextNode(E))),T.setAttribute("data-tick-label",""),T.setAttribute("data-axis","y"),T.setAttribute("transform",`translate(${C.x}, ${C.y})`),b.appendChild(T)}),e.appendChild(b),Wr(b,f.axes.y)}}if(a.zeroLine&&f.axes.y.domain[0]<0&&f.axes.y.domain[1]>0){e.querySelector('[data-zero-line][data-axis="y"]')?.remove();let b=ut(a.zeroLine);b.setAttribute("data-zero-line",""),b.setAttribute("data-axis","y"),b.setAttribute("x1",f.axes.x.scale(f.axes.x.domain[0])),b.setAttribute("x2",f.axes.x.scale(f.axes.x.domain[1])),b.setAttribute("y1",f.axes.y.scale(0)),b.setAttribute("y2",f.axes.y.scale(0)),e.appendChild(b)}if(c&&(c.setAttribute("width",f.width),c.setAttribute("height",f.height),c.setAttribute("x",0),c.setAttribute("y",0)),u&&(r=b=>{if(b){let k=b.clientX-e.getBoundingClientRect().left,E=b.clientY-e.getBoundingClientRect().top;if(k>=f.inset.left&&k<=f.width-f.inset.right&&E>=f.inset.top&&E<=f.height-f.inset.bottom){let C=f.closestXPoint(k);u.setAttribute("opacity","1"),u.setAttribute("x1",C.x),u.setAttribute("x2",C.x),u.setAttribute("y1",f.axes.y.scale(f.axes.y.domain[0])),u.setAttribute("y2",f.axes.y.scale(f.axes.y.domain[1]))}else u.setAttribute("opacity","0")}else u.setAttribute("opacity","0")}),d&&(n=b=>{if(b===null)w(d,"data-active");else{let k=b.clientX-e.getBoundingClientRect().left,E=b.clientY-e.getBoundingClientRect().top;if(k>=f.inset.left&&k<=f.width-f.inset.right&&E>=f.inset.top&&E<=f.height-f.inset.bottom){let C=f.closestXPoint(k);if(C){h(d,"data-active","");let T=d.getBoundingClientRect(),P=e.getBoundingClientRect(),V=P.width-(C.x+T.width+15),et=P.height-(E+T.height+15),ht=V<0?C.x-T.width-15:C.x+15,rt=et<0?E-T.height-15:E+15;d.style.transform=`translate(${ht}px, ${rt}px)`;let ct=a.tooltip.content.cloneNode(!0).firstElementChild;ct.querySelectorAll("slot").forEach(K=>{let Ft=K.getAttribute("field");if(Ft){let nt=K.hasAttribute("format")?JSON.parse(K.getAttribute("format")):null,X=C.datum[Ft];if(nt===null)return K.textContent=X;nt={...nt,timeZone:"UTC"},Hr(X)?X=Number(X).toLocaleString(f.locale,nt):$r(X)&&(X=new Date(X).toLocaleDateString(f.locale,nt)),K.textContent=X}}),d.innerHTML=ct.innerHTML}else w(d,"data-active")}else w(d,"data-active")}}),m&&(l=b=>{let k=null;if(b!==null){let E=b.clientX-e.getBoundingClientRect().left,C=b.clientY-e.getBoundingClientRect().top;E>=f.inset.left&&E<=f.width-f.inset.right&&C>=f.inset.top&&C<=f.height-f.inset.bottom&&(k=f.closestXPoint(E))}if(k=k||f.closestXPoint(f.axes.x.range[1]),k){let E=a.summary.content.cloneNode(!0).firstElementChild;E.querySelectorAll("slot").forEach(C=>{let T=C.getAttribute("field");if(T){let P=C.hasAttribute("format")?JSON.parse(C.getAttribute("format")):{};P={...P,timeZone:"UTC"};let V=C.hasAttribute("fallback")&&b===null?C.getAttribute("fallback"):k.datum[T];Hr(V)?V=Number(V).toLocaleString(f.locale,P):$r(V)&&(V=new Date(V).toLocaleString(f.locale,P)),C.textContent=V}}),m.innerHTML=E.innerHTML}},l(null)),e.appendChild(c),e.querySelectorAll("[data-grid-line-group]").forEach(b=>c.before(b)),e.querySelectorAll("[data-axis-line]").forEach(b=>c.before(b)),e.querySelectorAll("[data-zero-line]").forEach(b=>c.before(b)),e.querySelectorAll("[data-area]").forEach(b=>c.before(b)),e.querySelectorAll("[data-line]").forEach(b=>c.before(b)),e.querySelectorAll("[data-cursor]").forEach(b=>c.before(b)),e.querySelectorAll("[data-point-group]").forEach(b=>c.before(b)),x){let b=jo(e);f.updateDimensions({width:f.width,height:f.height},{left:g.left+b.left,right:g.right+b.right,top:g.top+b.top,bottom:g.bottom+b.bottom}),D(!1)}}};this._observable.subscribe("resize",()=>{f.updateDimensions({width:e.parentElement.getBoundingClientRect().width,height:e.parentElement.getBoundingClientRect().height},{left:0,right:0,top:0,bottom:0}),D()}),this._observable.subscribe("data",()=>{f.updateData(this._data),f.updateDimensions({width:f.width,height:f.height},{left:0,right:0,top:0,bottom:0}),D()}),new ResizeObserver(()=>{this._observable.notify("resize")}).observe(this),new MutationObserver(x=>{x.forEach(b=>{b.attributeName==="value"&&this._selectable.setState(this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[])})}).observe(this,{attributes:!0,attributeFilter:["value"]})}};customElements.define("ui-chart",ma);function $o(i){let t=null,e=[];return i.querySelectorAll('template[name="line"], template[name="area"], template[name="point"]').forEach(s=>{e.push(s.getAttribute("field")||"value")}),i.querySelectorAll('template[name="axis"][axis="x"]').forEach(s=>{t=s.getAttribute("field")||"index"}),e=Array.from(new Set(e)),t===null&&(t="index"),e.length===0&&(e=["value"]),[t,e]}function ut(i){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t.innerHTML=i.innerHTML,t.firstElementChild}function Wr(i,t){if(Ur(i,t)){if(t.axis==="x"&&t.type==="categorical")Yo(i);else if(t.axis==="x"&&t.type==="time"){let e=zo(i);if(!Ur(i,t))return;e(),Go(i)}}}function Ur(i,t){let e=Array.from(i.children);e=e.filter(s=>s.style.display!="none");for(let s=0;s<e.length;s++){let a=e[s],r=e[s+1];if(!r)break;let n=a.getBoundingClientRect(),l=r.getBoundingClientRect(),o=20;if(t.axis==="y"){if(n.bottom+o<l.top)return!0}else if(n.right+o>l.left)return!0}return!1}function Yo(i){let t=[];return Array.from(i.children).forEach((e,s)=>{let a=e.matches("text")?e:e.querySelector("text");Array.from(i.children).forEach((r,n)=>{let l=r.matches("text")?r:r.querySelector("text");l&&(l.style.transform="rotate(-45deg)",l.style.textAnchor="end",t.push(()=>{l.style.transform=null,l.style.textAnchor=null}))})}),()=>t.forEach(e=>e())}function zo(i){let t=Array.from(i.children);return t.forEach((e,s)=>{s%2===1&&(e.style.display="none")}),()=>t.forEach((e,s)=>{e.style.display="inline"})}function Go(i){let t=Array.from(i.children);t.forEach((n,l)=>{n.style.display="none"});let e=t[0],s=t[t.length-1],a=e.matches("text")?e:e.querySelector("text"),r=s.matches("text")?s:s.querySelector("text");return e.style.display="inline",a.style.textAnchor="start",s.style.display="inline",r.style.textAnchor="end",()=>t.forEach((n,l)=>{n.style.display="inline"})}function Hr(i){return typeof i=="number"||typeof i=="string"&&!isNaN(Number(i))}function $r(i){return i instanceof Date||typeof i=="string"&&!isNaN(Date.parse(i))}function jo(i){let t=i.getBoundingClientRect(),e={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return Array.from(i.children).forEach(s=>{if(s.hasAttribute("data-overlay")||s.style.display==="none")return;let a=s.getBoundingClientRect();!a.width&&!a.height||(e.top=Math.min(e.top,a.top),e.right=Math.max(e.right,a.right),e.bottom=Math.max(e.bottom,a.bottom),e.left=Math.min(e.left,a.left))}),{top:Math.max(0,t.top-e.top),right:Math.max(0,e.right-t.right),bottom:Math.max(0,e.bottom-t.bottom),left:Math.max(0,t.left-e.left)}}var ga=class extends _{boot(){h(this,"role","button"),this._disableable=new I(this),this._disableable.onInitAndChange(t=>{t?w(this,"tabindex","0"):h(this,"tabindex","0")}),this._buttonType=this.getAttribute("type")||"button"}mount(){v(this,"keydown",t=>{t.key==="Enter"&&(t.preventDefault(),this.disabled||this.click()),t.key===" "&&t.preventDefault()}),v(this,"keyup",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation(),this.disabled||this.click())}),v(this,"click",()=>{this.disabled||(this._buttonType==="submit"?this._handleSubmit():this._buttonType==="reset"&&this._handleReset())})}_handleSubmit(){let t=this.closest("form");t&&t.requestSubmit()}_handleReset(){let t=this.closest("form");t&&t.reset()}};M(({css:i})=>i`ui-button { display: block; }`);S("button",ga);var va=class extends _{mount(){let t=this.querySelector("button,ui-button");v(t,"click",()=>{li(this,s=>!!s._closeable)?._closeable?.close()})}};S("close",va);var ya=class extends _{toasts=[];initiallyExpanded=!1;expanded=!1;mount(){this.initiallyExpanded=this.hasAttribute("expanded");let t=this.getAttribute("position")||"bottom right";this.verticalPosition=t.match(/\b(top|bottom)\b/)?.[0]||"bottom",this.horizontalPosition=t.match(/\b(left|start|center|right|end)\b/)?.[0]||"right",this.horizontalPosition==="left"?this.horizontalPosition="start":this.horizontalPosition==="right"&&(this.horizontalPosition="end"),h(this,"role","status")}showToast(t={}){let e=this.querySelector("ui-toast");if(!e)return console.warn("ui-toast-group: no ui-toast element found",this);this.matches(":popover-open")&&this.hidePopover(),this.showPopover();let s=Number(t.duration===void 0?5e3:t.duration),a=e.prepareToastTemplate(t),r=a.firstElementChild,n={timeout:null,el:a,height:null,contentEl:r,contentHeight:null},l=()=>{this.animateIn(n),this.updateList()},o=()=>{this.animateOut(n),this.updateList()};this.toasts.unshift(n),this.appendChild(a),l(),a.hideToast=o;let u=s!==0&&ts(()=>{n.timeout=null,o()},s);u&&(n.timeout=u),a.destroyToast=()=>{n.timeout&&(n.timeout.cancel(),n.timeout=null);let c=this.toasts.indexOf(n);c>-1&&this.toasts.splice(c,1),a.remove(),this.updateList()},a.addEventListener("mouseenter",()=>{this.pauseTimeouts(),this.initiallyExpanded||(this.expanded=!0,this.updateList())}),a.addEventListener("mouseleave",()=>{this.resumeTimeouts(),this.initiallyExpanded||(this.expanded=!1,this.updateList())}),a._closeable=new Ct(a),a._closeable.onClose(()=>a.destroyToast())}pauseTimeouts(){for(let t of this.toasts)t.timeout?.pause()}resumeTimeouts(){for(let t of this.toasts)t.timeout?.resume()}animateIn(t){let a=1.5*((this.verticalPosition==="top"?"bottom":"top")==="top"?1:-1);t.contentEl.style.opacity=0,t.contentEl.style.transform=`translateY(${a}rem)`,t.el.style.zIndex=5001,t.contentEl.offsetHeight,t.contentHeight=t.contentEl.offsetHeight,t.height=t.el.offsetHeight,t.contentEl.style.opacity=100,t.contentEl.style.transform="translateY(0)"}animateOut(t){let s=.5*(this.verticalPosition==="top"?1:-1);t.contentEl.style.transform=`translateY(${s}rem)`,t.contentEl.style.opacity=0;let a=this.toasts.indexOf(t);a>-1&&this.toasts.splice(a,1);let r=()=>{t.el.remove(),this.toasts.length===0&&(this.expanded=!1)};t.contentEl.getAnimations().length?t.contentEl.addEventListener("transitionend",()=>{r()},{once:!0}):r()}updateList(){this.initiallyExpanded||this.expanded?this.expand():this.collapse()}expand(){let t=0;for(let e of this.toasts){let s=this.verticalPosition==="top"?1:-1;e.el.style.transform=`translateY(${s*t}px)`,e.el.style.opacity=100,e.contentEl.style.height=`${e.contentHeight}px`,e.contentEl.style.overflow="auto",t+=e.height}}collapse(){let t=0,s=this.toasts[0]?.contentHeight||0;for(let a of this.toasts){let r=3,n=0,o=10*(this.verticalPosition==="top"?1:-1)*t;a.el.style.zIndex=5e3-t,t>=r?(n=1-.05*(r-1),a.el.style.opacity=0):(n=1-.05*t,a.el.style.opacity=100),a.contentEl.style.height=`${s}px`,a.contentEl.style.overflow="hidden",a.el.style.transform=`scaleX(${n}) translateY(${o}px)`,t++}}},wa=class extends _{mount(){this.closest("ui-toast-group")||(h(this,"role","status"),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.hideToast()}),this.defaultPosition=this.getAttribute("position")||"bottom end")}showToast(t={}){let e=this.template().nextElementSibling;e&&e.destroyToast();let s=Number(t.duration===void 0?5e3:t.duration),a=t.dataset?.position??this.defaultPosition;t.dataset?.position!==void 0&&delete t.dataset.position,this.setAttribute("position",a);let r=this.prepareToastTemplate(t),n=()=>{this.showPopover(),r.classList.add("showing")},l=()=>{r._hiding=!0,r.classList.remove("showing"),r.getAnimations().length?r.addEventListener("transitionend",()=>{r.remove(),this.hidePopover()},{once:!0}):(r.remove(),this.hidePopover())};this.appendChild(r),n(),r.hideToast=l;let o=s!==0&&ts(()=>{l()},s);r.destroyToast=()=>{o&&o.cancel(),r.remove(),this.hidePopover()},r.addEventListener("mouseenter",()=>{o&&o.pause()}),r.addEventListener("mouseleave",()=>{o&&o.resume()}),r._closeable=new Ct(r),r._closeable.onClose(()=>r.destroyToast())}hideToast(){let t=this.template().nextElementSibling;t&&t.destroyToast()}template(){return this.querySelector("template")}prepareToastTemplate(t){let e=t.slots||{},s=t.dataset||{},a=this.template();if(!a)return console.warn("ui-toast: no template element found",this);let r=a.content.cloneNode(!0).firstElementChild;return r.setAttribute("aria-atomic","true"),Object.entries(e).forEach(([n,l])=>{[null,void 0,!1].includes(l)||r.querySelectorAll(`slot[name="${n}"]`).forEach(o=>{o.replaceWith(document.createTextNode(l))})}),Object.entries(s).forEach(([n,l])=>{r.dataset[n]=l}),r.querySelectorAll("slot").forEach(n=>n.remove()),r}};S("toast-group",ya);S("toast",wa);var xa=class i extends W{boot(){this._disableable=new I(this),this._disableable.onInitAndChange(t=>{this.walker().each(e=>{e.disabled=t})}),this._selectable=new Q(this),this._controllable=new N(this,{disabled:this._disabled,bubbles:!0}),this._focusable=new At(this,{wrap:!0}),this._submittable=new U(this,{name:this.getAttribute("name"),value:this._selectable.getState(),includeWhenEmpty:!1}),this._controllable.initial(t=>t&&this._selectable.setState(t)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=F(),this._controllable.setter(this._detangled(t=>{this._selectable.setState(t)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),v(this,"keydown",t=>{["ArrowDown","ArrowRight"].includes(t.key)?(this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp","ArrowLeft"].includes(t.key)&&(this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),h(this,"role","radiogroup"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}walker(){return H(this,(t,{skip:e,reject:s})=>{if(t instanceof i)return s();if(t.localName!=="ui-radio")return e()})}},Aa=class extends W{boot(){let t=this;this._disableable=new I(this),this._selectable=new O(t,{value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),this.value=this._selectable.getValue(),this._selectable.onChange(()=>{this._selectable.isSelected()&&this._focusable.focus(!1)}),this._disableable.onChange(e=>{e?this._focusable.untabbable():this._selectable.isSelected()&&this._focusable.tabbable()}),h(t,"role","radio"),this._focusable=new z(t,{disableable:this._disableable,tabbableAttr:"data-active"}),v(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),v(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),v(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&this.closest("form")?.requestSubmit()})),v(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),v(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),Ko(t),v(t,"focus",e=>{Kt()&&this._selectable.select()})}get checked(){return this._selectable.isSelected()}set checked(t){(this.closest("ui-radio-group")?._detangled||(()=>{}))(()=>{t&&this._selectable.select()})()}};function Ko(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i.click()})}M(({css:i})=>i`ui-radio-group { display: block; }`);M(({css:i})=>i`ui-radio { display: inline-block; user-select: none; }`);S("radio-group",xa);S("radio",Aa);var Sa=class extends _{boot(){v(this,"scroll",t=>{this.updateAttributes()},{passive:!0}),new ResizeObserver(()=>{this.updateAttributes()}).observe(this)}mount(){queueMicrotask(()=>{this.updateAttributes()})}updateAttributes(){this.scrollLeft>12?h(this,"data-scrolled-right",""):w(this,"data-scrolled-right"),this.scrollWidth-this.clientWidth-this.scrollLeft>12?h(this,"data-scrolled-left",""):w(this,"data-scrolled-left")}};S("table-scroll-area",Sa);var Bi=class i extends _{boot(){this._disabled=this.hasAttribute("disabled")}mount(){this.walkPanels(t=>Yr(t)),new MutationObserver(t=>{this.walkPanels(e=>Yr(e))}).observe(this,{childList:!0})}showPanel(t){this.walkPanels(e=>{e.getAttribute("name")===t?e.show():e.hide()})}getPanel(t){return this.walkPanels((e,s)=>{e.getAttribute("name")===t&&s(e)})}walkPanels(t){let e=!1,s;for(let a of this.children)if(!(a instanceof i)&&!(a instanceof Wi)&&(t(a,r=>{e=!0,s=r}),e))break;return s}},Ea=class extends _{boot(){v(this,"scroll",t=>{this.updateScrollVariable()},{passive:!0}),new ResizeObserver(()=>{this.updateScrollVariable()}).observe(this)}updateScrollVariable(){let t=Math.abs(this.scrollLeft)/(this.scrollWidth-this.clientWidth)*100;this.style.setProperty("--flux-scroll-percentage",t+"%")}},Wi=class i extends W{boot(){this._focusable=new At(this,{wrap:!0}),this._selectableGroup=new Q(this),this._controllable=new N(this,{disabled:this._disabled}),this._controllable.initial(e=>e&&this._selectableGroup.setState(e)),this._controllable.getter(()=>this._selectableGroup.getState());let t=F();this._controllable.setter(t(e=>{this._selectableGroup.setState(e)})),this._selectableGroup.onChange(t(()=>{this._controllable.dispatch()})),v(this,"keydown",e=>{["ArrowDown","ArrowRight"].includes(e.key)?(this._focusable.focusNext(),e.preventDefault(),e.stopPropagation()):["ArrowUp","ArrowLeft"].includes(e.key)&&(this._focusable.focusPrev(),e.preventDefault(),e.stopPropagation())}),h(this,"role","tablist")}mount(){this.initializeTabs(),this._focusable.ensureTabbable(),this._selectableGroup.getState()||this._selectableGroup.selectFirst(),new MutationObserver(t=>{this.initializeTabs();let e=this._selectableGroup.selected();e.el.closest("ui-tab-group").showPanel(e.value)}).observe(this,{childList:!0})}initializeTabs(){this.walker().each(t=>{t._initialized||t._disableable||t.hasAttribute("action")||(Xo(t),t._initialized=!0)})}walker(){return H(this,(t,{skip:e,reject:s})=>{if(t instanceof Bi||t instanceof i)return s();if(!["a","button"].includes(t.localName))return e()})}};function Xo(i){i._disableable=new I(i);let t=i.matches("a")?i:null,e=t||i;i._disableable.onInitAndChange(a=>{a?h(e,"aria-disabled","true"):w(e,"aria-disabled")});let s=R(e,"tab");if(h(e,"role","tab"),e._focusable=new z(e,{disableable:i._disableable,tabbableAttr:"data-active"}),!t){let a=i.getAttribute("name");i._selectable=new O(i,{value:a||Math.random().toString(36).substring(2,10),label:i.hasAttribute("label")?i.getAttribute("label"):i.textContent.trim(),selectedInitially:i.hasAttribute("selected"),toggleable:!1}),v(i,"click",()=>i._selectable.press()),i._selectable.onInitAndChange(()=>{let n=i.closest("ui-tab-group")?.getPanel(a);i._selectable.getState()?n?.show():n?.hide(),i._selectable.getState()&&i._focusable.focus(!1)});let r=null;i.closest("ui-tab-group")?.hasAttribute("manual")||(v(i,"pointerdown",()=>{clearTimeout(r),r=setTimeout(()=>r=null)}),v(i,"focus",()=>{r||i._selectable.select()})),queueMicrotask(()=>{let n=i.closest("ui-tab-group");if(!n)return;let l=n.getPanel(a);if(!l)throw new Error("Could not find panel...");h(i,"aria-controls",l.id),h(l,"aria-labelledby",i.id)})}}function Yr(i){i._initialized||(R(i,"tab-panel"),h(i,"role","tabpanel"),i.hasAttribute("tabindex")||h(i,"tabindex","-1"),i.show=()=>{h(i,"data-selected",""),h(i,"tabindex","0")},i.hide=()=>{w(i,"data-selected"),h(i,"tabindex","-1")},i._initialized=!0)}M(({css:i})=>i`ui-tab-group, ui-tabs { display: block; cursor: default; }`);S("tab-group",Bi);S("tabs-scroll-area",Ea);S("tabs",Wi);var _a=class extends W{mount(){this.inputEls=this.querySelectorAll("[data-flux-otp-input]"),this.length=this.inputEls.length,this.config={mode:this.getAttribute("mode")||"numeric",autocomplete:this.getAttribute("autocomplete")||"one-time-code",autoSubmit:this.getAttribute("submit")==="auto",inputAriaLabelTemplate:this.getAttribute("data-flux-input-aria-label")||"Character {current} of {total}"},this.state={length:0,onChanges:[],getValue:()=>Array.from(this.inputEls).map(e=>e.value).join(""),setValue:e=>{let s=(e??"").replace(/\s/g,"").replace(this.invalidCharacters(),"").toUpperCase();for(let a=0;a<this.length;a++)this.inputEls[a].value=s[a]||"";this.state.length=s.length,this.state.onChanges.forEach(a=>a(s))},notify:()=>{let e=this.state.getValue();this.state.length=e.length,this.state.onChanges.forEach(s=>s(e))},reapply:()=>{let e=this.state.getValue();this.state.setValue(e)},onChange:e=>{this.state.onChanges.push(e)}},this.hasAttribute("value")&&this.state.setValue(this.getAttribute("value")),this._controllable=new N(this),this._controllable.initial(e=>e&&this.state.setValue(e)),this._controllable.getter(()=>this.state.getValue());let t=F();this._controllable.setter(t(e=>this.state.setValue(e))),this.state.onChange(t(()=>this._controllable.dispatch())),this._submittable=new U(this,{name:this.getAttribute("name"),value:this.state.getValue()}),this.state.onChange(e=>{this._submittable.update(e),e.length===this.length&&this.config.autoSubmit&&this.closest("form")?.requestSubmit(),Array.from(this.inputEls).findIndex(a=>a===document.activeElement)>this.nextIndex()&&this.focusIndex(this.nextIndex())}),this._disableable=new I(this),this._disableable.onInitAndChange(e=>{for(let s of this.inputEls)e?h(s,"disabled",e):w(s,"disabled")}),this.updateTabIndexes(this.nextIndex());for(let e=0;e<this.length;e++){h(this.inputEls[e],"autocomplete",e===0?this.config.autocomplete:"off"),h(this.inputEls[e],"aria-label",this.config.inputAriaLabelTemplate.replace("{current}",e+1).replace("{total}",this.length));let s;v(this.inputEls[e],"beforeinput",a=>{s=a.target.value}),v(this.inputEls[e],"input",a=>{a.stopPropagation();let r=a.target.value;if(r.length>1){this.state.setValue(r),this.focusIndex(this.nextIndex()),a.preventDefault();return}if(r==""){this.state.reapply(),e<this.nextIndex()?this.focusIndex(e):this.focusPrev(e);return}if(this.invalidCharacters().test(r)){a.target.value=s,this.focusIndex(e);return}this.config.mode!=="numeric"&&(a.target.value=r.toUpperCase()),this.inputEls[e].blur(),this.state.notify(),this.focusNext(e)}),v(this.inputEls[e],"keydown",a=>{["Backspace","Delete","Clear"].includes(a.key)?a.target.value===""&&requestAnimationFrame(()=>this.focusPrev(e)):a.key==="ArrowRight"?(dt()?this.focusPrev(e):this.focusNext(e),a.preventDefault()):a.key==="ArrowLeft"&&(dt()?this.focusNext(e):this.focusPrev(e),a.preventDefault())}),v(this.inputEls[e],"pointerdown",a=>{this.focusIndex(Math.min(e,this.nextIndex())),a.preventDefault()}),v(this.inputEls[e],"focus",a=>{a.target.setSelectionRange(0,1),this.updateTabIndexes(e)})}}trigger(){return this.inputEls[this.nextIndex()]}focusIndex(t){let e=this.inputEls[t];document.activeElement===e&&e.blur(),e.focus()}focusPrev(t){this.focusIndex(Math.max(0,t-1))}focusNext(t){this.focusIndex(Math.min(t+1,this.nextIndex()))}nextIndex(){return Math.min(this.state.length,this.length-1)}updateTabIndexes(t){for(let e=0;e<this.length;e++)e===t?h(this.inputEls[e],"tabindex","0"):h(this.inputEls[e],"tabindex","-1")}invalidCharacters(){switch(this.config.mode){case"numeric":return/[^\d]/g;case"alpha":return/[^a-zA-Z]/g;case"alphanumeric":return/[^a-zA-Z0-9]/g;default:throw new Error(`Unknown OTP input mode "${this.config.mode}"`)}}};S("otp",_a);document.addEventListener("alpine:init",()=>{let i=window.Alpine,t=window.Flux?.applyAppearance;t||(t=()=>{window.Flux.appearance=null,window.localStorage.removeItem("flux.appearance")});let e=i.reactive({toast(...a){let r={slots:{},dataset:{}};typeof a[0]=="string"&&(r.slots.text=a.shift()),typeof a[0]=="string"&&(r.slots.heading=r.slots.text,r.slots.text=a.shift());let n=a.shift()||{};n.text&&(r.slots.text=n.text),n.heading&&(r.slots.heading=n.heading),n.variant&&(r.dataset.variant=n.variant),n.position&&(r.dataset.position=n.position),n.duration!==void 0&&(r.duration=n.duration),document.dispatchEvent(new CustomEvent("toast-show",{detail:r}))},modal(a){return{show(){document.dispatchEvent(new CustomEvent("modal-show",{detail:{name:a}}))},close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{name:a}}))}}},modals(){return{close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{}}))}}},appearance:window.localStorage.getItem("flux.appearance")||"system",systemAppearanceChanged:1,get dark(){return JSON.stringify(e.systemAppearanceChanged),e.appearance==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches:e.appearance==="dark"},set dark(a){let r=this.dark;a!==r&&(a?e.appearance="dark":e.appearance="light")}});window.Flux=e,i.magic("flux",()=>e),i.effect(()=>{t(e.appearance)}),document.addEventListener("livewire:navigating",a=>{a.detail.onSwap(()=>{t(e.appearance)})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{e.systemAppearanceChanged++,t(e.appearance)}),i.data("fluxInputClearable",()=>({clear(){let a=this.$el.closest("[data-flux-input]").querySelector("input");a.value="",a.dispatchEvent(new Event("input",{bubbles:!1})),a.dispatchEvent(new Event("change",{bubbles:!1})),a.dispatchEvent(new CustomEvent("clear",{bubbles:!1})),a.focus()}})),i.data("fluxInputViewable",()=>({open:!1,toggle(){this.open=!this.open,this.$el.closest("[data-flux-input]").querySelector("input").setAttribute("type",this.open?"text":"password")},init(){let a=this.$el.closest("[data-flux-input]")?.querySelector("input");if(!a)return;new MutationObserver(()=>{let n=this.open?"text":"password";a.getAttribute("type")!==n&&a.setAttribute("type",n)}).observe(a,{attributes:!0,attributeFilter:["type"]})}})),i.data("fluxInputCopyable",()=>({copied:!1,copy(){this.copied=!this.copied;let a=this.$el.closest("[data-flux-input]").querySelector("input");navigator.clipboard&&navigator.clipboard.writeText(a.value),a.dispatchEvent(new CustomEvent("copy",{bubbles:!1})),setTimeout(()=>this.copied=!1,2e3)}})),i.data("fluxInputFile",a=>({updateLabel(r){this.$refs.name.textContent=r.target.files[1]?r.target.files.length+" "+a.files:r.target.files[0]?.name||a.noFile},init(){Object.defineProperty(this.$refs.input,"value",{...Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),set(r){Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value").set.call(this,r),r||this.dispatchEvent(new Event("change",{bubbles:!0}))}})}})),i.data("fluxModal",(a,r)=>({handleShow(n){n.detail.name===a&&(r&&n.detail.scope===r?this.$el.showModal():n.detail.scope||this.$el.showModal())},handleClose(n){n.detail.name?n.detail.name===a&&(r&&n.detail.scope===r?this.$el.close():n.detail.scope||this.$el.close()):this.$el.close()}})),i.data("fluxCommandInputClearable",()=>({clear(){let a=this.$el.closest("[data-flux-command-input]").querySelector("input");a.value="",a.dispatchEvent(new Event("input",{bubbles:!1})),a.dispatchEvent(new CustomEvent("clear",{bubbles:!1})),a.focus()}})),i.data("fluxSelectSearchClearable",()=>({clear(){let a=this.$el.closest("[data-flux-select-search]").querySelector("input");a.value="",a.dispatchEvent(new Event("input",{bubbles:!1})),a.dispatchEvent(new CustomEvent("clear",{bubbles:!1})),a.focus()}})),i.data("fluxPillboxSearchClearable",()=>({clear(){let a=this.$el.closest("[data-flux-pillbox-search]").querySelector("input");a.value="",a.dispatchEvent(new Event("input",{bubbles:!1})),a.dispatchEvent(new CustomEvent("clear",{bubbles:!1})),a.focus()}}))});!Ua()&&!Ha()&&$a();})();
